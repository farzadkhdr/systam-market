<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم - نظام بيع الإلكترونيات</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* أنماط خاصة بالداشبورد */
        .dashboard-stats {
            padding: 30px;
        }
        
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .summary-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            text-align: center;
            border-top: 4px solid var(--primary-color);
        }
        
        .summary-card:nth-child(2) { border-top-color: var(--success-color); }
        .summary-card:nth-child(3) { border-top-color: var(--warning-color); }
        .summary-card:nth-child(4) { border-top-color: var(--info-color); }
        
        .summary-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .summary-card:nth-child(2) .summary-icon { color: var(--success-color); }
        .summary-card:nth-child(3) .summary-icon { color: var(--warning-color); }
        .summary-card:nth-child(4) .summary-icon { color: var(--info-color); }
        
        .summary-value {
            font-size: 32px;
            font-weight: 800;
            margin: 10px 0;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        
        .recent-activity {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
        }
        
        .activity-item:hover {
            background: var(--light-color);
        }
        
        .activity-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            color: white;
            font-size: 20px;
        }
        
        .activity-icon.sale { background: var(--success-color); }
        .activity-icon.purchase { background: var(--info-color); }
        .activity-icon.customer { background: var(--warning-color); }
        .activity-icon.payment { background: var(--primary-color); }
        
        .activity-details {
            flex: 1;
        }
        
        .activity-text {
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .activity-time {
            font-size: 14px;
            color: var(--gray-color);
        }
        
        .activity-amount {
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .low-stock-alert {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            color: #7c2d12;
        }
        
        .alert-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .alert-header i {
            font-size: 30px;
            margin-left: 15px;
        }
        
        .low-stock-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .stock-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stock-quantity {
            font-size: 24px;
            font-weight: 800;
            color: #dc2626;
        }
        
        @media (max-width: 1200px) {
            .stats-summary {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .stats-summary {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- الشريط الجانبي -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <i class="fas fa-laptop"></i>
                <span>النظام</span>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-item active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>لوحة التحكم</span>
            </div>
            
            <div class="menu-item" data-tab="sales">
                <i class="fas fa-shopping-cart"></i>
                <span>المبيعات</span>
                <span class="badge" id="salesBadge">3</span>
            </div>
            
            <div class="menu-item" data-tab="inventory">
                <i class="fas fa-boxes"></i>
                <span>المخزون</span>
                <span class="badge badge-danger" id="inventoryBadge">5</span>
            </div>
            
            <div class="menu-item" data-tab="customers">
                <i class="fas fa-users"></i>
                <span>العملاء</span>
            </div>
            
            <div class="menu-item" data-tab="suppliers">
                <i class="fas fa-truck"></i>
                <span>الموردون</span>
            </div>
            
            <div class="menu-item" data-tab="transactions">
                <i class="fas fa-exchange-alt"></i>
                <span>المعاملات</span>
            </div>
            
            <div class="menu-item" data-tab="settings">
                <i class="fas fa-cog"></i>
                <span>الإعدادات</span>
            </div>
        </div>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">ف</div>
                <div>
                    <div class="user-name">فرزاد</div>
                    <div class="user-role">مدير النظام</div>
                </div>
            </div>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
            </button>
        </div>
    </div>
    
    <!-- المحتوى الرئيسي -->
    <div class="main-content">
        <!-- الهيدر -->
        <div class="header">
            <div class="header-title">
                <h1 id="pageTitle">لوحة التحكم</h1>
                <p id="pageSubtitle">مرحباً بعودتك! إليك نظرة عامة على أداء متجرك.</p>
            </div>
            
            <div class="header-actions">
                <div class="date-time">
                    <i class="far fa-calendar-alt"></i>
                    <span id="currentDate">الاثنين، 15 مايو 2023</span>
                    <span class="current-time">10:30:45</span>
                </div>
                
                <div class="quick-actions">
                    <button class="btn-primary btn-sm" onclick="window.location.href='../sales/sales.html'">
                        <i class="fas fa-plus"></i> بيع جديد
                    </button>
                    <button class="btn-secondary btn-sm">
                        <i class="fas fa-print"></i> تقرير اليوم
                    </button>
                </div>
            </div>
        </div>
        
        <!-- محتوى الداشبورد -->
        <div class="tab-content active" id="dashboardTab">
            <div class="dashboard-stats">
                <!-- تنبيه المخزون المنخفض -->
                <div class="low-stock-alert">
                    <div class="alert-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>تنبيه: مخزون منخفض</h3>
                    </div>
                    <div class="low-stock-items">
                        <div class="stock-item">
                            <div class="stock-name">هاتف سامسونج</div>
                            <div class="stock-quantity">2</div>
                            <div class="stock-unit">قطعة متبقية</div>
                        </div>
                        <div class="stock-item">
                            <div class="stock-name">لابتوب ديل</div>
                            <div class="stock-quantity">1</div>
                            <div class="stock-unit">قطعة متبقية</div>
                        </div>
                        <div class="stock-item">
                            <div class="stock-name">كاميرا كانون</div>
                            <div class="stock-quantity">3</div>
                            <div class="stock-unit">قطعة متبقية</div>
                        </div>
                    </div>
                </div>
                
                <!-- ملخص الإحصائيات -->
                <div class="stats-summary">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="summary-value" id="dailySales">2,150</div>
                        <div class="summary-label">مبيعات اليوم</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="summary-value" id="weeklySales">12,540</div>
                        <div class="summary-label">مبيعات الأسبوع</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="summary-value" id="monthlySales">45,820</div>
                        <div class="summary-label">مبيعات الشهر</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <i class="fas fa-hand-holding-usd"></i>
                        </div>
                        <div class="summary-value" id="totalProfit">17,370</div>
                        <div class="summary-label">ربح الشهر</div>
                    </div>
                </div>
                
                <!-- المخططات -->
                <div class="charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>مبيعات الشهر الحالي</h3>
                            <select class="chart-period">
                                <option>مايو 2023</option>
                                <option>أبريل 2023</option>
                                <option>مارس 2023</option>
                            </select>
                        </div>
                        <div class="chart-placeholder">
                            <i class="fas fa-chart-bar fa-4x"></i>
                            <p>رسم بياني للمبيعات</p>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>نسبة المبيعات حسب الفئة</h3>
                        </div>
                        <div class="chart-placeholder">
                            <i class="fas fa-chart-pie fa-4x"></i>
                            <p>رسم بياني دائري</p>
                        </div>
                    </div>
                </div>
                
                <!-- النشاط الأخير -->
                <div class="recent-activity">
                    <div class="activity-header">
                        <h3>النشاط الأخير</h3>
                        <a href="#" class="view-all">عرض الكل</a>
                    </div>
                    
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon sale">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div class="activity-details">
                                <div class="activity-text">عملية بيع جديدة للعميل أحمد محمد</div>
                                <div class="activity-time">منذ 10 دقائق</div>
                            </div>
                            <div class="activity-amount">+ 1,250 ريال</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon purchase">
                                <i class="fas fa-box-open"></i>
                            </div>
                            <div class="activity-details">
                                <div class="activity-text">شراء منتجات جديدة من المورد التقنية المتطورة</div>
                                <div class="activity-time">منذ 45 دقيقة</div>
                            </div>
                            <div class="activity-amount">- 3,450 ريال</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon customer">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <div class="activity-details">
                                <div class="activity-text">عميل جديد مسجل: سعاد عبدالله</div>
                                <div class="activity-time">منذ ساعتين</div>
                            </div>
                            <div class="activity-amount">عميل جديد</div>
                        </div>
                        
                        <div class="activity-item">
                            <div class="activity-icon payment">
                                <i class="fas fa-money-check-alt"></i>
                            </div>
                            <div class="activity-details">
                                <div class="activity-text">سداد دين من العميل خالد علي</div>
                                <div class="activity-time">منذ 5 ساعات</div>
                            </div>
                            <div class="activity-amount">+ 500 ريال</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- محتوى المبيعات (سيتم تحميله ديناميكياً) -->
        <div class="tab-content" id="salesTab">
            <!-- سيتم تحميل محتوى المبيعات هنا -->
        </div>
        
        <!-- محتوى المخزون -->
        <div class="tab-content" id="inventoryTab">
            <!-- سيتم تحميل محتوى المخزون هنا -->
        </div>
        
        <!-- محتوى العملاء -->
        <div class="tab-content" id="customersTab">
            <!-- سيتم تحميل محتوى العملاء هنا -->
        </div>
        
        <!-- محتوى الموردين -->
        <div class="tab-content" id="suppliersTab">
            <!-- سيتم تحميل محتوى الموردين هنا -->
        </div>
        
        <!-- محتوى المعاملات -->
        <div class="tab-content" id="transactionsTab">
            <!-- سيتم تحميل محتوى المعاملات هنا -->
        </div>
        
        <!-- محتوى الإعدادات -->
        <div class="tab-content" id="settingsTab">
            <!-- سيتم تحميل محتوى الإعدادات هنا -->
        </div>
    </div>
    
    <script src="../scripts.js"></script>
    <script>
        // تحميل إحصائيات الداشبورد
        document.addEventListener('DOMContentLoaded', function() {
            // تحديث تاريخ ووقت الداشبورد
            updateDashboardDateTime();
            
            // تحميل البيانات الحقيقية من localStorage
            loadRealDashboardData();
            
            // إعداد أزرار التبويب
            setupTabButtons();
        });
        
        function updateDashboardDateTime() {
            const now = new Date();
            const dateOptions = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const timeOptions = {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            
            const dateString = now.toLocaleDateString('ar-SA', dateOptions);
            const timeString = now.toLocaleTimeString('ar-SA', timeOptions);
            
            document.getElementById('currentDate').textContent = dateString;
            
            // تحديث الوقت كل ثانية
            setInterval(() => {
                const currentTime = new Date();
                const currentTimeString = currentTime.toLocaleTimeString('ar-SA', timeOptions);
                
                const timeElements = document.querySelectorAll('.current-time');
                timeElements.forEach(el => {
                    el.textContent = currentTimeString;
                });
            }, 1000);
        }
        
        function loadRealDashboardData() {
            // محاولة جلب البيانات من localStorage
            const dashboardData = JSON.parse(localStorage.getItem('dashboardData'));
            
            if (dashboardData) {
                // تحديث الإحصائيات ببيانات حقيقية
                document.getElementById('dailySales').textContent = 
                    formatNumber(dashboardData.dailySales || 2150);
                document.getElementById('weeklySales').textContent = 
                    formatNumber(dashboardData.weeklySales || 12540);
                document.getElementById('monthlySales').textContent = 
                    formatNumber(dashboardData.monthlySales || 45820);
                document.getElementById('totalProfit').textContent = 
                    formatNumber(dashboardData.totalProfit || 17370);
            }
            
            // تحديث البادجات
            updateBadges();
        }
        
        function formatNumber(num) {
            return num.toLocaleString('ar-SA');
        }
        
        function updateBadges() {
            // تحديث بادج المبيعات (عدد المبيعات اليوم)
            const todaySales = JSON.parse(localStorage.getItem('todaySales')) || [];
            const salesBadge = document.getElementById('salesBadge');
            if (salesBadge && todaySales.length > 0) {
                salesBadge.textContent = todaySales.length;
            }
            
            // تحديث بادج المخزون (عدد المنتجات ذات المخزون المنخفض)
            const lowStockProducts = JSON.parse(localStorage.getItem('lowStockProducts')) || [];
            const inventoryBadge = document.getElementById('inventoryBadge');
            if (inventoryBadge && lowStockProducts.length > 0) {
                inventoryBadge.textContent = lowStockProducts.length;
            }
        }
        
        function setupTabButtons() {
            // إضافة مستمعي الأحداث لأزرار التبويب
            const tabButtons = document.querySelectorAll('.menu-item[data-tab]');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // إزالة النشاط من جميع الأزرار
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // إضافة النشاط للزر المحدد
                    this.classList.add('active');
                    
                    // إخفاء جميع المحتويات
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // إظهار المحتوى المحدد
                    const tabId = this.getAttribute('data-tab');
                    const targetTab = document.getElementById(tabId + 'Tab');
                    if (targetTab) {
                        targetTab.classList.add('active');
                        
                        // تحديث عنوان الصفحة
                        const pageTitle = document.getElementById('pageTitle');
                        const pageSubtitle = document.getElementById('pageSubtitle');
                        
                        if (pageTitle) {
                            const tabTitles = {
                                'dashboard': 'لوحة التحكم',
                                'sales': 'المبيعات',
                                'inventory': 'المخزون',
                                'customers': 'العملاء',
                                'suppliers': 'الموردون',
                                'transactions': 'المعاملات',
                                'settings': 'الإعدادات'
                            };
                            
                            const tabSubtitles = {
                                'dashboard': 'مرحباً بعودتك! إليك نظرة عامة على أداء متجرك.',
                                'sales': 'قم بإدارة عمليات البيع والفواتير اليومية.',
                                'inventory': 'إدارة المنتجات والمخزون والباركود.',
                                'customers': 'إدارة بيانات العملاء والمبيعات والديون.',
                                'suppliers': 'إدارة الموردين والمشتريات.',
                                'transactions': 'سجل المعاملات المالية والتحويلات.',
                                'settings': 'تخصيص إعدادات النظام والمستخدمين.'
                            };
                            
                            pageTitle.textContent = tabTitles[tabId];
                            pageSubtitle.textContent = tabSubtitles[tabId];
                        }
                        
                        // تحميل بيانات التبويب إذا لزم الأمر
                        loadTabData(tabId);
                    }
                });
            });
        }
        
        function loadTabData(tabId) {
            switch(tabId) {
                case 'sales':
                    loadSalesTabData();
                    break;
                case 'inventory':
                    loadInventoryTabData();
                    break;
                case 'customers':
                    loadCustomersTabData();
                    break;
                case 'suppliers':
                    loadSuppliersTabData();
                    break;
                case 'transactions':
                    loadTransactionsTabData();
                    break;
                case 'settings':
                    loadSettingsTabData();
                    break;
            }
        }
        
        // دالات تحميل بيانات التبويبات (ستتم ملؤها لاحقاً)
        function loadSalesTabData() {
            console.log('تحميل بيانات المبيعات...');
        }
        
        function loadInventoryTabData() {
            console.log('تحميل بيانات المخزون...');
        }
        
        function loadCustomersTabData() {
            console.log('تحميل بيانات العملاء...');
        }
        
        function loadSuppliersTabData() {
            console.log('تحميل بيانات الموردين...');
        }
        
        function loadTransactionsTabData() {
            console.log('تحميل بيانات المعاملات...');
        }
        
        function loadSettingsTabData() {
            console.log('تحميل الإعدادات...');
        }
    </script>
</body>
</html>
