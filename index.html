<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستەمی فرۆشتی ئەلکترۆنیات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* هەموو CSS لێرە */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --border-radius: 10px;
            --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
            direction: rtl;
            overflow-x: hidden;
            height: 100vh;
        }
        
        /* شێوازی پەڕەی چوونەژوورەوە */
        #loginPage {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            padding: 20px;
            animation: gradientBG 10s ease infinite;
            background-size: 400% 400%;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .login-container {
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }
        
        .login-box {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 40px 30px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header .logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .login-header h2 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .login-header p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .login-form {
            margin-top: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .input-group.remember {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .input-group.remember input {
            width: auto;
            margin-left: 10px;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .login-btn:hover {
            background: linear-gradient(to right, var(--primary-dark), #6310a3);
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.15);
        }
        
        .login-btn i {
            margin-left: 10px;
        }
        
        .login-footer {
            margin-top: 20px;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .login-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .login-footer a:hover {
            text-decoration: underline;
        }
        
        .login-animation {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 15px;
        }
        
        .circle {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: var(--primary);
            animation: bounce 1.5s infinite;
        }
        
        .circle:nth-child(2) {
            animation-delay: 0.2s;
            background-color: var(--secondary);
        }
        
        .circle:nth-child(3) {
            animation-delay: 0.4s;
            background-color: var(--success);
        }
        
        @keyframes bounce {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-15px);
            }
        }
        
        /* شێوازی پەڕەی سەرەکی */
        .container {
            display: flex;
            min-height: 100vh;
            display: none; /* شاردراوە بۆ دەستپێک */
        }
        
        /* بارەگەی لای چەپ - مێنیو */
        .sidebar {
            width: 250px;
            background: linear-gradient(180deg, var(--dark) 0%, #343a40 100%);
            color: white;
            padding: 20px 0;
            transition: var(--transition);
            position: fixed;
            height: 100vh;
            z-index: 100;
            box-shadow: 3px 0 15px rgba(0,0,0,0.1);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(255,255,255,0.1);
        }
        
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        .sidebar.collapsed {
            transform: translateX(-250px);
        }
        
        .sidebar.active {
            transform: translateX(0);
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .sidebar-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-sidebar {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: var(--transition);
            border-right: 3px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
            border-right-color: var(--primary);
        }
        
        .nav-link i {
            margin-left: 10px;
            font-size: 1.2rem;
            width: 25px;
        }
        
        /* بەشی سەرەوە */
        .header {
            height: 70px;
            background-color: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            padding: 0 30px;
            position: fixed;
            top: 0;
            right: 0;
            left: 250px;
            z-index: 99;
            transition: var(--transition);
        }
        
        .header.collapsed {
            left: 0;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
            margin-left: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .header-center {
            flex: 1;
            text-align: center;
        }
        
        .header-center h1 {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            background-color: var(--gray-light);
            padding: 8px 15px;
            border-radius: 30px;
            margin-left: 15px;
        }
        
        .user-info i {
            margin-left: 8px;
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        .logout-btn {
            background-color: var(--danger);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .logout-btn:hover {
            background-color: #e11575;
        }
        
        /* بەشی ناوەڕاست */
        .main-content {
            flex: 1;
            padding: 100px 30px 30px;
            margin-right: 250px;
            transition: var(--transition);
            background-color: #f5f7fa;
            min-height: 100vh;
            overflow-y: auto;
            height: calc(100vh - 70px);
            margin-top: 70px;
        }
        
        .main-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: var(--gray-light);
            border-radius: 10px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        .main-content.collapsed {
            margin-right: 0;
        }
        
        /* بەشەکانی ناوەڕاست */
        .content-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .content-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* کارتەکانی داشبۆرد */
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--dark);
            position: relative;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: white;
        }
        
        .card-1 .card-icon { background-color: var(--primary); }
        .card-2 .card-icon { background-color: var(--success); }
        .card-3 .card-icon { background-color: var(--warning); }
        .card-4 .card-icon { background-color: var(--danger); }
        .card-5 .card-icon { background-color: var(--secondary); }
        .card-6 .card-icon { background-color: var(--info); }
        .card-7 .card-icon { background-color: #9d4edd; }
        .card-8 .card-icon { background-color: #e74c3c; }
        
        .card h3 {
            font-size: 1.1rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .card-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .card-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        
        .card-change.positive {
            color: #28a745;
        }
        
        .card-change.negative {
            color: var(--danger);
        }
        
        /* رەنگەکانی بڕی پارە بەپێی جۆری قەرز */
        .item-value.debt-positive {
            color: #f72585; /* سۆر - کاتێ کەس قەرزداری منە */
            font-weight: 600;
        }
        
        .item-value.debt-negative {
            color: #212529; /* رەش - کاتێ من قەرزداری شەریکم */
            font-weight: 600;
        }
        
        .item-value.debt-zero {
            color: #6c757d; /* خۆڵەمێشی - بێ قەرز */
            font-weight: 600;
        }
        
        .item-value.debt-payment {
            color: #28a745; /* سەوز - پارەواسڵکردن */
            font-weight: 600;
        }
        
        .item-value.debt-expense {
            color: #f8961e; /* پرتەقاڵی - سەرفکردن */
            font-weight: 600;
        }
        
        .item-value.expiry-warning {
            color: #e74c3c; /* سۆری تۆخ - بەسەرچوون */
            font-weight: 600;
        }
        
        .item-value.expiry-near {
            color: #f39c12; /* پرتەقاڵی - نزیک بەسەرچوون */
            font-weight: 600;
        }
        
        /* لیستەکان */
        .lists-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .list-box {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .list-header h3 {
            font-size: 1.3rem;
            color: var(--dark);
        }
        
        .list-actions button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            margin-left: 10px;
        }
        
        .list-actions button:hover {
            background-color: var(--primary-dark);
        }
        
        .list-items {
            list-style: none;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .list-item {
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .list-item:hover {
            background-color: var(--gray-light);
        }
        
        .item-name {
            font-weight: 500;
            color: var(--dark);
        }
        
        .item-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        /* بەشی فرۆشتن و کڕین (نوێکراوە) */
        .sale-purchase-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            font-weight: 500;
            position: relative;
        }
        
        .tab-btn.active {
            color: var(--primary);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .search-container {
            margin-bottom: 25px;
        }
        
        .search-box {
            position: relative;
            max-width: 500px;
        }
        
        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            right: 0;
            left: 0;
            background-color: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 10;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid var(--gray-light);
        }
        
        .suggestion-item:hover {
            background-color: var(--gray-light);
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .cart-container {
            background-color: var(--gray-light);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .cart-items {
            list-style: none;
            max-height: 250px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: white;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        
        .cart-item-info {
            display: flex;
            align-items: center;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            background-color: var(--primary);
            margin-left: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        /* ستایلی نوێ بۆ سەبەتەی فرۆشتن */
        .cart-items-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            padding: 10px;
            background-color: white;
        }
        
        .btn-quantity {
            border: none;
            background: none;
            padding: 5px 10px;
            cursor: pointer;
            color: var(--primary);
            font-weight: bold;
        }
        
        .btn-quantity:hover {
            color: var(--primary-dark);
        }
        
        .payment-options {
            display: flex;
            margin-top: 20px;
            gap: 15px;
        }
        
        .payment-option {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-option.selected {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn i {
            margin-left: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #3ab8e0;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #e11575;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #e68905;
        }
        
        /* بەشی مخزن */
        .inventory-tabs {
            display: flex;
            margin-bottom: 30px;
        }
        
        .inventory-tab {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            font-weight: 500;
            position: relative;
        }
        
        .inventory-tab.active {
            color: var(--primary);
        }
        
        .inventory-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .inventory-content {
            display: none;
        }
        
        .inventory-content.active {
            display: block;
        }
        
        .item-form {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        /* بەشی پارەواسڵکردن */
        .payment-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        /* مۆدالی پرێنت */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .invoice {
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        .invoice-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 20px;
        }
        
        .invoice-logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .invoice-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .invoice-table th, .invoice-table td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .invoice-table th {
            background-color: var(--gray-light);
            font-weight: 600;
        }
        
        .invoice-total {
            text-align: left;
            margin-top: 30px;
            font-size: 1.2rem;
        }
        
        .print-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        /* ئاگاداری (نوێ) */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 2000;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .notification.success {
            background-color: #28a745;
            color: white;
        }
        
        .notification.error {
            background-color: #dc3545;
            color: white;
        }
        
        .notification.info {
            background-color: #17a2b8;
            color: white;
        }
        
        .notification.warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        /* وەڵامی مۆبایل */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-250px);
                box-shadow: none;
            }
            
            .sidebar.active {
                transform: translateX(0);
                box-shadow: 3px 0 15px rgba(0,0,0,0.1);
            }
            
            .header {
                left: 0;
            }
            
            .main-content {
                margin-right: 0;
            }
            
            .close-sidebar {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .lists-container {
                grid-template-columns: 1fr;
            }
            
            .payment-options {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
        
        /* بۆستەی بچووک بۆ بەکارهێنان لە لیستەکان */
        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        /* ستایل بۆ وێنە پیشبینین */
        .image-preview-container {
            width: 150px;
            height: 150px;
            border: 2px dashed var(--gray-light);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-top: 10px;
            background-color: var(--light);
        }
        
        .image-preview-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ستایل بۆ وێنەی کاڵا لە لیست */
        .product-image-small {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            object-fit: cover;
            margin-left: 10px;
        }
        
        /* ستایل بۆ وێنەی کاڵا لە سەبەتە */
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
        }
        
        /* بەشی مێژووی فرۆشتن */
        .history-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
        }
        
        .history-search {
            margin-bottom: 20px;
        }
        
        .history-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        /* ستایل بۆ کاڵای بەسەرچوون */
        .expiry-badge {
            background-color: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 5px;
        }
        
        .near-expiry-badge {
            background-color: #f39c12;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <!-- پەڕەی چوونەژوورەوە -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="logo">الکترۆنیات</div>
                <h2>سیستەمی فرۆشتی ئەلکترۆنیات</h2>
                <p>تکایە ناوی بەکارهێنەر و وشەی نهێنی داخڵ بکە</p>
            </div>
            
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <label for="username"><i class="fas fa-user"></i> ناوی بەکارهێنەر</label>
                    <input type="text" id="username" placeholder="ناوی بەکارهێنەر" value="farzad">
                </div>
                
                <div class="input-group">
                    <label for="password"><i class="fas fa-lock"></i> وشەی نهێنی</label>
                    <input type="password" id="password" placeholder="وشەی نهێنی" value="farzad1234">
                </div>
                
                <div class="input-group remember">
                    <input type="checkbox" id="remember" checked>
                    <label for="remember">لەبیرم مەکە</label>
                </div>
                
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> چوونەژوورەوە
                </button>
                
                <div class="login-footer">
                    <p>وشەی نهێنیت لەبیرچووە؟ <a href="#">کلیک لێرە بکە</a></p>
                </div>
            </form>
            
            <div class="login-animation">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>
        </div>
    </div>

    <!-- پەڕەی سەرەکی سیستم -->
    <div id="mainPage" class="container">
        <!-- بارەگەی لای چەپ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>مێنیو</h3>
                <button class="close-sidebar" id="closeSidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        داشبۆرد
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="salesPurchases">
                        <i class="fas fa-exchange-alt"></i>
                        فرۆشتن و کڕینەکان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="cashSettlement">
                        <i class="fas fa-hand-holding-usd"></i>
                        واسڵکردنی پارە
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="inventory">
                        <i class="fas fa-warehouse"></i>
                        مخزن
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="partnerExpense">
                        <i class="fas fa-hand-holding-usd"></i>
                        سەرف و حیسابی شەریکەکان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="history">
                        <i class="fas fa-history"></i>
                        مێژوو
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="customers">
                        <i class="fas fa-users"></i>
                        کەسەکان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="partners">
                        <i class="fas fa-handshake"></i>
                        شەریکەکان
                    </a>
                </li>
                <!-- بەشە نوێیەکان -->
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="settings">
                        <i class="fas fa-cogs"></i>
                        رێکخستن
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="employees">
                        <i class="fas fa-users"></i>
                        کارمەندان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="lossProfit">
                        <i class="fas fa-chart-line"></i>
                        بەسەرچوون و تێکچوون
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="reconciliation">
                        <i class="fas fa-balance-scale"></i>
                        متابق کردنەوە
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="management">
                        <i class="fas fa-user-tie"></i>
                        بەرێوبەرایەتی
                    </a>
                </li>
            </ul>
        </aside>

        <!-- بەشی سەرەوە -->
        <header class="header" id="header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">الکترۆنیات</div>
            </div>
            
            <div class="header-center">
                <h1>سیستەمی فرۆشتی ئەلکترۆنیات</h1>
            </div>
            
            <div class="header-right">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="currentUser">فەرزاد</span>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> چوونەدەرەوە
                </button>
            </div>
        </header>

        <!-- بەشی ناوەڕاست -->
        <main class="main-content" id="mainContent">
            <!-- داشبۆرد -->
            <section id="dashboardSection" class="content-section active">
                <h2 class="section-title">داشبۆرد</h2>
                
                <div class="dashboard-cards">
                    <div class="card card-1">
                        <div class="card-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h3>کۆی پارەی واسڵ کراو</h3>
                        <div class="card-value" id="cashBalanceDisplay">٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i> ٠٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-2">
                        <div class="card-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>کۆی کڕین</h3>
                        <div class="card-value" id="totalPurchaseDisplay">٠ <span>دینار</span></div>
                        <div class="card-change negative">
                            <i class="fas fa-arrow-down"></i> ٠٪ کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-3">
                        <div class="card-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h3>جیاوازی کڕین و واسڵ کراو</h3>
                        <div class="card-value" id="differenceDisplay">٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i> ٠٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-4">
                        <div class="card-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3>کۆی کاڵای کەم بوو</h3>
                        <div class="card-value" id="lowStockCount">٠ <span>جۆر</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-down"></i> ٠ جۆر کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-5">
                        <div class="card-icon">
                            <i class="fas fa-user-ow"></i>
                        </div>
                        <h3>کۆی پارەی قەرزداران</h3>
                        <div class="card-value" id="totalDebtDisplay">٠ <span>دینار</span></div>
                        <div class="card-change negative">
                            <i class="fas fa-arrow-up"></i> ٠٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-6">
                        <div class="card-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3>قەرزدارم بە شەریکەکان</h3>
                        <div class="card-value" id="partnerDebtDisplay">٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-down"></i> ٠٪ کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-7">
                        <div class="card-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h3>کۆی سەرفکردن (ئەم مانگە)</h3>
                        <div class="card-value" id="monthlyExpenseTotal">٠ <span>دینار</span></div>
                        <div class="card-change" id="expenseChange">
                            <i class="fas fa-minus"></i> ٠٪ جیاوازی لە مانگی ڕابردوو
                        </div>
                    </div>
                    
                    <!-- کارتی نوێ بۆ کاڵای بەسەرچوون -->
                    <div class="card card-8">
                        <div class="card-icon">
                            <i class="fas fa-calendar-times"></i>
                        </div>
                        <h3>کاڵای بەسەرچوون</h3>
                        <div class="card-value" id="expiredCount">٠ <span>جۆر</span></div>
                        <div class="card-change negative">
                            <i class="fas fa-exclamation-circle"></i> هەوڵی فرۆشتنی زوو بدە
                        </div>
                    </div>
                </div>
                
                <div class="lists-container">
                    <div class="list-box">
                        <div class="list-header">
                            <h3>کاڵای کەم بووەکان</h3>
                            <div class="list-actions">
                                <button id="refreshLowStock">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="lowStockList">
                            <!-- داتاکان لە JavaScript دا زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <div class="list-box">
                        <div class="list-header">
                            <h3>قەرزدارانی ئەم هەفتەیە</h3>
                            <div class="list-actions">
                                <button id="refreshDebtors">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="debtorsList">
                            <!-- داتاکان لە JavaScript دا زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <!-- لیستی نوێ بۆ کاڵای بەسەرچوون -->
                    <div class="list-box">
                        <div class="list-header">
                            <h3>کاڵای بەسەرچوون</h3>
                            <div class="list-actions">
                                <button id="refreshExpired">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="expiredList">
                            <!-- کاڵای بەسەرچوون لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- بەشی فرۆشتن و کڕینەکان (نوێکراوە بە تەواوی) -->
            <section id="salesPurchasesSection" class="content-section">
                <h2 class="section-title">فرۆشتن و کڕینەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="newSale">فرۆشتن</button>
                        <button class="tab-btn" data-tab="newPurchase">کڕین</button>
                        <button class="tab-btn" data-tab="saleHistory">مێژووی فرۆشتن</button>
                        <button class="tab-btn" data-tab="purchaseHistory">مێژووی کڕین</button>
                    </div>
                    
                    <!-- بەشی فرۆشتن (نوێکراوە) -->
                    <div class="tab-content active" id="newSale">
                        <div class="cart-container" id="saleCartContainer">
                            <!-- سەبەتەی فرۆشتن لێرە بە JavaScript دروست دەکرێت -->
                        </div>
                    </div>
                    
                    <!-- بەشی کڕین -->
                    <div class="tab-content" id="newPurchase">
                        <div class="cart-container" id="purchaseCartContainer">
                            <!-- سەبەتەی کڕین لێرە بە JavaScript دروست دەکرێت -->
                        </div>
                    </div>
                    
                    <!-- بەشی مێژووی فرۆشتن (نوێکراوە) -->
                    <div class="tab-content" id="saleHistory">
                        <div class="history-container">
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="saleHistorySearch" placeholder="گەڕان بە کۆدی فاکتوورە یان ناوی کەس...">
                                    <i class="fas fa-search"></i>
                                </div>
                            </div>
                            
                            <div class="list-box">
                                <div class="list-header">
                                    <h3>مێژووی فرۆشتن</h3>
                                    <div class="list-actions">
                                        <button id="refreshSaleHistory">نوێکردنەوە</button>
                                    </div>
                                </div>
                                <div class="history-list">
                                    <ul class="list-items" id="saleHistoryList">
                                        <!-- مێژووی فرۆشتن لێرە زیاد دەکرێن -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی مێژووی کڕین -->
                    <div class="tab-content" id="purchaseHistory">
                        <div class="history-container" id="purchaseHistoryContainer">
                            <!-- مێژووی کڕین لێرە بە JavaScript دروست دەکرێت -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی واسڵکردنی پارە (نوێکراوە بە تەواوی) -->
            <section id="cashSettlementSection" class="content-section">
                <h2 class="section-title">واسڵکردنی پارە</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="settlementToCustomer">پارەواسڵکردن بۆ کەس</button>
                        <button class="tab-btn" data-tab="settlementToPartner">پارەواسڵکردن بۆ شەریک</button>
                        <button class="tab-btn" data-tab="settlementHistory">مێژووی پارەواسڵکردن</button>
                        <button class="tab-btn" data-tab="expenseToOther">سەرفکردن بۆ هۆکی تر</button>
                    </div>
                    
                    <!-- بەشی ١: پارەواسڵکردن بۆ کەس -->
                    <div class="tab-content active" id="settlementToCustomer">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">پارەواسڵکردن بۆ کەس</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="settlementCustomerSearch" placeholder="گەڕان بەدوای ناوی کەس...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="settlementCustomerSuggestions"></div>
                                </div>
                            </div>
                            
                            <div id="selectedSettlementCustomerInfo" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری کەس</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی کەس:</strong> <span id="selectedSettlementCustomerName"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedSettlementCustomerPhone"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> <span id="selectedSettlementCustomerDebt" class="debt-positive">٠ دینار</span></p>
                                        <p><strong>ڕێنمایی:</strong> قەرزی مثبوت واتە کەسەکە قەرزداری تۆیە</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="settlementToCustomerAmount">بڕی پارەواسڵکردن</label>
                                    <input type="number" id="settlementToCustomerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementToCustomerDate">بەرواری پارەواسڵکردن</label>
                                    <input type="date" id="settlementToCustomerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementToCustomerMethod">شێوازی پارەدان</label>
                                    <select id="settlementToCustomerMethod">
                                        <option value="cash">نەقدی</option>
                                        <option value="transfer">گوازینەوە</option>
                                        <option value="check">چەک</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="settlementToCustomerNotes">تێبینی (ئارەزوومەندانە)</label>
                                    <input type="text" id="settlementToCustomerNotes" placeholder="تێبینی">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementInvoiceCode">کۆدی فاکتوورە (ئارەزوومەندانە)</label>
                                    <input type="text" id="settlementInvoiceCode" placeholder="کۆدی فاکتوورە">
                                </div>
                            </div>
                            
                            <div id="settlementCalculation" style="display: none; margin-top: 20px; padding: 15px; background-color: var(--gray-light); border-radius: var(--border-radius);">
                                <h4>هەژماری پارەواسڵکردن:</h4>
                                <p><strong>قەرزی پێشوو:</strong> <span id="oldDebtDisplay">٠ دینار</span></p>
                                <p><strong>بڕی پارەواسڵکردن:</strong> <span id="paymentAmountDisplay">٠ دینار</span></p>
                                <p><strong>قەرزی نوێ:</strong> <span id="newDebtDisplay">٠ دینار</span></p>
                                <p><strong>بارودۆخ:</strong> <span id="debtStatus">-</span></p>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitSettlementToCustomerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی پارەواسڵکردن
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٢: پارەواسڵکردن بۆ شەریک -->
                    <div class="tab-content" id="settlementToPartner">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">پارەواسڵکردن بۆ شەریک</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="settlementPartnerSearch" placeholder="گەڕان بەدوای ناوی شەریک...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="settlementPartnerSuggestions"></div>
                                </div>
                            </div>
                            
                            <div id="selectedSettlementPartnerInfo" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری شەریک</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی شەریک:</strong> <span id="selectedSettlementPartnerName"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedSettlementPartnerPhone"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> 
                                            <span id="selectedSettlementPartnerDebt" class="debt-negative">٠ دینار</span>
                                        </p>
                                        <p><strong>ڕێنمایی:</strong> قەرزی منفی واتە تۆ قەرزداری شەریکەکەیت</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="settlementToPartnerAmount">بڕی پارەواسڵکردن</label>
                                    <input type="number" id="settlementToPartnerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementToPartnerDate">بەرواری پارەواسڵکردن</label>
                                    <input type="date" id="settlementToPartnerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementToPartnerMethod">شێوازی پارەدان</label>
                                    <select id="settlementToPartnerMethod">
                                        <option value="cash">نەقدی</option>
                                        <option value="transfer">گوازینەوە</option>
                                        <option value="check">چەک</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="settlementToPartnerNotes">تێبینی (ئارەزوومەندانە)</label>
                                    <input type="text" id="settlementToPartnerNotes" placeholder="تێبینی">
                                </div>
                                
                                <div class="form-group">
                                    <label for="settlementPartnerInvoiceCode">کۆدی فاکتوورە (ئارەزوومەندانە)</label>
                                    <input type="text" id="settlementPartnerInvoiceCode" placeholder="کۆدی فاکتوورە">
                                </div>
                            </div>
                            
                            <div id="settlementPartnerCalculation" style="display: none; margin-top: 20px; padding: 15px; background-color: var(--gray-light); border-radius: var(--border-radius);">
                                <h4>هەژماری پارەواسڵکردن:</h4>
                                <p><strong>قەرزی پێشوو:</strong> <span id="oldPartnerDebtDisplay">٠ دینار</span></p>
                                <p><strong>بڕی پارەواسڵکردن:</strong> <span id="partnerPaymentAmountDisplay">٠ دینار</span></p>
                                <p><strong>قەرزی نوێ:</strong> <span id="newPartnerDebtDisplay">٠ دینار</span></p>
                                <p><strong>بارودۆخ:</strong> <span id="partnerDebtStatus">-</span></p>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitSettlementToPartnerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی پارەواسڵکردن
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٣: مێژووی پارەواسڵکردن -->
                    <div class="tab-content" id="settlementHistory">
                        <div class="history-container">
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="settlementHistorySearch" placeholder="گەڕان بە ناو، کۆدی فاکتوورە، بەروار...">
                                    <i class="fas fa-search"></i>
                                </div>
                            </div>
                            
                            <div class="list-box">
                                <div class="list-header">
                                    <h3>مێژووی پارەواسڵکردن</h3>
                                    <div class="list-actions">
                                        <button id="refreshSettlementHistory">نوێکردنەوە</button>
                                        <button id="printSettlementHistoryBtn" class="btn btn-warning">
                                            <i class="fas fa-print"></i> پرێنتکردنی مێژوو
                                        </button>
                                    </div>
                                </div>
                                <div class="history-list">
                                    <ul class="list-items" id="settlementHistoryList">
                                        <!-- مێژووی پارەواسڵکردن لێرە زیاد دەکرێن -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٤: سەرفکردن بۆ هۆکی تر -->
                    <div class="tab-content" id="expenseToOther">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ هۆکی تر</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="otherExpenseAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="otherExpenseDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseCategory">پۆلی سەرفکردن</label>
                                    <select id="otherExpenseCategory">
                                        <option value="rent">کرێ</option>
                                        <option value="salary">مووچە</option>
                                        <option value="utility">کەرەستە</option>
                                        <option value="transport">گواستنەوە</option>
                                        <option value="maintenance">چاکسازی</option>
                                        <option value="marketing">بازرگانی</option>
                                        <option value="office">ئۆفیس</option>
                                        <option value="other">هی تر</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDescription">پێناسە (هۆکاری سەرفکردن)</label>
                                    <input type="text" id="otherExpenseDescription" placeholder="پێناسەی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseMethod">شێوازی پارەدان</label>
                                    <select id="otherExpenseMethod">
                                        <option value="cash">نەقدی</option>
                                        <option value="transfer">گوازینەوە</option>
                                        <option value="check">چەک</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseRecipient">وەرگر (ئارەزوومەندانە)</label>
                                    <input type="text" id="otherExpenseRecipient" placeholder="ناوی وەرگر">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitOtherExpenseBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی مخزن -->
            <section id="inventorySection" class="content-section">
                <h2 class="section-title">مخزن</h2>
                
                <div class="inventory-tabs">
                    <button class="inventory-tab active" data-inventory-tab="products">کاڵاکان</button>
                </div>
                
                <div class="inventory-content active" id="productsTab">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="inventorySearch" placeholder="گەڕان بەدوای ناوی کاڵا...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
                    <div class="list-box" style="margin-bottom: 30px;">
                        <div class="list-header">
                            <h3>لیستی کاڵاکان</h3>
                            <div class="list-actions">
                                <button id="addProductBtn">زیادکردنی کاڵا</button>
                            </div>
                        </div>
                        <ul class="list-items" id="productList">
                            <!-- لیستی کاڵاکان لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <div class="item-form" id="productForm" style="display: none;">
                        <h3 style="margin-bottom: 20px;">زیادکردن/گۆڕانکاری کاڵا</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">ناوی کاڵا</label>
                                <input type="text" id="productName" placeholder="ناوی کاڵا">
                            </div>
                            
                            <div class="form-group">
                                <label for="productBarcode">بارکۆد (ئارەزوومەندانە)</label>
                                <input type="text" id="productBarcode" placeholder="بارکۆد">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="purchasePrice">نرخی کڕین</label>
                                <input type="number" id="purchasePrice" placeholder="نرخی کڕین">
                            </div>
                            
                            <div class="form-group">
                                <label for="salePrice">نرخی فرۆشتن</label>
                                <input type="number" id="salePrice" placeholder="نرخی فرۆشتن">
                            </div>
                            
                            <div class="form-group">
                                <label for="stockQuantity">بڕی کاڵا</label>
                                <input type="number" id="stockQuantity" placeholder="بڕی کاڵا">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="primaryUnit">یەکەی سەرەکی</label>
                                <select id="primaryUnit">
                                    <option value="piece">پارچە</option>
                                    <option value="carton">کارتۆن</option>
                                    <option value="unit">دانە</option>
                                    <option value="meter">مەتر</option>
                                    <option value="kg">کیلۆ</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="secondaryUnit">یەکەی دووەم (ئارەزوومەندانە)</label>
                                <select id="secondaryUnit">
                                    <option value="">هیچ</option>
                                    <option value="piece">پارچە</option>
                                    <option value="carton">کارتۆن</option>
                                    <option value="unit">دانە</option>
                                    <option value="meter">مەتر</option>
                                    <option value="kg">کیلۆ</option>
                                    <option value="box">بۆکس</option>
                                    <option value="pack">پاکەت</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="secondaryUnitQuantity">بڕ لە یەکەی دووەم (ئەگەر هەیە)</label>
                                <input type="number" id="secondaryUnitQuantity" placeholder="بڕ لە یەکەی دووەم">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="secondaryUnitPrice">نرخی یەکەی دووەم (ئارەزوومەندانە)</label>
                                <input type="number" id="secondaryUnitPrice" placeholder="نرخی یەکەی دووەم">
                                <small style="color: var(--gray); font-size: 0.8rem;">ئەگەر بەتاڵ بێت، سیستم خۆکارانە دەیەژمێرێت</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="expiryDate">بەرواری بەسەرچوون (ئارەزوومەندانە)</label>
                                <input type="date" id="expiryDate">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productImage">وێنەی کاڵا (ئارەزوومەندانە)</label>
                                <input type="file" id="productImage" accept="image/*" style="padding: 8px;">
                                <small style="color: var(--gray);">رێگەپێدراو: JPG, PNG, GIF</small>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>پێشبینینی وێنە</label>
                            <div id="imagePreview" class="image-preview-container">
                                <p style="color: var(--gray); font-size: 0.9rem;">هیچ وێنەیەک نییە</p>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-danger" id="cancelProductBtn">پاشگەزبوونەوە</button>
                            <button class="btn btn-success" id="saveProductBtn">هەڵگرتن</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی سەرف و حیسابی شەریکەکان -->
            <section id="partnerExpenseSection" class="content-section">
                <h2 class="section-title">سەرف و حیسابی شەریکەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="expenseToPartner">سەرف بۆ شەریک</button>
                        <button class="tab-btn" data-tab="expenseToCustomer">سەرف بۆ کەس</button>
                        <button class="tab-btn" data-tab="expenseOther">سەرف بۆ هۆکی تر</button>
                    </div>
                    
                    <!-- بەشی ١: سەرف بۆ شەریک -->
                    <div class="tab-content active" id="expenseToPartner">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ شەریک</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="expensePartnerSearchMain" placeholder="گەڕان بەدوای ناوی شەریک...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="expensePartnerSuggestionsMain"></div>
                                </div>
                            </div>
                            
                            <div id="selectedPartnerInfoMain" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری شەریک</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی شەریک:</strong> <span id="selectedPartnerNameMain"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedPartnerPhoneMain"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> <span id="selectedPartnerDebtMain"></span> دینار</p>
                                        <p><strong>کۆی پارەی واسڵکراو:</strong> <span id="selectedPartnerPaidMain"></span> دینار</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="expenseToPartnerAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="expenseToPartnerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToPartnerDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="expenseToPartnerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToPartnerReason">هۆکاری سەرفکردن (ئارەزوومەندانە)</label>
                                    <input type="text" id="expenseToPartnerReason" placeholder="هۆکی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitExpenseToPartnerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن بۆ شەریک
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٢: سەرف بۆ کەس -->
                    <div class="tab-content" id="expenseToCustomer">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ کەس</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="expenseCustomerSearchMain" placeholder="گەڕان بەدوای ناوی کەس...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="expenseCustomerSuggestionsMain"></div>
                                </div>
                            </div>
                            
                            <div id="selectedCustomerInfoMain" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری کەس</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی کەس:</strong> <span id="selectedCustomerNameMain"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedCustomerPhoneMain"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> <span id="selectedCustomerDebtMain"></span> دینار</p>
                                        <p><strong>کۆی پارەی واسڵکراو:</strong> <span id="selectedCustomerPaidMain"></span> دینار</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="expenseToCustomerAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="expenseToCustomerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToCustomerDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="expenseToCustomerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToCustomerReason">هۆکاری سەرفکردن (ئارەزوومەندانە)</label>
                                    <input type="text" id="expenseToCustomerReason" placeholder="هۆکی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitExpenseToCustomerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن بۆ کەس
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٣: سەرف بۆ هۆکی تر -->
                    <div class="tab-content" id="expenseOther">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ هۆکی تر</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="otherExpenseAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="otherExpenseDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseCategory">پۆلی سەرفکردن</label>
                                    <select id="otherExpenseCategory">
                                        <option value="rent">کرێ</option>
                                        <option value="salary">مووچە</option>
                                        <option value="utility">کەرەستە</option>
                                        <option value="transport">گواستنەوە</option>
                                        <option value="maintenance">چاکسازی</option>
                                        <option value="marketing">بازرگانی</option>
                                        <option value="office">ئۆفیس</option>
                                        <option value="other">هی تر</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDescription">پێناسە (هۆکاری سەرفکردن)</label>
                                    <input type="text" id="otherExpenseDescription" placeholder="پێناسەی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitOtherExpenseBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- لیستی مێژووی سەرفکردن -->
                <div class="list-box" style="margin-top: 40px;">
                    <div class="list-header">
                        <h3>مێژووی سەرفکردن</h3>
                        <div class="list-actions">
                            <button id="refreshExpenseHistoryMain">نوێکردنەوە</button>
                        </div>
                    </div>
                    <ul class="list-items" id="expenseHistoryMainList">
                        <!-- مێژووی سەرفکردن لێرە زیاد دەکرێن -->
                    </ul>
                </div>
            </section>

            <!-- بەشی مێژوو -->
            <section id="historySection" class="content-section">
                <h2 class="section-title">مێژوو</h2>
                <p style="text-align: center; padding: 40px; color: var(--gray);">
                    بەشی مێژوو لێرە دەبێت کە مێژووی هەموو فرۆشتن و کڕین و پارەواسڵکردنەکان تێدا بێت.
                </p>
            </section>
            
            <!-- بەشی کەسەکان -->
            <section id="customersSection" class="content-section">
                <h2 class="section-title">کەسەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="customersList">لیستی کەسەکان</button>
                        <button class="tab-btn" data-tab="addCustomer">زیادکردنی کەس</button>
                    </div>
                    
                    <div class="tab-content active" id="customersList">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="customerSearchMain" placeholder="گەڕان بەدوای ناوی کەس...">
                                <i class="fas fa-search"></i>
                                <div class="suggestions" id="customerSearchSuggestions"></div>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>لیستی کەسەکان</h3>
                                <div class="list-actions">
                                    <button id="refreshCustomers">نوێکردنەوە</button>
                                    <button id="addCustomerBtn">زیادکردنی کەس</button>
                                </div>
                            </div>
                            <ul class="list-items" id="customersMainList">
                                <!-- لیستی کەسەکان لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="addCustomer">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">زیادکردنی کەسی نوێ</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="newCustomerName">ناوی کەس</label>
                                    <input type="text" id="newCustomerName" placeholder="ناوی کەس">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newCustomerPhone">ژمارەی موبایل</label>
                                    <input type="text" id="newCustomerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newCustomerAddress">ناونیشان (ئارەزوومەندانە)</label>
                                    <input type="text" id="newCustomerAddress" placeholder="ناونیشان">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" id="cancelCustomerBtn">پاشگەزبوونەوە</button>
                                <button class="btn btn-success" id="saveCustomerBtn">هەڵگرتن</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- بەشی شەریکەکان -->
            <section id="partnersSection" class="content-section">
                <h2 class="section-title">شەریکەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="partnersList">لیستی شەریکەکان</button>
                        <button class="tab-btn" data-tab="addPartner">زیادکردنی شەریک</button>
                    </div>
                    
                    <div class="tab-content active" id="partnersList">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="partnerSearch" placeholder="گەڕان بەدوای ناوی شەریک...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>لیستی شەریکەکان</h3>
                                <div class="list-actions">
                                    <button id="refreshPartners">نوێکردنەوە</button>
                                    <button id="addPartnerBtn">زیادکردنی شەریک</button>
                                </div>
                            </div>
                            <ul class="list-items" id="partnersListItems">
                                <!-- لیستی شەریکەکان لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="addPartner">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">زیادکردنی شەریکی نوێ</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="newPartnerName">ناوی شەریک</label>
                                    <input type="text" id="newPartnerName" placeholder="ناوی شەریک">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPartnerPhone">ژمارەی موبایل</label>
                                    <input type="text" id="newPartnerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPartnerAddress">ناونیشان (ئارەزوومەندانە)</label>
                                    <input type="text" id="newPartnerAddress" placeholder="ناونیشان">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" id="cancelPartnerBtn">پاشگەزبوونەوە</button>
                                <button class="btn btn-success" id="savePartnerBtn">هەڵگرتن</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی رێکخستن -->
            <section id="settingsSection" class="content-section">
                <h2 class="section-title">رێکخستن</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="systemSettings">گۆڕانکاری لە زانیاری سیستەم</button>
                        <button class="tab-btn" data-tab="styleSettings">ستایلی سیستەم</button>
                        <button class="tab-btn" data-tab="securitySettings">سکویرتی و پاراستن</button>
                    </div>
                    
                    <!-- بەشی ١: گۆڕانکاری لە زانیاری سیستەم -->
                    <div class="tab-content active" id="systemSettings">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-info-circle fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">گۆڕانکاری لە زانیاری سیستەم</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا زانیاری بنچینەیی سیستەم وەک ناو، ناونیشان، ژمارەی پەیوەندی، و زانیاری تر دەستکاری دەکرێن.</p>
                        </div>
                    </div>
                    
                    <!-- بەشی ٢: ستایلی سیستەم -->
                    <div class="tab-content" id="styleSettings">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-palette fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">ستایلی سیستەم</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا ستایل و رەنگەکانی سیستەم وەک تێم، فۆنت، و درێژایی پەڕەکان دەستکاری دەکرێن.</p>
                        </div>
                    </div>
                    
                    <!-- بەشی ٣: سکویرتی و پاراستن -->
                    <div class="tab-content" id="securitySettings">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-shield-alt fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">سکویرتی و پاراستن</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا رێکخستنەکانی پاراستنی سیستم وەک وشەی نهێنی، هەژمارەکان، و ئاستی چوونەژوورەوە بەڕێوەدەبرێن.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی کارمەندان -->
            <section id="employeesSection" class="content-section">
                <h2 class="section-title">کارمەندان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="employeeInfo">ناوی کارمەند و زانیاری</button>
                        <button class="tab-btn" data-tab="employeeSalaries">داهاتی کارمەندەکان</button>
                        <button class="tab-btn" data-tab="employeeDailyLeaves">مۆڵەتی رۆژانەی کارمەندەکان</button>
                        <button class="tab-btn" data-tab="employeeLeave">مۆڵەتی کارمەند</button>
                    </div>
                    
                    <!-- بەشی ١: ناوی کارمەند و زانیاری -->
                    <div class="tab-content active" id="employeeInfo">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-user-tie fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">ناوی کارمەند و زانیاری</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا زانیاری کارمەندەکان وەک ناو، ناونیشان، ژمارەی پەیوەندی، و زانیاری تر بەڕێوەدەبرێن.</p>
                        </div>
                    </div>
                    
                    <!-- بەشی ٢: داهاتی کارمەندەکان -->
                    <div class="tab-content" id="employeeSalaries">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-money-bill-wave fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">داهاتی کارمەندەکان</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا داهات و مووچەی کارمەندەکان و پارەدانەکان بەڕێوەدەبرێن.</p>
                        </div>
                    </div>
                    
                    <!-- بەشی ٣: مۆڵەتی رۆژانەی کارمەندەکان -->
                    <div class="tab-content" id="employeeDailyLeaves">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-calendar-day fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">مۆڵەتی رۆژانەی کارمەندەکان</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا مۆڵەتی رۆژانەی کارمەندەکان و ئەنجامەکانی بەڕێوەدەبرێن.</p>
                        </div>
                    </div>
                    
                    <!-- بەشی ٤: مۆڵەتی کارمەند -->
                    <div class="tab-content" id="employeeLeave">
                        <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                            <i class="fas fa-calendar-alt fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                            <h3 style="margin-bottom: 15px;">مۆڵەتی کارمەند</h3>
                            <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                            <p>لێرەدا مۆڵەتی کارمەندەکان و کاتی نەهاتنیان بەڕێوەدەبرێن.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی بەسەرچوون و تێکچوون -->
            <section id="lossProfitSection" class="content-section">
                <h2 class="section-title">بەسەرچوون و تێکچوون</h2>
                <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                    <i class="fas fa-chart-line fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 15px;">بەشی بەسەرچوون و تێکچوون</h3>
                    <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                    <p>لێرەدا هەژماری بەسەرچوون و تێکچوونەکان پیشان دەدرێت.</p>
                </div>
            </section>

            <!-- بەشی متابق کردنەوە -->
            <section id="reconciliationSection" class="content-section">
                <h2 class="section-title">متابق کردنەوە</h2>
                <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                    <i class="fas fa-balance-scale fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 15px;">بەشی متابق کردنەوە</h3>
                    <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                    <p>لێرەدا هەژمارەکان پێکەوە متابق دەکرێنەوە.</p>
                </div>
            </section>

            <!-- بەشی بەرێوبەرایەتی -->
            <section id="managementSection" class="content-section">
                <h2 class="section-title">بەرێوبەرایەتی</h2>
                <div style="text-align: center; padding: 50px; color: var(--gray); background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow);">
                    <i class="fas fa-user-tie fa-4x" style="color: var(--primary); margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 15px;">بەشی بەرێوبەرایەتی</h3>
                    <p style="margin-bottom: 20px;">ئەم بەشە لە وەشانی داهاتوودا بەردەست دەبێت.</p>
                    <p>لێرەدا بەرێوبەرایەتی گشتی سیستم ئەنجام دەدرێت.</p>
                </div>
            </section>
        </main>
    </div>

    <!-- مۆدالی پرێنت -->
    <div class="modal" id="printModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>پرێنتکردنی فاکتوور</h3>
                <button class="modal-close" id="closePrintModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice">
                    <div class="invoice-header">
                        <div class="invoice-logo">الکترۆنیات</div>
                        <h2>فاکتووری فرۆشتن</h2>
                        <p>کۆدی فاکتوورە: <span id="invoiceCode">INV-2023-001</span></p>
                        <p>بەروار: <span id="invoiceDate">٢٠٢٣/١٢/١٥</span></p>
                    </div>
                    
                    <div class="invoice-details">
                        <div>
                            <h4>زانیاری فرۆشەر:</h4>
                            <p>ناوی سیستەم: الکترۆنیات</p>
                            <p>ژمارەی موبایل: ٠٧٧٠١٢٣٤٥٦٧</p>
                            <p>ناونیشان: هەولێر، کوردستان</p>
                        </div>
                        
                        <div>
                            <h4>زانیاری کڕیار:</h4>
                            <p id="customerName">ناوی کڕیار: عەلی محەممەد</p>
                            <p id="customerPhone">ژمارەی موبایل: ٠٧٧٠٧٦٥٤٣٢١</p>
                            <p id="customerAddress">ناونیشان: نەزانراو</p>
                        </div>
                    </div>
                    
                    <table class="invoice-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ناوی کاڵا</th>
                                <th>یەکە</th>
                                <th>بڕ</th>
                                <th>نرخ</th>
                                <th>کۆی گشتی</th>
                            </tr>
                        </thead>
                        <tbody id="invoiceItems">
                            <!-- کاڵاکانی فاکتوور لێرە زیاد دەکرێن -->
                        </tbody>
                    </table>
                    
                    <div class="invoice-total">
                        <p><strong>کۆی گشتی:</strong> <span id="invoiceTotal">٠ دینار</span></p>
                        <p><strong>قەرزی پێشوو:</strong> <span id="previousDebt">٠ دینار</span></p>
                        <p><strong>قەرزی ئێستا:</strong> <span id="currentDebt">٠ دینار</span></p>
                        <p><strong>کۆی قەرزی دوای فرۆشتن:</strong> <span id="totalDebt">٠ دینار</span></p>
                    </div>
                    
                    <div class="print-options">
                        <button class="btn btn-warning" id="printSmall">
                            <i class="fas fa-print"></i> پرێنتی بچووک
                        </button>
                        <button class="btn btn-primary" id="printA4">
                            <i class="fas fa-print"></i> پرێنتی A4
                        </button>
                        <button class="btn btn-danger" id="closeInvoice">
                            <i class="fas fa-times"></i> داخستن
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی بینینی و بەڕێوەبردنی کەس -->
    <div class="modal" id="customerModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>زانیاری کەس: <span id="modalCustomerName">عەلی محەممەد</span></h3>
                <button class="modal-close" id="closeCustomerModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-customer-tab="info">زانیاری کەس</button>
                    <button class="tab-btn" data-customer-tab="debt">پارەواسڵکردن</button>
                    <button class="tab-btn" data-customer-tab="invoices">فاکتوورەکان</button>
                </div>
                
                <div class="tab-content active" id="customerInfoTab">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editCustomerName">ناوی کەس</label>
                            <input type="text" id="editCustomerName" placeholder="ناوی کەس">
                        </div>
                        
                        <div class="form-group">
                            <label for="editCustomerPhone">ژمارەی موبایل</label>
                            <input type="text" id="editCustomerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                        </div>
                        
                        <div class="form-group">
                            <label for="editCustomerAddress">ناونیشان</label>
                            <input type="text" id="editCustomerAddress" placeholder="ناونیشان">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customerTotalDebt">کۆی قەرز</label>
                            <input type="text" id="customerTotalDebt" readonly style="background-color: var(--gray-light);">
                        </div>
                        
                        <div class="form-group">
                            <label for="customerLastPurchase">کۆتا فرۆشتن</label>
                            <input type="text" id="customerLastPurchase" readonly style="background-color: var(--gray-light);">
                        </div>
                        
                        <div class="form-group">
                            <label for="customerTotalPurchases">کۆی فرۆشتن</label>
                            <input type="text" id="customerTotalPurchases" readonly style="background-color: var(--gray-light);">
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-danger" id="deleteCustomerBtn">
                            <i class="fas fa-trash"></i> سڕینەوەی کەس
                        </button>
                        <button class="btn btn-warning" id="printCustomerInfo" onclick="printCustomerInfo()">
                            <i class="fas fa-print"></i> پرێنتکردنی زانیاری
                        </button>
                        <button class="btn btn-success" id="saveCustomerChanges">
                            <i class="fas fa-save"></i> هەڵگرتنی گۆڕانکاریەکان
                        </button>
                    </div>
                </div>
                
                <div class="tab-content" id="customerDebtTab">
                    <div class="payment-container">
                        <h4 style="margin-bottom: 20px;">پارەواسڵکردن بۆ کەسەکە</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paymentAmount">بڕی پارە</label>
                                <input type="number" id="paymentAmount" placeholder="بڕی پارە بە دینار">
                            </div>
                            
                            <div class="form-group">
                                <label for="paymentDate">بەروار</label>
                                <input type="date" id="paymentDate">
                            </div>
                            
                            <div class="form-group">
                                <label for="paymentMethod">شێوازی پارەدان</label>
                                <select id="paymentMethod">
                                    <option value="cash">نەقدی</option>
                                    <option value="transfer">گوازینەوە</option>
                                    <option value="check">چەک</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="paymentNotes">تێبینی (ئارەزوومەندانە)</label>
                            <input type="text" id="paymentNotes" placeholder="تێبینی">
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-success" id="submitPaymentBtnModal">
                                <i class="fas fa-check-circle"></i> تۆمارکردنی پارەواسڵکردن
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="customerInvoicesTab">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="customerInvoiceSearch" placeholder="گەڕان بە کۆدی فاکتوورە...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
                    <div class="list-box" style="margin-top: 20px;">
                        <div class="list-header">
                            <h3>فاکتوورەکانی کەسەکە</h3>
                            <div class="list-actions">
                                <button id="refreshCustomerInvoices">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="customerInvoicesList">
                            <!-- فاکتوورەکانی کەس لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی بینینی فاکتوور -->
    <div class="modal" id="invoiceDetailModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h3>فاکتوور: <span id="modalInvoiceCode">INV-2023-001</span></h3>
                <button class="modal-close" id="closeInvoiceModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice" id="invoiceDetailContent">
                    <!-- نەخشەی فاکتوور لێرە کۆپی دەکرێت -->
                </div>
                
                <div class="print-options" style="margin-top: 30px;">
                    <button class="btn btn-warning" id="printInvoiceSmallDetail">
                        <i class="fas fa-print"></i> پرێنتی بچووک
                    </button>
                    <button class="btn btn-primary" id="printInvoiceA4Detail">
                        <i class="fas fa-print"></i> پرێنتی A4
                    </button>
                    <button class="btn btn-danger" id="deleteInvoiceBtn">
                        <i class="fas fa-trash"></i> سڕینەوەی فاکتوور
                    </button>
                    <button class="btn btn-info" id="editInvoiceBtn">
                        <i class="fas fa-edit"></i> گۆڕانکاری فاکتوور
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی پرێنتی پارەواسڵکردن -->
    <div class="modal" id="settlementPrintModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>پرێنتکردنی پارەواسڵکردن</h3>
                <button class="modal-close" onclick="document.getElementById('settlementPrintModal').classList.remove('active')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice" id="settlementInvoiceContent">
                    <!-- نەخشەی پارەواسڵکردن لێرە کۆپی دەکرێت -->
                </div>
                
                <div class="print-options" style="margin-top: 30px;">
                    <button class="btn btn-warning" onclick="printSettlementReceipt('small')">
                        <i class="fas fa-print"></i> پرێنتی بچووک
                    </button>
                    <button class="btn btn-primary" onclick="printSettlementReceipt('A4')">
                        <i class="fas fa-print"></i> پرێنتی A4
                    </button>
                    <button class="btn btn-danger" onclick="document.getElementById('settlementPrintModal').classList.remove('active')">
                        <i class="fas fa-times"></i> داخستن
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- هەموو JavaScript لێرە -->
    <script>
        // داتای نموونەیی بۆ سیستمەکە (داتاکان لە سفرەوە دەست پێدەکەن)
        const sampleData = {
            products: [],
            customers: [],
            partners: [],
            sales: [],
            purchases: [],
            cashBalance: 0,
            expenseHistory: [],
            paymentHistory: [],
            settlementHistory: []
        };

        // داتای نموونەیی بۆ مێژووی کڕین
        const samplePurchaseData = {
            purchases: []
        };

        // دۆمینەکان
        let currentUser = null;
        let cart = [];
        let purchaseCart = [];
        let selectedPayment = "cash";
        let selectedCustomer = null;
        let selectedPartner = null;
        let editingProductId = null;
        let barcodeBuffer = '';
        let barcodeTimeout = null;
        let selectedSettlementCustomer = null;
        let selectedSettlementPartner = null;

        // کۆدی چوونەژوورەوە
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // چێکی کردنی ناوی بەکارهێنەر و وشەی نهێنی
            if (username && password) {
                // فەرزاد یان admin دەتوانن بچنە ژوورەوە
                if ((username === 'farzad' && password === 'farzad1234') || 
                    (username === 'admin' && password === 'admin123') ||
                    (username === 'user' && password === 'user123')) {
                    currentUser = username;
                    
                    // نیشاندانی پەڕەی سەرەکی و شاردنەوەی پەڕەی چوونەژوورەوە
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainPage').style.display = 'flex';
                    
                    // زیادکردنی ناوی بەکارهێنەر
                    const userNames = {
                        'farzad': 'فەرزاد',
                        'admin': 'ئەدمین',
                        'user': 'بەکارهێنەر'
                    };
                    document.getElementById('currentUser').textContent = userNames[username] || username;
                    
                    // زیادکردنی داتای نموونەیی سادە بۆ ئەزموونکردن
                    addSampleDataForTesting();
                    
                    // چالاککردنی داشبۆرد وەک یەکەم بەش
                    showSection('dashboard');
                    
                    // چالاککردنی پیشبینینی وێنە
                    setupImagePreview();
                    
                    // دەستپێکردنی سیستەمی بارکۆد
                    initializeBarcodeScanner();
                } else {
                    showNotification('ناوی بەکارهێنەر یان وشەی نهێنی هەڵەە! تکایە دووبارە هەوڵ بدەرەوە.', 'error');
                }
            } else {
                showNotification('تکایە هەردوو خانە پڕ بکەرەوە!', 'error');
            }
        });

        // دەستپێکردنی سیستەمی بارکۆد
        function initializeBarcodeScanner() {
            document.addEventListener('keydown', function(e) {
                // تەنها کەلیلی ئاسایی قبوڵ بکە
                if (e.key.length === 1 && !e.ctrlKey && !e.altKey && !e.metaKey) {
                    barcodeBuffer += e.key;
                    
                    // پاککردنەوەی کاتی
                    if (barcodeTimeout) clearTimeout(barcodeTimeout);
                    
                    barcodeTimeout = setTimeout(function() {
                        if (barcodeBuffer.length >= 6) { // بارکۆدێکی دروست لەسەرەکانی 6 یان زیاتر
                            processBarcode(barcodeBuffer.trim());
                        }
                        barcodeBuffer = '';
                    }, 100); // 100ms چاوەروانی بۆ تەواوبوونی بارکۆد
                }
            });
        }

        // پرۆسەکردنی بارکۆد
        function processBarcode(barcode) {
            const product = sampleData.products.find(p => p.barcode === barcode);
            
            if (product) {
                // پشکنینی بەسەرچوون
                if (product.expiryDate) {
                    const expiry = new Date(product.expiryDate);
                    const now = new Date();
                    const diffTime = expiry - now;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays <= 0) {
                        if (!confirm(`ئەم کاڵایە بەسەرچووە (${product.expiryDate}). دەیەوێت بەردەوام بیت؟`)) {
                            return;
                        }
                    } else if (diffDays <= 7) {
                        showNotification(`ئەم کاڵایە نزیکە لە بەسەرچوون (${diffDays} ڕۆژی ماوە)`, 'warning');
                    }
                }
                
                addProductToCart(product.id, 1, null, null);
                updateCartDisplay();
                
                // نیشاندانی ئاگاداری کورت
                showNotification(`${product.name} زیاد کرا بۆ سەبەتە`, 'success');
            } else {
                showNotification('کاڵایەک بەم بارکۆدە نەدۆزرایەوە', 'error');
            }
        }

        // فەنکشنی زیادکردنی داتای نموونەیی سادە بۆ ئەزموونکردن
        function addSampleDataForTesting() {
            // زیادکردنی کۆی پارەی سەرەتا
            sampleData.cashBalance = 10000000; // 10 ملیۆن دینار
            
            // زیادکردنی کەس و شەریکی نموونەیی
            sampleData.customers = [
                { id: 1, name: "عەلی محەممەد", phone: "07701234567", address: "هەولێر", debt: 50000 },
                { id: 2, name: "حوسێن عەلی", phone: "07707654321", address: "سلێمانی", debt: 25000 },
                { id: 3, name: "کەریم عەبدوڵڵا", phone: "07705556677", address: "دهۆک", debt: 0 }
            ];
            
            sampleData.partners = [
                { id: 1, name: "کۆمپانیای ئەلکترۆنی", phone: "07701112233", address: "بەغدا", debt: -150000 },
                { id: 2, name: "کۆمپانیای کاڵا", phone: "07702223344", address: "هەولێر", debt: 75000 },
                { id: 3, name: "کۆمپانیای فرۆشتن", phone: "07703334455", address: "سلێمانی", debt: 0 }
            ];
            
            // زیادکردنی کاڵای نموونەیی
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(nextMonth.getMonth() + 1);
            const lastMonth = new Date();
            lastMonth.setMonth(lastMonth.getMonth() - 1);
            
            sampleData.products = [
                { 
                    id: 1, 
                    name: "مۆبایل سامسۆنگ A50", 
                    barcode: "BR1001", 
                    purchasePrice: 500000, 
                    salePrice: 600000, 
                    stock: 10, 
                    unit: "piece",
                    hasSecondaryUnit: true,
                    secondaryUnit: "carton",
                    secondaryUnitQuantity: 50,
                    secondaryUnitPrice: 25000, // 50 دانە = 25,000 دینار (کارتۆن)
                    image: null,
                    expiryDate: nextMonth.toISOString().split('T')[0]
                },
                { 
                    id: 2, 
                    name: "تەلەفزیۆن ئێڵ جی 55 ئینچ", 
                    barcode: "BR1002", 
                    purchasePrice: 800000, 
                    salePrice: 950000, 
                    stock: 5, 
                    unit: "piece",
                    hasSecondaryUnit: false,
                    secondaryUnit: null,
                    secondaryUnitQuantity: 0,
                    secondaryUnitPrice: null,
                    image: null,
                    expiryDate: null
                },
                { 
                    id: 3, 
                    name: "سەرعەی بێلایین", 
                    barcode: "BR1003", 
                    purchasePrice: 75000, 
                    salePrice: 90000, 
                    stock: 20, 
                    unit: "piece",
                    hasSecondaryUnit: true,
                    secondaryUnit: "carton",
                    secondaryUnitQuantity: 24,
                    secondaryUnitPrice: 2000, // 24 دانە = 2,000 دینار (کارتۆن)
                    image: null,
                    expiryDate: today.toISOString().split('T')[0] // بەسەرچوو
                },
                { 
                    id: 4, 
                    name: "لاپتۆپ دێل", 
                    barcode: "BR1004", 
                    purchasePrice: 1200000, 
                    salePrice: 1500000, 
                    stock: 3, 
                    unit: "piece",
                    hasSecondaryUnit: false,
                    secondaryUnit: null,
                    secondaryUnitQuantity: 0,
                    secondaryUnitPrice: null,
                    image: null,
                    expiryDate: nextMonth.toISOString().split('T')[0]
                },
                { 
                    id: 5, 
                    name: "مۆبایل ئایفۆن 13", 
                    barcode: "BR1005", 
                    purchasePrice: 2500000, 
                    salePrice: 3000000, 
                    stock: 2, 
                    unit: "piece",
                    hasSecondaryUnit: true,
                    secondaryUnit: "box",
                    secondaryUnitQuantity: 10,
                    secondaryUnitPrice: 250000, // 10 دانە = 250,000 دینار (بۆکس)
                    image: null,
                    expiryDate: lastMonth.toISOString().split('T')[0] // بەسەرچوو
                }
            ];
            
            // زیادکردنی فرۆشتنە نموونەییەکان
            sampleData.sales = [
                {
                    id: 1,
                    code: "INV-2023-001",
                    customer: "عەلی محەممەد",
                    date: "2023-12-15",
                    total: 600000,
                    payment: "credit",
                    items: [
                        { name: "مۆبایل سامسۆنگ A50", quantity: 1, unit: "piece", price: 600000, total: 600000 }
                    ]
                },
                {
                    id: 2,
                    code: "INV-2023-002",
                    customer: "حوسێن عەلی",
                    date: "2023-12-14",
                    total: 950000,
                    payment: "cash",
                    items: [
                        { name: "تەلەفزیۆن ئێڵ جی 55 ئینچ", quantity: 1, unit: "piece", price: 950000, total: 950000 }
                    ]
                }
            ];
            
            // زیادکردنی مێژووی پارەواسڵکردن
            sampleData.settlementHistory = [
                {
                    id: 1,
                    type: "customer",
                    personId: 1,
                    personName: "عەلی محەممەد",
                    amount: 30000,
                    date: "2023-12-10",
                    method: "cash",
                    notes: "پارەواسڵکردنی بەشی قەرز",
                    invoiceCode: "INV-2023-001",
                    oldDebt: 80000,
                    newDebt: 50000
                },
                {
                    id: 2,
                    type: "partner",
                    personId: 1,
                    personName: "کۆمپانیای ئەلکترۆنی",
                    amount: 50000,
                    date: "2023-12-05",
                    method: "transfer",
                    notes: "پارەواسڵکردن بۆ شەریک",
                    invoiceCode: "",
                    oldDebt: -200000,
                    newDebt: -150000
                }
            ];
            
            // زیادکردنی مێژووی سەرفەکان
            sampleData.expenseHistory = [
                {
                    id: 1,
                    type: "other",
                    category: "rent",
                    amount: 500000,
                    date: "2023-12-01",
                    description: "کرێی مانگی کانوونی یەکەم",
                    method: "cash",
                    recipient: "خاوەن ماڵ"
                },
                {
                    id: 2,
                    type: "other",
                    category: "salary",
                    amount: 1200000,
                    date: "2023-12-05",
                    description: "مووچەی کارمەندان",
                    method: "transfer",
                    recipient: "کارمەندان"
                }
            ];
            
            // نوێکردنەوەی داشبۆرد
            populateSampleData();
            
            // دەستپێکردنی سیستەمی پارەواسڵکردن
            initializeCashSettlementSystem();
            
            showNotification('داتای نموونەیی بۆ تاقیکردنەوە زیاد کرا!', 'info');
        }

        // ==============================================
        // سیستەمی پارەواسڵکردن - فەنکشنە سەرەکییەکان
        // ==============================================

        // دەستپێکردنی سیستەمی پارەواسڵکردن
        function initializeCashSettlementSystem() {
            // دەستپێکردنی تابەکان
            setupSettlementTabs();
            
            // دەستپێکردنی گەڕان
            setupSettlementSearch();
            
            // دەستپێکردنی مێژوو
            populateSettlementHistory();
            
            // دەستپێکردنی کارگێڕەکانی فۆرم
            setupSettlementFormHandlers();
        }

        // ڕێکخستنی تابەکانی پارەواسڵکردن
        function setupSettlementTabs() {
            const tabButtons = document.querySelectorAll('#cashSettlementSection .tab-btn');
            const tabContents = document.querySelectorAll('#cashSettlementSection .tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // لابردنی چالاکی لە هەموو تابەکان
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // زیادکردنی چالاکی بۆ تابەکە
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                    
                    // نوێکردنەوەی مێژوو کاتێ تابەکە چالاک دەکرێت
                    if (tabId === 'settlementHistory') {
                        populateSettlementHistory();
                    }
                    
                    // پاککردنەوەی گەڕان
                    if (tabId === 'settlementToCustomer' || tabId === 'settlementToPartner') {
                        clearSettlementForm();
                    }
                });
            });
        }

        // ڕێکخستنی گەڕانی پارەواسڵکردن
        function setupSettlementSearch() {
            // گەڕان بۆ کەس
            const customerSearch = document.getElementById('settlementCustomerSearch');
            if (customerSearch) {
                customerSearch.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    const suggestions = document.getElementById('settlementCustomerSuggestions');
                    
                    if (!suggestions) return;
                    
                    if (query.length < 2) {
                        suggestions.style.display = 'none';
                        document.getElementById('selectedSettlementCustomerInfo').style.display = 'none';
                        selectedSettlementCustomer = null;
                        return;
                    }
                    
                    const filteredCustomers = sampleData.customers.filter(c => 
                        c.name.toLowerCase().includes(query) ||
                        c.phone.includes(query)
                    );
                    
                    suggestions.innerHTML = '';
                    
                    if (filterifiedCustomers.length === 0) {
                        suggestions.style.display = 'none';
                        return;
                    }
                    
                    filteredCustomers.forEach(customer => {
                        const div = document.createElement('div');
                        div.className = 'suggestion-item';
                        
                        // دیاریکردنی جۆری قەرز
                        let debtText, debtClass;
                        if (customer.debt > 0) {
                            debtText = `${customer.debt.toLocaleString()} دینار (کەسەکە قەرزداری تۆیە)`;
                            debtClass = 'debt-positive';
                        } else if (customer.debt < 0) {
                            debtText = `${Math.abs(customer.debt).toLocaleString()} دینار (تۆ قەرزداری کەسەکەیت)`;
                            debtClass = 'debt-negative';
                        } else {
                            debtText = 'بێ قەرز';
                            debtClass = 'debt-zero';
                        }
                        
                        div.innerHTML = `
                            <div><strong>${customer.name}</strong></div>
                            <div style="font-size: 0.9rem; color: var(--gray);">
                                ${customer.phone} | <span class="${debtClass}">${debtText}</span>
                            </div>
                        `;
                        
                        div.addEventListener('click', function() {
                            selectedSettlementCustomer = customer;
                            document.getElementById('settlementCustomerSearch').value = customer.name;
                            document.getElementById('selectedSettlementCustomerName').textContent = customer.name;
                            document.getElementById('selectedSettlementCustomerPhone').textContent = customer.phone;
                            document.getElementById('selectedSettlementCustomerDebt').textContent = customer.debt.toLocaleString() + ' دینار';
                            document.getElementById('selectedSettlementCustomerDebt').className = customer.debt > 0 ? 'debt-positive' : customer.debt < 0 ? 'debt-negative' : 'debt-zero';
                            document.getElementById('selectedSettlementCustomerInfo').style.display = 'block';
                            suggestions.style.display = 'none';
                            
                            // نوێکردنەوەی هەژمار
                            updateSettlementCalculation();
                        });
                        
                        suggestions.appendChild(div);
                    });
                    
                    suggestions.style.display = 'block';
                });
            }
            
            // گەڕان بۆ شەریک
            const partnerSearch = document.getElementById('settlementPartnerSearch');
            if (partnerSearch) {
                partnerSearch.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    const suggestions = document.getElementById('settlementPartnerSuggestions');
                    
                    if (!suggestions) return;
                    
                    if (query.length < 2) {
                        suggestions.style.display = 'none';
                        document.getElementById('selectedSettlementPartnerInfo').style.display = 'none';
                        selectedSettlementPartner = null;
                        return;
                    }
                    
                    const filteredPartners = sampleData.partners.filter(p => 
                        p.name.toLowerCase().includes(query) ||
                        p.phone.includes(query)
                    );
                    
                    suggestions.innerHTML = '';
                    
                    if (filteredPartners.length === 0) {
                        suggestions.style.display = 'none';
                        return;
                    }
                    
                    filteredPartners.forEach(partner => {
                        const div = document.createElement('div');
                        div.className = 'suggestion-item';
                        
                        // دیاریکردنی جۆری قەرز
                        let debtText, debtClass;
                        if (partner.debt > 0) {
                            debtText = `${partner.debt.toLocaleString()} دینار (شەریک قەرزداری تۆیە)`;
                            debtClass = 'debt-positive';
                        } else if (partner.debt < 0) {
                            debtText = `${Math.abs(partner.debt).toLocaleString()} دینار (تۆ قەرزداری شەریکەکەیت)`;
                            debtClass = 'debt-negative';
                        } else {
                            debtText = 'بێ قەرز';
                            debtClass = 'debt-zero';
                        }
                        
                        div.innerHTML = `
                            <div><strong>${partner.name}</strong></div>
                            <div style="font-size: 0.9rem; color: var(--gray);">
                                ${partner.phone} | <span class="${debtClass}">${debtText}</span>
                            </div>
                        `;
                        
                        div.addEventListener('click', function() {
                            selectedSettlementPartner = partner;
                            document.getElementById('settlementPartnerSearch').value = partner.name;
                            document.getElementById('selectedSettlementPartnerName').textContent = partner.name;
                            document.getElementById('selectedSettlementPartnerPhone').textContent = partner.phone;
                            document.getElementById('selectedSettlementPartnerDebt').textContent = Math.abs(partner.debt).toLocaleString() + ' دینار';
                            document.getElementById('selectedSettlementPartnerDebt').className = partner.debt > 0 ? 'debt-positive' : partner.debt < 0 ? 'debt-negative' : 'debt-zero';
                            document.getElementById('selectedSettlementPartnerInfo').style.display = 'block';
                            suggestions.style.display = 'none';
                            
                            // نوێکردنەوەی هەژمار
                            updatePartnerSettlementCalculation();
                        });
                        
                        suggestions.appendChild(div);
                    });
                    
                    suggestions.style.display = 'block';
                });
            }
        }

        // نوێکردنەوەی هەژماری پارەواسڵکردن بۆ کەس
        function updateSettlementCalculation() {
            const amountInput = document.getElementById('settlementToCustomerAmount');
            const calculationDiv = document.getElementById('settlementCalculation');
            
            if (!selectedSettlementCustomer || !amountInput || !calculationDiv) return;
            
            const amount = parseInt(amountInput.value) || 0;
            const oldDebt = selectedSettlementCustomer.debt;
            const newDebt = oldDebt - amount;
            
            // نیشاندانی هەژمار
            document.getElementById('oldDebtDisplay').textContent = oldDebt.toLocaleString() + ' دینار';
            document.getElementById('paymentAmountDisplay').textContent = amount.toLocaleString() + ' دینار';
            document.getElementById('newDebtDisplay').textContent = Math.abs(newDebt).toLocaleString() + ' دینار';
            
            // دیاریکردنی بارودۆخ
            let statusText, statusClass;
            if (newDebt > 0) {
                statusText = `کەسەکە هێشتا ${newDebt.toLocaleString()} دینار قەرزداری تۆیە`;
                statusClass = 'debt-positive';
            } else if (newDebt < 0) {
                statusText = `تۆ ${Math.abs(newDebt).toLocaleString()} دینار قەرزداری کەسەکەیت`;
                statusClass = 'debt-negative';
            } else {
                statusText = 'بێ قەرز - هەموو قەرزەکان واسڵ کران';
                statusClass = 'debt-zero';
            }
            
            document.getElementById('debtStatus').textContent = statusText;
            document.getElementById('debtStatus').className = statusClass;
            
            calculationDiv.style.display = 'block';
        }

        // نوێکردنەوەی هەژماری پارەواسڵکردن بۆ شەریک
        function updatePartnerSettlementCalculation() {
            const amountInput = document.getElementById('settlementToPartnerAmount');
            const calculationDiv = document.getElementById('settlementPartnerCalculation');
            
            if (!selectedSettlementPartner || !amountInput || !calculationDiv) return;
            
            const amount = parseInt(amountInput.value) || 0;
            const oldDebt = selectedSettlementPartner.debt;
            const newDebt = oldDebt - amount;
            
            // نیشاندانی هەژمار
            document.getElementById('oldPartnerDebtDisplay').textContent = Math.abs(oldDebt).toLocaleString() + ' دینار';
            document.getElementById('partnerPaymentAmountDisplay').textContent = amount.toLocaleString() + ' دینار';
            document.getElementById('newPartnerDebtDisplay').textContent = Math.abs(newDebt).toLocaleString() + ' دینار';
            
            // دیاریکردنی بارودۆخ
            let statusText, statusClass;
            if (newDebt > 0) {
                statusText = `شەریکەکە هێشتا ${newDebt.toLocaleString()} دینار قەرزداری تۆیە`;
                statusClass = 'debt-positive';
            } else if (newDebt < 0) {
                statusText = `تۆ ${Math.abs(newDebt).toLocaleString()} دینار قەرزداری شەریکەکەیت`;
                statusClass = 'debt-negative';
            } else {
                statusText = 'بێ قەرز - هەموو قەرزەکان واسڵ کران';
                statusClass = 'debt-zero';
            }
            
            document.getElementById('partnerDebtStatus').textContent = statusText;
            document.getElementById('partnerDebtStatus').className = statusClass;
            
            calculationDiv.style.display = 'block';
        }

        // ڕێکخستنی کارگێڕەکانی فۆرم
        function setupSettlementFormHandlers() {
            // کارگێڕی بڕی پارە بۆ کەس
            const customerAmountInput = document.getElementById('settlementToCustomerAmount');
            if (customerAmountInput) {
                customerAmountInput.addEventListener('input', function() {
                    if (selectedSettlementCustomer) {
                        updateSettlementCalculation();
                    }
                });
            }
            
            // کارگێڕی بڕی پارە بۆ شەریک
            const partnerAmountInput = document.getElementById('settlementToPartnerAmount');
            if (partnerAmountInput) {
                partnerAmountInput.addEventListener('input', function() {
                    if (selectedSettlementPartner) {
                        updatePartnerSettlementCalculation();
                    }
                });
            }
            
            // کارگێڕی پارەواسڵکردن بۆ کەس
            const submitCustomerBtn = document.getElementById('submitSettlementToCustomerBtn');
            if (submitCustomerBtn) {
                submitCustomerBtn.addEventListener('click', function() {
                    processCustomerSettlement();
                });
            }
            
            // کارگێڕی پارەواسڵکردن بۆ شەریک
            const submitPartnerBtn = document.getElementById('submitSettlementToPartnerBtn');
            if (submitPartnerBtn) {
                submitPartnerBtn.addEventListener('click', function() {
                    processPartnerSettlement();
                });
            }
            
            // کارگێڕی سەرفکردن بۆ هۆکی تر
            const submitOtherExpenseBtn = document.getElementById('submitOtherExpenseBtn');
            if (submitOtherExpenseBtn) {
                submitOtherExpenseBtn.addEventListener('click', function() {
                    processOtherExpense();
                });
            }
            
            // نوێکردنەوەی مێژووی پارەواسڵکردن
            const refreshHistoryBtn = document.getElementById('refreshSettlementHistory');
            if (refreshHistoryBtn) {
                refreshHistoryBtn.addEventListener('click', function() {
                    populateSettlementHistory();
                });
            }
            
            // پرێنتکردنی مێژوو
            const printHistoryBtn = document.getElementById('printSettlementHistoryBtn');
            if (printHistoryBtn) {
                printHistoryBtn.addEventListener('click', function() {
                    printSettlementHistory();
                });
            }
        }

        // پرۆسەکردنی پارەواسڵکردن بۆ کەس
        function processCustomerSettlement() {
            if (!selectedSettlementCustomer) {
                showNotification('تکایە کەسێک هەڵبژێرە!', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('settlementToCustomerAmount').value) || 0;
            const date = document.getElementById('settlementToCustomerDate').value;
            const method = document.getElementById('settlementToCustomerMethod').value;
            const notes = document.getElementById('settlementToCustomerNotes').value;
            const invoiceCode = document.getElementById('settlementInvoiceCode').value;
            
            if (amount <= 0) {
                showNotification('تکایە بڕی پارەیەکی دروست بنووسە!', 'error');
                return;
            }
            
            const oldDebt = selectedSettlementCustomer.debt;
            const newDebt = oldDebt - amount;
            
            // تۆمارکردنی پارەواسڵکردن
            const settlementRecord = {
                id: sampleData.settlementHistory.length + 1,
                type: "customer",
                personId: selectedSettlementCustomer.id,
                personName: selectedSettlementCustomer.name,
                amount: amount,
                date: date,
                method: method,
                notes: notes,
                invoiceCode: invoiceCode,
                oldDebt: oldDebt,
                newDebt: newDebt,
                timestamp: new Date().toISOString()
            };
            
            sampleData.settlementHistory.unshift(settlementRecord);
            
            // نوێکردنەوەی قەرزی کەس
            selectedSettlementCustomer.debt = newDebt;
            
            // کەمکردنەوەی پارە لە کۆی نەقدی (ئەگەر بە نەقدی بوو)
            if (method === 'cash') {
                sampleData.cashBalance -= amount;
                updateDashboardCash();
            }
            
            // نیشاندانی ئاگاداری
            showNotification(`پارەواسڵکردن بۆ ${selectedSettlementCustomer.name} بە سەرکەوتوویی تۆمار کرا!`, 'success');
            
            // پرێنتکردنی بڕگە
            generateSettlementReceipt(settlementRecord);
            
            // پاککردنەوەی فۆرم
            clearSettlementForm();
            
            // نوێکردنەوەی داشبۆرد
            populateSampleData();
            
            // نوێکردنەوەی مێژوو
            populateSettlementHistory();
        }

        // پرۆسەکردنی پارەواسڵکردن بۆ شەریک
        function processPartnerSettlement() {
            if (!selectedSettlementPartner) {
                showNotification('تکایە شەریکێک هەڵبژێرە!', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('settlementToPartnerAmount').value) || 0;
            const date = document.getElementById('settlementToPartnerDate').value;
            const method = document.getElementById('settlementToPartnerMethod').value;
            const notes = document.getElementById('settlementToPartnerNotes').value;
            const invoiceCode = document.getElementById('settlementPartnerInvoiceCode').value;
            
            if (amount <= 0) {
                showNotification('تکایە بڕی پارەیەکی دروست بنووسە!', 'error');
                return;
            }
            
            const oldDebt = selectedSettlementPartner.debt;
            const newDebt = oldDebt - amount;
            
            // تۆمارکردنی پارەواسڵکردن
            const settlementRecord = {
                id: sampleData.settlementHistory.length + 1,
                type: "partner",
                personId: selectedSettlementPartner.id,
                personName: selectedSettlementPartner.name,
                amount: amount,
                date: date,
                method: method,
                notes: notes,
                invoiceCode: invoiceCode,
                oldDebt: oldDebt,
                newDebt: newDebt,
                timestamp: new Date().toISOString()
            };
            
            sampleData.settlementHistory.unshift(settlementRecord);
            
            // نوێکردنەوەی قەرزی شەریک
            selectedSettlementPartner.debt = newDebt;
            
            // کەمکردنەوەی پارە لە کۆی نەقدی (ئەگەر بە نەقدی بوو)
            if (method === 'cash') {
                sampleData.cashBalance -= amount;
                updateDashboardCash();
            }
            
            // نیشاندانی ئاگاداری
            showNotification(`پارەواسڵکردن بۆ ${selectedSettlementPartner.name} بە سەرکەوتوویی تۆمار کرا!`, 'success');
            
            // پرێنتکردنی بڕگە
            generateSettlementReceipt(settlementRecord);
            
            // پاککردنەوەی فۆرم
            clearSettlementForm();
            
            // نوێکردنەوەی داشبۆرد
            populateSampleData();
            
            // نوێکردنەوەی مێژوو
            populateSettlementHistory();
        }

        // پرۆسەکردنی سەرفکردن بۆ هۆکی تر
        function processOtherExpense() {
            const amount = parseInt(document.getElementById('otherExpenseAmount').value) || 0;
            const date = document.getElementById('otherExpenseDate').value;
            const category = document.getElementById('otherExpenseCategory').value;
            const description = document.getElementById('otherExpenseDescription').value;
            const method = document.getElementById('otherExpenseMethod').value;
            const recipient = document.getElementById('otherExpenseRecipient').value;
            
            if (amount <= 0) {
                showNotification('تکایە بڕی پارەیەکی دروست بنووسە!', 'error');
                return;
            }
            
            if (!description) {
                showNotification('تکایە پێناسەی سەرفکردن بنووسە!', 'error');
                return;
            }
            
            // تۆمارکردنی سەرف
            const expenseRecord = {
                id: sampleData.expenseHistory.length + 1,
                type: "other",
                category: category,
                amount: amount,
                date: date,
                description: description,
                method: method,
                recipient: recipient,
                timestamp: new Date().toISOString()
            };
            
            sampleData.expenseHistory.unshift(expenseRecord);
            
            // کەمکردنەوەی پارە لە کۆی نەقدی
            sampleData.cashBalance -= amount;
            updateDashboardCash();
            
            // نیشاندانی ئاگاداری
            showNotification('سەرفکردن بە سەرکەوتوویی تۆمار کرا!', 'success');
            
            // پاککردنەوەی فۆرم
            document.getElementById('otherExpenseAmount').value = '';
            document.getElementById('otherExpenseDescription').value = '';
            document.getElementById('otherExpenseRecipient').value = '';
            
            // نوێکردنەوەی داشبۆرد
            populateSampleData();
            
            // نوێکردنەوەی مێژووی سەرفەکان
            populateExpenseHistory();
        }

        // پاککردنەوەی فۆرمی پارەواسڵکردن
        function clearSettlementForm() {
            // پاککردنەوەی گەڕان
            document.getElementById('settlementCustomerSearch').value = '';
            document.getElementById('settlementPartnerSearch').value = '';
            
            // پاککردنەوەی زانیاری
            document.getElementById('selectedSettlementCustomerInfo').style.display = 'none';
            document.getElementById('selectedSettlementPartnerInfo').style.display = 'none';
            
            // پاککردنەوەی خانەکان
            document.getElementById('settlementToCustomerAmount').value = '';
            document.getElementById('settlementToPartnerAmount').value = '';
            document.getElementById('settlementToCustomerNotes').value = '';
            document.getElementById('settlementToPartnerNotes').value = '';
            document.getElementById('settlementInvoiceCode').value = '';
            document.getElementById('settlementPartnerInvoiceCode').value = '';
            
            // پاککردنەوەی هەژمار
            document.getElementById('settlementCalculation').style.display = 'none';
            document.getElementById('settlementPartnerCalculation').style.display = 'none';
            
            // پاککردنەوەی هەڵبژاردنەکان
            selectedSettlementCustomer = null;
            selectedSettlementPartner = null;
        }

        // زیادکردنی مێژووی پارەواسڵکردن
        function populateSettlementHistory() {
            const historyList = document.getElementById('settlementHistoryList');
            if (!historyList) return;
            
            historyList.innerHTML = '';
            
            if (sampleData.settlementHistory.length === 0) {
                historyList.innerHTML = '<li class="list-item">هیچ مێژووی پارەواسڵکردنێک نییە</li>';
                return;
            }
            
            sampleData.settlementHistory.forEach(settlement => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.setAttribute('data-settlement-id', settlement.id);
                
                // دیاریکردنی جۆری کەس/شەریک
                const typeText = settlement.type === 'customer' ? 'کەس' : 'شەریک';
                const typeIcon = settlement.type === 'customer' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-handshake"></i>';
                
                // دیاریکردنی جۆری قەرز
                let debtChangeText, debtChangeClass;
                if (settlement.newDebt > 0) {
                    debtChangeText = `${Math.abs(settlement.oldDebt).toLocaleString()} → ${settlement.newDebt.toLocaleString()} دینار`;
                    debtChangeClass = 'debt-positive';
                } else if (settlement.newDebt < 0) {
                    debtChangeText = `${Math.abs(settlement.oldDebt).toLocaleString()} → ${Math.abs(settlement.newDebt).toLocaleString()} دینار`;
                    debtChangeClass = 'debt-negative';
                } else {
                    debtChangeText = `${Math.abs(settlement.oldDebt).toLocaleString()} → ٠ دینار`;
                    debtChangeClass = 'debt-zero';
                }
                
                li.innerHTML = `
                    <div>
                        <div class="item-name">${typeIcon} ${settlement.personName} (${typeText})</div>
                        <div style="font-size: 0.9rem; color: var(--gray);">
                            ${settlement.date} - ${getPaymentMethodName(settlement.method)}
                        </div>
                        <div style="font-size: 0.9rem; color: var(--info);">
                            کۆدی فاکتوورە: ${settlement.invoiceCode || 'نییە'}
                        </div>
                        <div style="font-size: 0.9rem; color: var(--gray); margin-top: 5px;">
                            ${settlement.notes || 'هیچ تێبینییەک نییە'}
                        </div>
                    </div>
                    <div>
                        <div class="item-value debt-payment">${settlement.amount.toLocaleString()} دینار</div>
                        <div class="item-value ${debtChangeClass}" style="font-size: 0.9rem; margin-top: 5px;">
                            ${debtChangeText}
                        </div>
                        <div style="margin-top: 10px; display: flex; gap: 5px;">
                            <button class="btn btn-info btn-sm" onclick="viewSettlementDetails(${settlement.id})">
                                <i class="fas fa-eye"></i> بینین
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="printSettlementReceiptById(${settlement.id}, 'small')">
                                <i class="fas fa-print"></i> بچووک
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="printSettlementReceiptById(${settlement.id}, 'A4')">
                                <i class="fas fa-print"></i> A4
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteSettlementRecord(${settlement.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                historyList.appendChild(li);
            });
            
            // دەستپێکردنی گەڕانی مێژوو
            setupSettlementHistorySearch();
        }

        // ڕێکخستنی گەڕانی مێژووی پارەواسڵکردن
        function setupSettlementHistorySearch() {
            const searchInput = document.getElementById('settlementHistorySearch');
            if (!searchInput) return;
            
            searchInput.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                const items = document.querySelectorAll('#settlementHistoryList .list-item');
                
                items.forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(query)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        }

        // بینینی وردەکاری پارەواسڵکردن
        window.viewSettlementDetails = function(settlementId) {
            const settlement = sampleData.settlementHistory.find(s => s.id === settlementId);
            if (!settlement) return;
            
            const modalHTML = `
                <div class="modal active" id="settlementDetailModal">
                    <div class="modal-content" style="max-width: 700px;">
                        <div class="modal-header">
                            <h3>وردەکاری پارەواسڵکردن</h3>
                            <button class="modal-close" onclick="document.getElementById('settlementDetailModal').remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="invoice">
                                <div class="invoice-header">
                                    <div class="invoice-logo">الکترۆنیات</div>
                                    <h2>بڕگەی پارەواسڵکردن</h2>
                                    <p>کۆدی تۆمار: SET-${settlement.id.toString().padStart(4, '0')}</p>
                                    <p>بەروار: ${settlement.date}</p>
                                </div>
                                
                                <div class="invoice-details">
                                    <div>
                                        <h4>زانیاری سیستەم:</h4>
                                        <p>ناوی سیستەم: الکترۆنیات</p>
                                        <p>ژمارەی موبایل: ٠٧٧٠١٢٣٤٥٦٧</p>
                                        <p>ناونیشان: هەولێر، کوردستان</p>
                                    </div>
                                    
                                    <div>
                                        <h4>زانیاری ${settlement.type === 'customer' ? 'کەس' : 'شەریک'}:</h4>
                                        <p>ناو: ${settlement.personName}</p>
                                        <p>جۆر: ${settlement.type === 'customer' ? 'کەس' : 'شەریک'}</p>
                                        <p>کۆدی فاکتوورە: ${settlement.invoiceCode || 'نییە'}</p>
                                    </div>
                                </div>
                                
                                <table class="invoice-table">
                                    <thead>
                                        <tr>
                                            <th>زانیاری</th>
                                            <th>وردەکاری</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>بڕی پارەواسڵکردن</td>
                                            <td>${settlement.amount.toLocaleString()} دینار</td>
                                        </tr>
                                        <tr>
                                            <td>شێوازی پارەدان</td>
                                            <td>${getPaymentMethodName(settlement.method)}</td>
                                        </tr>
                                        <tr>
                                            <td>قەرزی پێشوو</td>
                                            <td>${Math.abs(settlement.oldDebt).toLocaleString()} دینار 
                                                <span class="${settlement.oldDebt > 0 ? 'debt-positive' : settlement.oldDebt < 0 ? 'debt-negative' : 'debt-zero'}">
                                                    (${settlement.oldDebt > 0 ? 'کەس/شەریک قەرزداری منە' : settlement.oldDebt < 0 ? 'من قەرزداری کەس/شەریکم' : 'بێ قەرز'})
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>قەرزی نوێ</td>
                                            <td>${Math.abs(settlement.newDebt).toLocaleString()} دینار 
                                                <span class="${settlement.newDebt > 0 ? 'debt-positive' : settlement.newDebt < 0 ? 'debt-negative' : 'debt-zero'}">
                                                    (${settlement.newDebt > 0 ? 'کەس/شەریک قەرزداری منە' : settlement.newDebt < 0 ? 'من قەرزداری کەس/شەریکم' : 'بێ قەرز'})
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>تێبینی</td>
                                            <td>${settlement.notes || 'هیچ تێبینییەک نییە'}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <div class="invoice-total">
                                    <p><strong>کۆی پارەواسڵکردن:</strong> ${settlement.amount.toLocaleString()} دینار</p>
                                    <p><strong>جیاوازی قەرز:</strong> ${Math.abs(settlement.oldDebt - settlement.newDebt).toLocaleString()} دینار</p>
                                </div>
                            </div>
                            
                            <div class="print-options" style="margin-top: 30px;">
                                <button class="btn btn-warning" onclick="printSettlementReceiptById(${settlement.id}, 'small')">
                                    <i class="fas fa-print"></i> پرێنتی بچووک
                                </button>
                                <button class="btn btn-primary" onclick="printSettlementReceiptById(${settlement.id}, 'A4')">
                                    <i class="fas fa-print"></i> پرێنتی A4
                                </button>
                                <button class="btn btn-danger" onclick="document.getElementById('settlementDetailModal').remove()">
                                    <i class="fas fa-times"></i> داخستن
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // لابردنی مۆدالی پێشوو
            const existingModal = document.getElementById('settlementDetailModal');
            if (existingModal) existingModal.remove();
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        };

        // دروستکردنی بڕگەی پارەواسڵکردن
        function generateSettlementReceipt(settlement) {
            const modal = document.getElementById('settlementPrintModal');
            if (!modal) return;
            
            const typeText = settlement.type === 'customer' ? 'کەس' : 'شەریک';
            const oldDebtStatus = settlement.oldDebt > 0 ? 'کەس/شەریک قەرزداری منە' : 
                                 settlement.oldDebt < 0 ? 'من قەرزداری کەس/شەریکم' : 'بێ قەرز';
            const newDebtStatus = settlement.newDebt > 0 ? 'کەس/شەریک قەرزداری منە' : 
                                 settlement.newDebt < 0 ? 'من قەرزداری کەس/شەریکم' : 'بێ قەرز';
            
            const receiptHTML = `
                <div class="invoice-header">
                    <div class="invoice-logo">الکترۆنیات</div>
                    <h2>بڕگەی پارەواسڵکردن</h2>
                    <p>کۆدی تۆمار: SET-${settlement.id.toString().padStart(4, '0')}</p>
                    <p>بەروار: ${settlement.date}</p>
                </div>
                
                <div class="invoice-details">
                    <div>
                        <h4>زانیاری سیستەم:</h4>
                        <p>ناوی سیستەم: الکترۆنیات</p>
                        <p>ژمارەی موبایل: ٠٧٧٠١٢٣٤٥٦٧</p>
                        <p>ناونیشان: هەولێر، کوردستان</p>
                    </div>
                    
                    <div>
                        <h4>زانیاری ${typeText}:</h4>
                        <p>ناو: ${settlement.personName}</p>
                        <p>جۆر: ${typeText}</p>
                        <p>کۆدی فاکتوورە: ${settlement.invoiceCode || 'نییە'}</p>
                    </div>
                </div>
                
                <table class="invoice-table">
                    <thead>
                        <tr>
                            <th>زانیاری</th>
                            <th>وردەکاری</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>بڕی پارەواسڵکردن</td>
                            <td>${settlement.amount.toLocaleString()} دینار</td>
                        </tr>
                        <tr>
                            <td>شێوازی پارەدان</td>
                            <td>${getPaymentMethodName(settlement.method)}</td>
                        </tr>
                        <tr>
                            <td>قەرزی پێشوو</td>
                            <td>${Math.abs(settlement.oldDebt).toLocaleString()} دینار (${oldDebtStatus})</td>
                        </tr>
                        <tr>
                            <td>قەرزی نوێ</td>
                            <td>${Math.abs(settlement.newDebt).toLocaleString()} دینار (${newDebtStatus})</td>
                        </tr>
                        <tr>
                            <td>تێبینی</td>
                            <td>${settlement.notes || 'هیچ تێبینییەک نییە'}</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="invoice-total">
                    <p><strong>کۆی پارەواسڵکردن:</strong> ${settlement.amount.toLocaleString()} دینار</p>
                    <p><strong>جیاوازی قەرز:</strong> ${Math.abs(settlement.oldDebt - settlement.newDebt).toLocaleString()} دینار</p>
                </div>
            `;
            
            document.getElementById('settlementInvoiceContent').innerHTML = receiptHTML;
            modal.classList.add('active');
        }

        // پرێنتکردنی بڕگەی پارەواسڵکردن بەپێی ID
        window.printSettlementReceiptById = function(settlementId, size = 'small') {
            const settlement = sampleData.settlementHistory.find(s => s.id === settlementId);
            if (!settlement) return;
            
            printSettlementReceipt(settlement, size);
        };

        // پرێنتکردنی بڕگەی پارەواسڵکردن
        window.printSettlementReceipt = function(size = 'small') {
            const modal = document.getElementById('settlementPrintModal');
            if (!modal) return;
            
            const receiptContent = modal.querySelector('.invoice');
            if (!receiptContent) return;
            
            // دروستکردنی پەڕەی نوێ بۆ پرێنت
            const printWindow = window.open('', '_blank');
            
            // دروستکردنی HTML بۆ پرێنت
            const printHTML = `
                <!DOCTYPE html>
                <html lang="ar" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>بڕگەی پارەواسڵکردن</title>
                    <style>
                        @media print {
                            body {
                                margin: 0;
                                padding: 0;
                                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                font-size: ${size === 'small' ? '12px' : '14px'};
                                line-height: 1.4;
                            }
                            
                            .print-container {
                                width: ${size === 'small' ? '80mm' : '210mm'};
                                padding: ${size === 'small' ? '5px' : '20px'};
                                margin: 0 auto;
                            }
                            
                            .invoice-header {
                                text-align: center;
                                border-bottom: 2px solid #4361ee;
                                padding-bottom: 10px;
                                margin-bottom: 20px;
                            }
                            
                            .invoice-logo {
                                font-size: ${size === 'small' ? '1.5rem' : '2rem'};
                                font-weight: 800;
                                color: #4361ee;
                                margin-bottom: 5px;
                            }
                            
                            .invoice-title {
                                font-size: ${size === 'small' ? '1rem' : '1.5rem'};
                                margin: 5px 0;
                            }
                            
                            .invoice-details {
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 15px;
                                margin-bottom: 20px;
                            }
                            
                            .invoice-table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-bottom: 20px;
                            }
                            
                            .invoice-table th, .invoice-table td {
                                padding: ${size === 'small' ? '3px 5px' : '8px 10px'};
                                text-align: right;
                                border-bottom: 1px solid #ddd;
                            }
                            
                            .invoice-table th {
                                background-color: #f8f9fa;
                                font-weight: bold;
                            }
                            
                            .invoice-total {
                                margin-top: 20px;
                                padding-top: 10px;
                                border-top: 2px solid #ddd;
                                text-align: left;
                            }
                            
                            .invoice-footer {
                                text-align: center;
                                margin-top: 30px;
                                padding-top: 10px;
                                border-top: 1px dashed #ddd;
                                color: #6c757d;
                                font-size: 0.9rem;
                            }
                            
                            .no-print {
                                display: none !important;
                            }
                        }
                        
                        @page {
                            margin: 0;
                            size: ${size === 'small' ? '80mm auto' : 'A4'};
                        }
                        
                        body {
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                            font-size: ${size === 'small' ? '12px' : '14px'};
                        }
                        
                        .print-container {
                            width: ${size === 'small' ? '80mm' : '210mm'};
                            padding: ${size === 'small' ? '5px' : '20px'};
                            margin: 0 auto;
                        }
                        
                        .invoice-header {
                            text-align: center;
                            border-bottom: 2px solid #4361ee;
                            padding-bottom: 10px;
                            margin-bottom: 20px;
                        }
                        
                        .invoice-logo {
                            font-size: ${size === 'small' ? '1.5rem' : '2rem'};
                            font-weight: 800;
                            color: #4361ee;
                            margin-bottom: 5px;
                        }
                        
                        .invoice-title {
                            font-size: ${size === 'small' ? '1rem' : '1.5rem'};
                            margin: 5px 0;
                        }
                        
                        .invoice-details {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 15px;
                            margin-bottom: 20px;
                        }
                        
                        .invoice-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 20px;
                        }
                        
                        .invoice-table th, .invoice-table td {
                            padding: ${size === 'small' ? '3px 5px' : '8px 10px'};
                            text-align: right;
                            border-bottom: 1px solid #ddd;
                        }
                        
                        .invoice-table th {
                            background-color: #f8f9fa;
                            font-weight: bold;
                        }
                        
                        .invoice-total {
                            margin-top: 20px;
                            padding-top: 10px;
                            border-top: 2px solid #ddd;
                            text-align: left;
                        }
                        
                        .invoice-footer {
                            text-align: center;
                            margin-top: 30px;
                            padding-top: 10px;
                            border-top: 1px dashed #ddd;
                            color: #6c757d;
                            font-size: 0.9rem;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-container">
                        ${receiptContent.innerHTML.replace('print-options', 'print-options no-print')}
                        <div class="invoice-footer">
                            <p>سپاس بۆ بەکارهێنانی سیستەمی ئەلکترۆنیات</p>
                            <p>ژمارەی پەیوەندی: ٠٧٧٠١٢٣٤٥٦٧</p>
                            <p>بەروار: ${new Date().toLocaleDateString('ar-IQ')}</p>
                        </div>
                    </div>
                    
                    <script>
                        window.onload = function() {
                            // پرێنتکردن لەسەر بارکردنی پەڕەکە
                            setTimeout(function() {
                                window.print();
                                
                                // داخستنی پەڕە دوای پرێنتکردن
                                setTimeout(function() {
                                    window.close();
                                }, 1000);
                            }, 500);
                        };
                    <\/script>
                </body>
                </html>
            `;
            
            // نووسینی HTML بۆ پەڕەی نوێ
            printWindow.document.open();
            printWindow.document.write(printHTML);
            printWindow.document.close();
            
            // داخستنی مۆدال پاش پرێنتکردن
            setTimeout(() => {
                modal.classList.remove('active');
            }, 1000);
        };

        // پرێنتکردنی مێژووی پارەواسڵکردن
        function printSettlementHistory() {
            const printWindow = window.open('', '_blank');
            
            // دروستکردنی HTML بۆ پرێنت
            const printHTML = `
                <!DOCTYPE html>
                <html lang="ar" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>مێژووی پارەواسڵکردن</title>
                    <style>
                        @media print {
                            body {
                                margin: 0;
                                padding: 0;
                                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                                font-size: 14px;
                                line-height: 1.4;
                            }
                            
                            .print-container {
                                width: 210mm;
                                padding: 20px;
                                margin: 0 auto;
                            }
                            
                            .report-header {
                                text-align: center;
                                border-bottom: 2px solid #4361ee;
                                padding-bottom: 10px;
                                margin-bottom: 20px;
                            }
                            
                            .report-logo {
                                font-size: 2rem;
                                font-weight: 800;
                                color: #4361ee;
                                margin-bottom: 5px;
                            }
                            
                            .report-title {
                                font-size: 1.5rem;
                                margin: 5px 0;
                            }
                            
                            .report-table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-bottom: 20px;
                            }
                            
                            .report-table th, .report-table td {
                                padding: 8px 10px;
                                text-align: right;
                                border-bottom: 1px solid #ddd;
                            }
                            
                            .report-table th {
                                background-color: #f8f9fa;
                                font-weight: bold;
                            }
                            
                            .report-total {
                                margin-top: 20px;
                                padding-top: 10px;
                                border-top: 2px solid #ddd;
                                text-align: left;
                            }
                            
                            .report-footer {
                                text-align: center;
                                margin-top: 30px;
                                padding-top: 10px;
                                border-top: 1px dashed #ddd;
                                color: #6c757d;
                                font-size: 0.9rem;
                            }
                        }
                        
                        @page {
                            margin: 0;
                            size: A4;
                        }
                        
                        body {
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                            font-size: 14px;
                        }
                        
                        .print-container {
                            width: 210mm;
                            padding: 20px;
                            margin: 0 auto;
                        }
                        
                        .report-header {
                            text-align: center;
                            border-bottom: 2px solid #4361ee;
                            padding-bottom: 10px;
                            margin-bottom: 20px;
                        }
                        
                        .report-logo {
                            font-size: 2rem;
                            font-weight: 800;
                            color: #4361ee;
                            margin-bottom: 5px;
                        }
                        
                        .report-title {
                            font-size: 1.5rem;
                            margin: 5px 0;
                        }
                        
                        .report-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 20px;
                        }
                        
                        .report-table th, .report-table td {
                            padding: 8px 10px;
                            text-align: right;
                            border-bottom: 1px solid #ddd;
                        }
                        
                        .report-table th {
                            background-color: #f8f9fa;
                            font-weight: bold;
                        }
                        
                        .report-total {
                            margin-top: 20px;
                            padding-top: 10px;
                            border-top: 2px solid #ddd;
                            text-align: left;
                        }
                        
                        .report-footer {
                            text-align: center;
                            margin-top: 30px;
                            padding-top: 10px;
                            border-top: 1px dashed #ddd;
                            color: #6c757d;
                            font-size: 0.9rem;
                        }
                    </style>
                </head>
                <body>
                    <div class="print-container">
                        <div class="report-header">
                            <div class="report-logo">الکترۆنیات</div>
                            <h2 class="report-title">مێژووی پارەواسڵکردن</h2>
                            <p>بەرواری ڕاپۆرت: ${new Date().toLocaleDateString('ar-IQ')}</p>
                        </div>
                        
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ناو</th>
                                    <th>جۆر</th>
                                    <th>بەروار</th>
                                    <th>بڕ</th>
                                    <th>قەرزی پێشوو</th>
                                    <th>قەرزی نوێ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${sampleData.settlementHistory.map((settlement, index) => {
                                    const typeText = settlement.type === 'customer' ? 'کەس' : 'شەریک';
                                    return `
                                        <tr>
                                            <td>${index + 1}</td>
                                            <td>${settlement.personName}</td>
                                            <td>${typeText}</td>
                                            <td>${settlement.date}</td>
                                            <td>${settlement.amount.toLocaleString()} دینار</td>
                                            <td>${Math.abs(settlement.oldDebt).toLocaleString()} دینار</td>
                                            <td>${Math.abs(settlement.newDebt).toLocaleString()} دینار</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                        
                        <div class="report-total">
                            <p><strong>کۆی گشتی پارەواسڵکردنەکان:</strong> ${sampleData.settlementHistory.reduce((sum, s) => sum + s.amount, 0).toLocaleString()} دینار</p>
                            <p><strong>کۆی قەرزی پێشوو:</strong> ${sampleData.settlementHistory.reduce((sum, s) => sum + Math.abs(s.oldDebt), 0).toLocaleString()} دینار</p>
                            <p><strong>کۆی قەرزی نوێ:</strong> ${sampleData.settlementHistory.reduce((sum, s) => sum + Math.abs(s.newDebt), 0).toLocaleString()} دینار</p>
                            <p><strong>کۆی گۆڕانکاری:</strong> ${sampleData.settlementHistory.reduce((sum, s) => sum + Math.abs(s.oldDebt - s.newDebt), 0).toLocaleString()} دینار</p>
                        </div>
                        
                        <div class="report-footer">
                            <p>ڕاپۆرتی مێژووی پارەواسڵکردن</p>
                            <p>سیستەمی فرۆشتی ئەلکترۆنیات</p>
                            <p>بەروار: ${new Date().toLocaleDateString('ar-IQ')}</p>
                        </div>
                    </div>
                    
                    <script>
                        window.onload = function() {
                            // پرێنتکردن لەسەر بارکردنی پەڕەکە
                            setTimeout(function() {
                                window.print();
                                
                                // داخستنی پەڕە دوای پرێنتکردن
                                setTimeout(function() {
                                    window.close();
                                }, 1000);
                            }, 500);
                        };
                    <\/script>
                </body>
                </html>
            `;
            
            // نووسینی HTML بۆ پەڕەی نوێ
            printWindow.document.open();
            printWindow.document.write(printHTML);
            printWindow.document.close();
        }

        // سڕینەوەی تۆماری پارەواسڵکردن
        window.deleteSettlementRecord = function(settlementId) {
            if (confirm('دڵنیای لە سڕینەوەی ئەم تۆمارەی پارەواسڵکردن؟')) {
                const index = sampleData.settlementHistory.findIndex(s => s.id === settlementId);
                if (index !== -1) {
                    const settlement = sampleData.settlementHistory[index];
                    
                    // گەڕاندنەوەی قەرز
                    if (settlement.type === 'customer') {
                        const customer = sampleData.customers.find(c => c.id === settlement.personId);
                        if (customer) {
                            customer.debt = settlement.oldDebt;
                        }
                    } else if (settlement.type === 'partner') {
                        const partner = sampleData.partners.find(p => p.id === settlement.personId);
                        if (partner) {
                            partner.debt = settlement.oldDebt;
                        }
                    }
                    
                    // گەڕاندنەوەی پارە (ئەگەر بە نەقدی بوو)
                    if (settlement.method === 'cash') {
                        sampleData.cashBalance += settlement.amount;
                        updateDashboardCash();
                    }
                    
                    sampleData.settlementHistory.splice(index, 1);
                    populateSettlementHistory();
                    populateSampleData();
                    showNotification('تۆماری پارەواسڵکردن بە سەرکەوتوویی سڕایەوە!', 'success');
                }
            }
        };

        // ==============================================
        // فەنکشنە گشتییەکان
        // ==============================================

        // فەنکشنی نیشاندانی ئاگاداری
        function showNotification(message, type = 'info') {
            // لابردنی ئاگاداری پێشوو
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) existingNotification.remove();
            
            // دروستکردنی ئاگاداری
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        type === 'warning' ? 'fa-exclamation-triangle' : 
                        'fa-info-circle';
            
            notification.innerHTML = `
                <i class="fas ${icon}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // لابردنی ئاگاداری دوای چەند چرکەیەک
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // فەنکشنی نیشاندانی بەش
        function showSection(sectionId) {
            // لابردنی چالاکی لە هەموو بەشەکان
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // لابردنی چالاکی لە هەموو بەستەرەکانی مێنیو
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // زیادکردنی چالاکی بۆ بەشەکە
            const sectionElement = document.getElementById(sectionId + 'Section');
            if (sectionElement) {
                sectionElement.classList.add('active');
            }
            
            // زیادکردنی چالاکی بۆ بەستەری مێنیو
            const navLink = document.querySelector(`.nav-link[data-section="${sectionId}"]`);
            if (navLink) {
                navLink.classList.add('active');
            }
            
            // داخستنی مێنیو لەسەر مۆبایل
            if (window.innerWidth <= 992) {
                document.getElementById('sidebar').classList.remove('active');
            }
            
            // دەستپێکردنی سیستەمی فرۆشتن کاتێ بەشەکە پیشان دەدرێت
            if (sectionId === 'salesPurchases') {
                setTimeout(() => {
                    const newSaleTab = document.querySelector('#newSale');
                    if (newSaleTab && newSaleTab.classList.contains('active')) {
                        initializeSaleSystem();
                    }
                }, 100);
            }
            
            // دەستپێکردنی سیستەمی پارەواسڵکردن کاتێ بەشەکە پیشان دەدرێت
            if (sectionId === 'cashSettlement') {
                setTimeout(() => {
                    initializeCashSettlementSystem();
                }, 100);
            }
            
            // نوێکردنەوەی داشبۆرد کاتێ بەشی داشبۆرد پیشان دەدرێ
            if (sectionId === 'dashboard') {
                populateSampleData();
            }
        }

        // چوونەدەرەوە
        document.getElementById('logoutBtn').addEventListener('click', function() {
            currentUser = null;
            cart = [];
            purchaseCart = [];
            selectedCustomer = null;
            selectedPartner = null;
            selectedPayment = "cash";
            editingProductId = null;
            selectedSettlementCustomer = null;
            selectedSettlementPartner = null;
            
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            
            // پاککردنەوەی خانەکانی چوونەژوورەوە
            document.getElementById('username').value = 'farzad';
            document.getElementById('password').value = 'farzad1234';
            
            // پاککردنەوەی سەبەتە
            updateCartDisplay();
            
            showNotification('بە سەرکەوتوویی چوویتە دەرەوە', 'info');
        });

        // فەنکشنی پێشبینینی وێنە
        function setupImagePreview() {
            const imageInput = document.getElementById('productImage');
            const imagePreview = document.getElementById('imagePreview');
            
            if (imageInput && imagePreview) {
                imageInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        // پشکنینی جۆری فایل
                        const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif'];
                        if (!validTypes.includes(file.type)) {
                            showNotification('تەنها فایلی وێنە (JPG, PNG, GIF) قبوڵکراوە!', 'error');
                            this.value = '';
                            return;
                        }
                        
                        // پشکنینی قەبارەی فایل (زیاتر لە 5MB نەبێت)
                        if (file.size > 5 * 1024 * 1024) {
                            showNotification('قەبارەی وێنە نابێت لە 5MB زیاتر بێت!', 'error');
                            this.value = '';
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            imagePreview.innerHTML = `<img src="${e.target.result}" alt="پێشبینینی وێنە">`;
                        };
                        reader.readAsDataURL(file);
                    } else {
                        imagePreview.innerHTML = '<p style="color: var(--gray); font-size: 0.9rem;">هیچ وێنەیەک نییە</p>';
                    }
                });
            }
        }

        // زیادکردنی داتای نموونەیی
        function populateSampleData() {
            // زیادکردنی کاڵای کەم بووەکان
            const lowStockList = document.getElementById('lowStockList');
            if (lowStockList) {
                lowStockList.innerHTML = '';
                
                const lowStockProducts = sampleData.products.filter(p => p.stock <= 5);
                
                if (lowStockProducts.length === 0) {
                    lowStockList.innerHTML = '<li class="list-item">هیچ کاڵایەک کەم نییە</li>';
                } else {
                    lowStockProducts.forEach(product => {
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.innerHTML = `
                            <div class="item-name">${product.name}</div>
                            <div class="item-value">${product.stock} ${getUnitName(product.unit)}</div>
                        `;
                        lowStockList.appendChild(li);
                    });
                }
                
                // نوێکردنەوەی ژمارەی کاڵای کەم بوو
                const lowStockCount = document.getElementById('lowStockCount');
                if (lowStockCount) {
                    lowStockCount.innerHTML = `${lowStockProducts.length} <span>جۆر</span>`;
                }
            }
            
            // زیادکردنی قەرزدارەکان
            const debtorsList = document.getElementById('debtorsList');
            if (debtorsList) {
                debtorsList.innerHTML = '';
                
                // قەرزدارەکان بریتین لە: کەسەکان کە قەرزداری منن (قەرز +) و شەریکەکان کە من قەرزداری ئەوانم (قەرز -)
                const allDebtors = [
                    ...sampleData.customers.filter(c => c.debt > 0).map(c => ({
                        name: c.name,
                        debt: c.debt,
                        type: 'کەس',
                        debtClass: 'debt-positive'
                    })),
                    ...sampleData.partners.filter(p => p.debt < 0).map(p => ({
                        name: p.name,
                        debt: Math.abs(p.debt),
                        type: 'شەریک',
                        debtClass: 'debt-negative'
                    }))
                ];
                
                if (allDebtors.length === 0) {
                    debtorsList.innerHTML = '<li class="list-item">هیچ قەرزدارێک نییە</li>';
                } else {
                    allDebtors.forEach(debtor => {
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.innerHTML = `
                            <div class="item-name">${debtor.name} (${debtor.type})</div>
                            <div class="item-value ${debtor.debtClass}">${debtor.debt.toLocaleString()} دینار</div>
                        `;
                        debtorsList.appendChild(li);
                    });
                }
            }
            
            // زیادکردنی لیستی کاڵای بەسەرچوون
            const expiredList = document.getElementById('expiredList');
            if (expiredList) {
                expiredList.innerHTML = '';
                
                const now = new Date();
                const expiredProducts = sampleData.products.filter(p => {
                    if (!p.expiryDate) return false;
                    const expiry = new Date(p.expiryDate);
                    return expiry < now;
                });
                
                const nearExpiryProducts = sampleData.products.filter(p => {
                    if (!p.expiryDate) return false;
                    const expiry = new Date(p.expiryDate);
                    const diffTime = expiry - now;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    return diffDays <= 7 && diffDays > 0;
                });
                
                if (expiredProducts.length === 0 && nearExpiryProducts.length === 0) {
                    expiredList.innerHTML = '<li class="list-item">هیچ کاڵایەک بەسەرچوو نییە</li>';
                } else {
                    // کاڵای بەسەرچوو
                    expiredProducts.forEach(product => {
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.innerHTML = `
                            <div class="item-name">${product.name} <span class="expiry-badge">بەسەرچوو</span></div>
                            <div class="item-value expiry-warning">${product.stock} ${getUnitName(product.unit)}</div>
                        `;
                        expiredList.appendChild(li);
                    });
                    
                    // کاڵای نزیک بەسەرچوون
                    nearExpiryProducts.forEach(product => {
                        const expiry = new Date(product.expiryDate);
                        const diffTime = expiry - now;
                        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                        
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.innerHTML = `
                            <div class="item-name">${product.name} <span class="near-expiry-badge">${diffDays} ڕۆژ</span></div>
                            <div class="item-value expiry-near">${product.stock} ${getUnitName(product.unit)}</div>
                        `;
                        expiredList.appendChild(li);
                    });
                }
                
                // نوێکردنەوەی کارتی کاڵای بەسەرچوون
                const expiredCount = document.getElementById('expiredCount');
                if (expiredCount) {
                    expiredCount.innerHTML = `${expiredProducts.length} <span>جۆر</span>`;
                }
            }
            
            // زیادکردنی لیستی کاڵاکان بۆ مخزن
            const productList = document.getElementById('productList');
            if (productList) {
                productList.innerHTML = '';
                
                if (sampleData.products.length === 0) {
                    productList.innerHTML = '<li class="list-item">هیچ کاڵایەک نییە. دەتوانی یەکەم کاڵا زیاد بکەی!</li>';
                } else {
                    sampleData.products.forEach(product => {
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        
                        // دروستکردنی وێنەی کاڵا
                        const imageHTML = product.image 
                            ? `<img src="${product.image}" class="product-image-small">`
                            : `<div style="width: 50px; height: 50px; background-color: var(--gray-light); border-radius: 5px; display: flex; align-items: center; justify-content: center; margin-left: 10px; color: var(--gray);"><i class="fas fa-image"></i></div>`;
                        
                        // پشکنینی بەسەرچوون
                        let expiryBadge = '';
                        if (product.expiryDate) {
                            const expiry = new Date(product.expiryDate);
                            const now = new Date();
                            const diffTime = expiry - now;
                            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                            
                            if (diffDays <= 0) {
                                expiryBadge = '<span class="expiry-badge">بەسەرچوو</span>';
                            } else if (diffDays <= 7) {
                                expiryBadge = `<span class="near-expiry-badge">${diffDays} ڕۆژ</span>`;
                            }
                        }
                        
                        // دروستکردنی زانیاری یەکەی دووەم
                        const secondaryUnitInfo = product.hasSecondaryUnit 
                            ? `<div style="font-size: 0.9rem; color: var(--info);">${product.secondaryUnitQuantity} ${getUnitName(product.secondaryUnit)} = ${product.secondaryUnitPrice ? product.secondaryUnitPrice.toLocaleString() + ' دینار' : 'نەزانراو'}</div>`
                            : '';
                        
                        li.innerHTML = `
                            <div style="display: flex; align-items: center;">
                                ${imageHTML}
                                <div>
                                    <div class="item-name">${product.name} ${expiryBadge}</div>
                                    <div style="font-size: 0.9rem; color: var(--gray);">
                                        بارکۆد: ${product.barcode}
                                    </div>
                                    ${secondaryUnitInfo}
                                    ${product.expiryDate ? `<div style="font-size: 0.8rem; color: var(--danger);">بەسەرچوون: ${product.expiryDate}</div>` : ''}
                                </div>
                            </div>
                            <div class="item-value">
                                <span style="margin-left: 15px;">${product.stock} ${getUnitName(product.unit)}</span>
                                <span>${product.salePrice.toLocaleString()} دینار</span>
                                <div style="margin-top: 10px; display: flex; gap: 5px;">
                                    <button class="btn btn-info btn-sm" onclick="editProduct(${product.id})">
                                        <i class="fas fa-edit"></i> گۆڕانکاری
                                    </button>
                                    <button class="btn btn-danger btn-sm" onclick="deleteProduct(${product.id})">
                                        <i class="fas fa-trash"></i> سڕینەوە
                                    </button>
                                </div>
                            </div>
                        `;
                        productList.appendChild(li);
                    });
                }
            }
            
            // زیادکردنی لیستی کەسەکان بۆ بەشی سەرەکی
            const customersMainList = document.getElementById('customersMainList');
            if (customersMainList) {
                customersMainList.innerHTML = '';
                
                if (sampleData.customers.length === 0) {
                    customersMainList.innerHTML = '<li class="list-item">هیچ کەسێک تۆمارنەکراوە</li>';
                } else {
                    sampleData.customers.forEach(customer => {
                        // دیاریکردنی رەنگ بەپێی قەرز
                        let debtClass = customer.debt > 0 ? 'debt-positive' : 'debt-zero';
                        
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.setAttribute('data-customer-id', customer.id);
                        li.innerHTML = `
                            <div>
                                <div class="item-name">${customer.name}</div>
                                <div style="font-size: 0.9rem; color: var(--gray);">${customer.phone}</div>
                            </div>
                            <div>
                                <div class="item-value ${debtClass}">${customer.debt.toLocaleString()} دینار قەرز</div>
                                <div style="margin-top: 10px;">
                                    <button class="btn btn-info btn-sm" onclick="viewCustomerDetails(${customer.id})">
                                        <i class="fas fa-eye"></i> بینین
                                    </button>
                                </div>
                            </div>
                        `;
                        customersMainList.appendChild(li);
                    });
                }
            }
            
            // زیادکردنی لیستی شەریکەکان
            const partnersListItems = document.getElementById('partnersListItems');
            if (partnersListItems) {
                partnersListItems.innerHTML = '';
                
                if (sampleData.partners.length === 0) {
                    partnersListItems.innerHTML = '<li class="list-item">هیچ شەریکێک تۆمارنەکراوە</li>';
                } else {
                    sampleData.partners.forEach(partner => {
                        // دیاریکردنی رەنگ بەپێی جۆری قەرز
                        let debtText, debtClass;
                        
                        if (partner.debt > 0) {
                            // شەریک قەرزداری منە (مثبت) - سۆر
                            debtText = `${partner.debt.toLocaleString()} دینار (شەریک قەرزداری منە)`;
                            debtClass = 'debt-positive';
                        } else if (partner.debt < 0) {
                            // من قەرزداری شەریکم (منفی) - رەش
                            debtText = `${Math.abs(partner.debt).toLocaleString()} دینار (من قەرزداری ئەوانم)`;
                            debtClass = 'debt-negative';
                        } else {
                            // بێ قەرز - خۆڵەمێشی
                            debtText = 'بێ قەرز';
                            debtClass = 'debt-zero';
                        }
                        
                        const li = document.createElement('li');
                        li.className = 'list-item';
                        li.innerHTML = `
                            <div class="item-name">${partner.name}</div>
                            <div class="item-value ${debtClass}">${debtText}</div>
                        `;
                        partnersListItems.appendChild(li);
                    });
                }
            }
            
            // نوێکردنەوەی کۆی پارە
            updateDashboardCash();
            
            // هەژمارکردنی کۆی سەرفکردن
            calculateMonthlyExpense();
            
            // نوێکردنەوەی هەموو کارتەکانی داشبۆرد
            updateAllDashboardCards();
            
            // نوێکردنەوەی مێژووی فرۆشتن
            updateSaleHistoryDisplay();
        }

        // نوێکردنەوەی کۆی پارە لە داشبۆرد
        function updateDashboardCash() {
            const cashCard = document.getElementById('cashBalanceDisplay');
            if (cashCard) {
                cashCard.innerHTML = `${sampleData.cashBalance.toLocaleString()} <span>دینار</span>`;
            }
        }

        // فەنکشنی هەژمارکردنی کۆی سەرفکردنی مانگی ئێستا
        function calculateMonthlyExpense() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            const monthlyExpenses = sampleData.expenseHistory.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && 
                       expenseDate.getFullYear() === currentYear;
            });
            
            const total = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            // نیشاندانی لە داشبۆرد
            const monthlyExpenseElement = document.getElementById('monthlyExpenseTotal');
            const expenseChangeElement = document.getElementById('expenseChange');
            
            if (monthlyExpenseElement) {
                monthlyExpenseElement.innerHTML = `${total.toLocaleString()} <span>دینار</span>`;
            }
        }

        // نوێکردنەوەی هەموو کارتەکانی داشبۆرد
        function updateAllDashboardCards() {
            // کۆی کڕین
            const totalPurchaseDisplay = document.getElementById('totalPurchaseDisplay');
            if (totalPurchaseDisplay) {
                const totalPurchases = samplePurchaseData.purchases.reduce((sum, purchase) => sum + purchase.total, 0);
                totalPurchaseDisplay.innerHTML = `${totalPurchases.toLocaleString()} <span>دینار</span>`;
            }
            
            // جیاوازی
            updateDifferenceCard();
            
            // کۆی قەرزداران
            const totalDebtDisplay = document.getElementById('totalDebtDisplay');
            if (totalDebtDisplay) {
                const totalCustomerDebt = sampleData.customers.reduce((sum, customer) => sum + customer.debt, 0);
                totalDebtDisplay.innerHTML = `${totalCustomerDebt.toLocaleString()} <span>دینار</span>`;
            }
            
            // قەرزدارم بە شەریکەکان
            const partnerDebtDisplay = document.getElementById('partnerDebtDisplay');
            if (partnerDebtDisplay) {
                const totalPartnerDebt = sampleData.partners
                    .filter(p => p.debt < 0)
                    .reduce((sum, partner) => sum + Math.abs(partner.debt), 0);
                partnerDebtDisplay.innerHTML = `${totalPartnerDebt.toLocaleString()} <span>دینار</span>`;
            }
        }

        // نوێکردنەوەی کارتی جیاوازی
        function updateDifferenceCard() {
            const differenceCard = document.getElementById('differenceDisplay');
            if (differenceCard) {
                // کۆی هەموو کڕینەکان
                const totalPurchases = samplePurchaseData.purchases.reduce((sum, purchase) => sum + purchase.total, 0);
                
                // کۆی هەموو سەرفەکان
                const totalExpenses = sampleData.expenseHistory.reduce((sum, expense) => sum + expense.amount, 0);
                
                // کۆی هەموو پارەواسڵکردنەکان
                const totalSettlements = sampleData.settlementHistory.reduce((sum, settlement) => sum + settlement.amount, 0);
                
                // جیاوازی = پارەی واسڵ - (کڕین + سەرف + پارەواسڵکردن)
                const difference = sampleData.cashBalance - (totalPurchases + totalExpenses + totalSettlements);
                
                differenceCard.innerHTML = `${difference.toLocaleString()} <span>دینار</span>`;
                
                // نوێکردنەوەی تێبینی گۆڕانکاری
                const changeElement = document.querySelector('.card-3 .card-change');
                if (changeElement) {
                    if (difference > 0) {
                        changeElement.innerHTML = `<i class="fas fa-arrow-up"></i> سود`;
                        changeElement.className = 'card-change positive';
                    } else if (difference < 0) {
                        changeElement.innerHTML = `<i class="fas fa-arrow-down"></i> زەرەر`;
                        changeElement.className = 'card-change negative';
                    } else {
                        changeElement.innerHTML = `<i class="fas fa-minus"></i> بێ گۆڕانکاری`;
                        changeElement.className = 'card-change';
                    }
                }
            }
        }

        // فەنکشنی وەرگرتنی ناوی یەکە
        function getUnitName(unit) {
            const unitNames = {
                'piece': 'پارچە',
                'carton': 'کارتۆن',
                'unit': 'دانە',
                'meter': 'مەتر',
                'kg': 'کیلۆ',
                'box': 'بۆکس',
                'pack': 'پاکەت'
            };
            return unitNames[unit] || unit;
        }

        // فەنکشنی وەرگرتنی ناوی شێوازی پارەدان
        function getPaymentMethodName(method) {
            const methodNames = {
                'cash': 'نەقدی',
                'transfer': 'گوازینەوە',
                'check': 'چەک'
            };
            return methodNames[method] || method;
        }

        // فەنکشنی وەرگرتنی ناوی پۆلی سەرفکردن
        function getExpenseCategoryName(category) {
            const categoryNames = {
                'rent': 'کرێ',
                'salary': 'مووچە',
                'utility': 'کەرەستە',
                'transport': 'گواستنەوە',
                'maintenance': 'چاکسازی',
                'marketing': 'بازرگانی',
                'office': 'ئۆفیس',
                'other': 'هی تر'
            };
            return categoryNames[category] || category;
        }

        // ==============================================
        // بەشی مێنیو و مۆبایل
        // ==============================================

        // کارگێڕی مێنیوی لای چەپ
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('header').classList.toggle('collapsed');
            document.getElementById('mainContent').classList.toggle('collapsed');
        });

        // کارگێڕی داخستنی مێنیو لەسەر مۆبایل
        document.getElementById('closeSidebar').addEventListener('click', function() {
            document.getElementById('sidebar').classList.remove('active');
        });

        // کارگێڕی بەستەرەکانی مێنیو
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
            });
        });

        // کارگێڕی تابەکان
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                const container = this.closest('.sale-purchase-container');
                
                // لابردنی چالاکی لە هەموو تابەکان
                container.querySelectorAll('.tab-btn').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                container.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // زیادکردنی چالاکی بۆ تابەکە
                this.classList.add('active');
                document.getElementById(tabId).classList.add('active');
                
                // دەستپێکردنی سیستەمی فرۆشتن کاتێ تابەکە چالاک دەکرێت
                if (tabId === 'newSale') {
                    setTimeout(() => {
                        initializeSaleSystem();
                    }, 100);
                }
                
                // دەستپێکردنی سیستەمی کڕین کاتێ تابەکە چالاک دەکرێت
                if (tabId === 'newPurchase') {
                    setTimeout(() => {
                        initializePurchaseSystem();
                    }, 100);
                }
                
                // دەستپێکردنی مێژووی کڕین کاتێ تابەکە چالاک دەکرێت
                if (tabId === 'purchaseHistory') {
                    setTimeout(() => {
                        updatePurchaseHistoryDisplay();
                    }, 100);
                }
            });
        });

        // کارگێڕی تابەکانی مخزن
        document.querySelectorAll('.inventory-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-inventory-tab');
                const container = this.closest('#inventorySection');
                
                // لابردنی چالاکی لە هەموو تابەکان
                container.querySelectorAll('.inventory-tab').forEach(t => {
                    t.classList.remove('active');
                });
                
                container.querySelectorAll('.inventory-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // زیادکردنی چالاکی بۆ تابەکە
                this.classList.add('active');
                document.getElementById(tabId + 'Tab').classList.add('active');
            });
        });

        // کارگێڕی تابەکانی کەس
        document.querySelectorAll('[data-customer-tab]').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-customer-tab');
                const container = this.closest('.modal-body');
                
                // لابردنی چالاکی لە هەموو تابەکان
                container.querySelectorAll('[data-customer-tab]').forEach(t => {
                    t.classList.remove('active');
                });
                
                container.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // زیادکردنی چالاکی بۆ تابەکە
                this.classList.add('active');
                document.getElementById('customer' + tabId.charAt(0).toUpperCase() + tabId.slice(1) + 'Tab').classList.add('active');
            });
        });

        // ==============================================
        // فەنکشنەکانی پێشوو (بۆ پەیوەندی)
        // ==============================================

        // فەنکشنەکانی پێشووی فرۆشتن و کڕین (بۆ پەیوەندی)
        function initializeSaleSystem() {
            // Implementation of sale system...
            // This is a placeholder - actual implementation would be here
            console.log('Sale system initialized');
        }

        function initializePurchaseSystem() {
            // Implementation of purchase system...
            // This is a placeholder - actual implementation would be here
            console.log('Purchase system initialized');
        }

        function updatePurchaseHistoryDisplay() {
            // Implementation of purchase history display...
            // This is a placeholder - actual implementation would be here
            console.log('Purchase history display updated');
        }

        function updateSaleHistoryDisplay() {
            // Implementation of sale history display...
            // This is a placeholder - actual implementation would be here
            console.log('Sale history display updated');
        }

        // فەنکشنەکانی پێشووی کاڵا و کەس (بۆ پەیوەندی)
        window.editProduct = function(productId) {
            // Implementation of edit product...
            console.log('Edit product:', productId);
        };

        window.deleteProduct = function(productId) {
            // Implementation of delete product...
            console.log('Delete product:', productId);
        };

        window.viewCustomerDetails = function(customerId) {
            // Implementation of view customer details...
            console.log('View customer details:', customerId);
        };

        // فەنکشنەکانی پێشووی سەبەتە (بۆ پەیوەندی)
        function updateCartDisplay() {
            // Implementation of cart display...
            console.log('Cart display updated');
        }

        // فەنکشنەکانی پێشووی مێژووی سەرفەکان (بۆ پەیوەندی)
        function populateExpenseHistory() {
            // Implementation of expense history...
            console.log('Expense history populated');
        }
    </script>
</body>
</html>