<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´Ú¯Ø§</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4cb5f5;
            --text-color: #333;
            --bg-color: #f5f5f5;
            --card-bg: #fff;
            --border-color: #ddd;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
        }

        [data-theme="dark"] {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --text-color: #ecf0f1;
            --bg-color: #1a1a1a;
            --card-bg: #2c2c2c;
            --border-color: #444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .login-section {
            display: flex;
            align-items: center;
        }

        .login-form {
            display: flex;
            align-items: center;
        }

        .login-form input {
            padding: 0.5rem;
            border: none;
            border-radius: 4px;
            margin-left: 0.5rem;
        }

        .login-form button {
            padding: 0.5rem 1rem;
            background-color: var(--accent-color);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            margin-left: 0.5rem;
        }

        .main-content {
            padding: 2rem 0;
        }

        .section {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }

        .search-box {
            display: flex;
            margin-bottom: 1rem;
            position: relative;
        }

        .search-box input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px 0 0 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .search-box button {
            padding: 0.75rem 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }

        .suggestions {
            position: absolute;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            width: calc(100% - 32px);
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            top: 100%;
            right: 0;
        }

        .suggestion-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
        }

        .suggestion-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .product-info {
            padding: 1rem;
        }

        .product-name {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-weight: bold;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #bd2130;
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background-color: #218838;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        table th, table td {
            padding: 0.75rem;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
        }

        table th {
            background-color: var(--primary-color);
            color: white;
        }

        table tr:hover {
            background-color: rgba(0, 0, 0, 0.03);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            margin-left: 1rem;
        }

        .quantity-control button {
            width: 30px;
            height: 30px;
            border: 1px solid var(--border-color);
            background-color: var(--card-bg);
            color: var(--text-color);
            cursor: pointer;
        }

        .quantity-control input {
            width: 40px;
            height: 30px;
            text-align: center;
            border: 1px solid var(--border-color);
            margin: 0 5px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .dashboard-card h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .dashboard-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom-color: var(--accent-color);
            color: var(--accent-color);
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }

        .hidden {
            display: none;
        }

        .barcode-scanner {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 1rem 0;
        }

        #barcode-video {
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            nav ul {
                margin-top: 1rem;
                flex-wrap: wrap;
            }

            nav ul li {
                margin: 0.5rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .dashboard-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´Ú¯Ø§</div>
            <nav>
                <ul>
                    <li><a href="#" data-section="dashboard">Ø¯Ø§Ø´Ø¨Û†Ø±Ø¯</a></li>
                    <li><a href="#" data-section="products">Ú©Ø§ÚµØ§Ú©Ø§Ù†</a></li>
                    <li><a href="#" data-section="sales">ÙØ±Û†Ø´ØªÙ†</a></li>
                    <li><a href="#" data-section="purchases">Ú©Ú•ÛŒÙ†</a></li>
                    <li><a href="#" data-section="customers">Ú©Ú•ÛŒØ§Ø±Û•Ú©Ø§Ù†</a></li>
                    <li><a href="#" data-section="warehouse">Ú©Û†Ú¯Ø§</a></li>
                    <li><a href="#" data-section="settings">Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù†</a></li>
                </ul>
            </nav>
            <div class="login-section">
                <div class="login-form">
                    <input type="password" id="password-input" placeholder="Ù¾Ø§Ø³Û†Ø±Ø¯">
                    <button id="login-btn">Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•</button>
                </div>
                <button class="theme-toggle" id="theme-toggle">ğŸŒ™</button>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <!-- Ø¯Ø§Ø´Ø¨Û†Ø±Ø¯ -->
        <section id="dashboard-section" class="section hidden">
            <h2 class="section-title">Ø¯Ø§Ø´Ø¨Û†Ø±Ø¯</h2>
            <div class="dashboard-cards">
                <div class="dashboard-card">
                    <h3>Ú©Û†ÛŒ ÙØ±Û†Ø´ØªÙ†</h3>
                    <div class="value" id="total-sales">0 Ø¯ÛŒÙ†Ø§Ø±</div>
                </div>
                <div class="dashboard-card">
                    <h3>Ú©Û†ÛŒ Ú©Ú•ÛŒÙ†</h3>
                    <div class="value" id="total-purchases">0 Ø¯ÛŒÙ†Ø§Ø±</div>
                </div>
                <div class="dashboard-card">
                    <h3>Ú©Û†ÛŒ Ø³Û•Ø±Ù</h3>
                    <div class="value" id="total-expenses">0 Ø¯ÛŒÙ†Ø§Ø±</div>
                </div>
                <div class="dashboard-card">
                    <h3>Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ</h3>
                    <div class="value" id="total-balance">0 Ø¯ÛŒÙ†Ø§Ø±</div>
                </div>
            </div>

            <div class="section">
                <h3 class="section-title">Ø¯Ø§Ù‡Ø§ØªÙˆ Ø®Û•Ø±Ø¬ÛŒÛŒÛ•Ú©Ø§Ù†</h3>
                <canvas id="finance-chart" width="400" height="200"></canvas>
            </div>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù† -->
        <section id="products-section" class="section hidden">
            <h2 class="section-title">Ú©Ø§ÚµØ§Ú©Ø§Ù†</h2>
            
            <div class="search-box">
                <input type="text" id="product-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ú©Ø§ÚµØ§...">
                <button id="product-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="product-suggestions"></div>
            </div>

            <div class="barcode-scanner hidden" id="barcode-scanner">
                <video id="barcode-video" autoplay></video>
                <button id="start-scan" class="btn btn-primary">Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Ø³Ú©Ø§Ù†Û•Ø±ÛŒ Ø¨Ø§Ø±Ú©Û†Ø¯</button>
                <button id="stop-scan" class="btn btn-danger hidden">ÙˆÛ•Ø³ØªØ§Ù†Ø¯Ù†ÛŒ Ø³Ú©Ø§Ù†Û•Ø±</button>
            </div>

            <div class="products-grid" id="products-grid">
                <!-- Ú©Ø§ÚµØ§Ú©Ø§Ù† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
            </div>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ ÙØ±Û†Ø´ØªÙ† -->
        <section id="sales-section" class="section hidden">
            <h2 class="section-title">ÙØ±Û†Ø´ØªÙ†</h2>
            
            <div class="search-box">
                <input type="text" id="customer-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ú©Ú•ÛŒØ§Ø±...">
                <button id="customer-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="customer-suggestions"></div>
            </div>

            <div class="cart-items" id="cart-items">
                <!-- Ú©Ø§ÚµØ§Ú©Ø§Ù†ÛŒ Ø³Û•Ø¨Û•ØªÛ• Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                <p id="empty-cart-message">Ù‡ÛŒÚ† Ú©Ø§ÚµØ§ÛŒÛ•Ú© Ù„Û• Ø³Û•Ø¨Û•ØªÛ•Ø¯Ø§ Ù†ÛŒÛŒÛ•.</p>
            </div>

            <div class="cart-total">
                <h3>Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: <span id="cart-total-amount">0 Ø¯ÛŒÙ†Ø§Ø±</span></h3>
            </div>

            <div class="payment-options">
                <button class="btn btn-success" id="cash-payment">Ù†Û•Ù‚Ø¯ÛŒ</button>
                <button class="btn btn-primary" id="credit-payment">Ù‚Û•Ø±Ø²</button>
            </div>

            <div class="sales-history">
                <h3 class="section-title">Ù…ÛÚ˜ÙˆÙˆÛŒ ÙØ±Û†Ø´ØªÙ†</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Ú˜Ù…Ø§Ø±Û•ÛŒ ÙØ±Û†Ø´ØªÙ†</th>
                            <th>Ú©Ú•ÛŒØ§Ø±</th>
                            <th>Ø¨Ú•</th>
                            <th>Ø¬Û†Ø±ÛŒ Ù¾Ø§Ø±Û•Ø¯Ø§Ù†</th>
                            <th>Ú©Ø§Øª</th>
                            <th>Ú©Ø±Ø¯Ø§Ø±Û•Ú©Ø§Ù†</th>
                        </tr>
                    </thead>
                    <tbody id="sales-history-body">
                        <!-- Ù…ÛÚ˜ÙˆÙˆÛŒ ÙØ±Û†Ø´ØªÙ† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ Ú©Ú•ÛŒÙ† -->
        <section id="purchases-section" class="section hidden">
            <h2 class="section-title">Ú©Ú•ÛŒÙ†</h2>
            
            <div class="search-box">
                <input type="text" id="supplier-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±...">
                <button id="supplier-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="supplier-suggestions"></div>
            </div>

            <div class="search-box">
                <input type="text" id="purchase-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ú©Ø§ÚµØ§...">
                <button id="purchase-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="purchase-suggestions"></div>
            </div>

            <div class="products-grid" id="purchase-products">
                <!-- Ú©Ø§ÚµØ§Ú©Ø§Ù†ÛŒ Ú©Ú•ÛŒÙ† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
            </div>

            <div class="purchase-history">
                <h3 class="section-title">Ù…ÛÚ˜ÙˆÙˆÛŒ Ú©Ú•ÛŒÙ†</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Ú˜Ù…Ø§Ø±Û•ÛŒ Ú©Ú•ÛŒÙ†</th>
                            <th>Ú©Ø§ÚµØ§</th>
                            <th>ÙØ±Û†Ø´ÛŒØ§Ø±</th>
                            <th>Ø¨Ú•</th>
                            <th>Ù†Ø±Ø®</th>
                            <th>Ú©Ø§Øª</th>
                            <th>Ú©Ø±Ø¯Ø§Ø±Û•Ú©Ø§Ù†</th>
                        </tr>
                    </thead>
                    <tbody id="purchase-history-body">
                        <!-- Ù…ÛÚ˜ÙˆÙˆÛŒ Ú©Ú•ÛŒÙ† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ Ú©Ú•ÛŒØ§Ø±Û•Ú©Ø§Ù† -->
        <section id="customers-section" class="section hidden">
            <h2 class="section-title">Ú©Ú•ÛŒØ§Ø±Û•Ú©Ø§Ù†</h2>
            
            <button class="btn btn-primary" id="add-customer-btn">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±ÛŒ Ù†ÙˆÛ</button>

            <div class="search-box">
                <input type="text" id="customer-list-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ú©Ú•ÛŒØ§Ø±...">
                <button id="customer-list-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="customer-list-suggestions"></div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Ù†Ø§Ùˆ</th>
                        <th>Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„</th>
                        <th>Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†</th>
                        <th>Ú©Û†ÛŒ Ù‚Û•Ø±Ø²</th>
                        <th>Ú©Ø±Ø¯Ø§Ø±Û•Ú©Ø§Ù†</th>
                    </tr>
                </thead>
                <tbody id="customers-table-body">
                    <!-- Ù„ÛŒØ³ØªÛŒ Ú©Ú•ÛŒØ§Ø±Û•Ú©Ø§Ù† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                </tbody>
            </table>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ Ú©Û†Ú¯Ø§ -->
        <section id="warehouse-section" class="section hidden">
            <h2 class="section-title">Ú©Û†Ú¯Ø§</h2>
            
            <button class="btn btn-primary" id="add-product-btn">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§ÛŒ Ù†ÙˆÛ</button>

            <div class="search-box">
                <input type="text" id="warehouse-search" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ú©Ø§ÚµØ§...">
                <button id="warehouse-search-btn">Ú¯Û•Ú•Ø§Ù†</button>
                <div class="suggestions hidden" id="warehouse-suggestions"></div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Ù†Ø§Ùˆ</th>
                        <th>Ø¨Ø§Ø±Ú©Û†Ø¯</th>
                        <th>Ù†Ø±Ø®ÛŒ Ú©Ú•ÛŒÙ†</th>
                        <th>Ù†Ø±Ø®ÛŒ ÙØ±Û†Ø´ØªÙ†</th>
                        <th>Ø¨Ú•</th>
                        <th>Ú©Ø±Ø¯Ø§Ø±Û•Ú©Ø§Ù†</th>
                    </tr>
                </thead>
                <tbody id="warehouse-table-body">
                    <!-- Ù„ÛŒØ³ØªÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù†ÛŒ Ú©Û†Ú¯Ø§ Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                </tbody>
            </table>
        </section>

        <!-- Ø¨Û•Ø´ÛŒ Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù† -->
        <section id="settings-section" class="section hidden">
            <h2 class="section-title">Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù†</h2>
            
            <div class="tabs">
                <div class="tab active" data-tab="backup">Ø¨Ø§Ú©Û•Ù¾</div>
                <div class="tab" data-tab="expenses">Ø³Û•Ø±ÙÛ•Ú©Ø§Ù†</div>
                <div class="tab" data-tab="currency">Ù¾Ø§Ø±Û• Ú¯Û†Ú•ÛŒÙ†</div>
            </div>

            <div class="tab-content active" id="backup-tab">
                <h3>Ø¨Ø§Ú©Û•Ù¾ Ùˆ Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•</h3>
                <button class="btn btn-primary" id="backup-btn">ÙˆÛ•Ø±Ú¯Ø±ØªÙ†ÛŒ Ø¨Ø§Ú©Û•Ù¾</button>
                <div class="form-group">
                    <label for="restore-file">Ù‡Û•ÚµÚ¯Ø±ØªÙ†ÛŒ ÙØ§ÛŒÙ„ÛÚ©ÛŒ Ø¨Ø§Ú©Û•Ù¾</label>
                    <input type="file" id="restore-file" accept=".json">
                </div>
                <button class="btn btn-success" id="restore-btn">Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¨Ø§Ú©Û•Ù¾</button>
            </div>

            <div class="tab-content" id="expenses-tab">
                <h3>Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±ÙÛ•Ú©Ø§Ù†</h3>
                <button class="btn btn-primary" id="add-expense-btn">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±Ù</button>
                
                <table>
                    <thead>
                        <tr>
                            <th>Ø¨Ú•</th>
                            <th>Ù‡Û†Ú©Ø§Ø±</th>
                            <th>Ú©Ø§Øª</th>
                            <th>Ú©Ø±Ø¯Ø§Ø±Û•Ú©Ø§Ù†</th>
                        </tr>
                    </thead>
                    <tbody id="expenses-table-body">
                        <!-- Ù„ÛŒØ³ØªÛŒ Ø³Û•Ø±ÙÛ•Ú©Ø§Ù† Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛÙ†Û•Ø±Û•ÙˆÛ• -->
                    </tbody>
                </table>
            </div>

            <div class="tab-content" id="currency-tab">
                <h3>Ù¾Ø§Ø±Û• Ú¯Û†Ú•ÛŒÙ†</h3>
                <div class="form-group">
                    <label for="currency-rate">Ù†Ø±Ø®ÛŒ Ø¯Û†Ù„Ø§Ø± Ø¨Û• Ø¯ÛŒÙ†Ø§Ø±</label>
                    <input type="number" id="currency-rate" step="0.01" min="1" value="1450">
                </div>
                <button class="btn btn-primary" id="save-currency-btn">Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†</button>
            </div>
        </section>
    </main>

    <!-- Ù…Û†Ø¯Ø§Ù„ Ø¨Û† Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ ÙˆÛ•Ø³Úµ -->
    <div class="modal" id="receipt-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ÙˆÛ•Ø³ÚµÛŒ ÙØ±Û†Ø´ØªÙ†</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="receipt-content">
                <!-- Ù†Ø§ÙˆÛ•Ú•Û†Ú©ÛŒ ÙˆÛ•Ø³Úµ Ù„ÛØ±Û• Ø¯Û•Ø®Ø±ÛØªÛ•ÙˆÛ• -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-primary" id="print-receipt-btn">Ú†Ø§Ù¾Ú©Ø±Ø¯Ù†</button>
                <button class="btn btn-danger" id="close-receipt-btn">Ø¯Ø§Ø®Ø³ØªÙ†</button>
            </div>
        </div>
    </div>

    <!-- Ù…Û†Ø¯Ø§Ù„ Ø¨Û† Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§ -->
    <div class="modal" id="add-product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§ÛŒ Ù†ÙˆÛ</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-product-form">
                <div class="form-group">
                    <label for="product-name">Ù†Ø§ÙˆÛŒ Ú©Ø§ÚµØ§</label>
                    <input type="text" id="product-name" required>
                </div>
                <div class="form-group">
                    <label for="product-barcode">Ø¨Ø§Ø±Ú©Û†Ø¯</label>
                    <input type="text" id="product-barcode" required>
                </div>
                <div class="form-group">
                    <label for="product-buy-price">Ù†Ø±Ø®ÛŒ Ú©Ú•ÛŒÙ†</label>
                    <input type="number" id="product-buy-price" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="product-sell-price">Ù†Ø±Ø®ÛŒ ÙØ±Û†Ø´ØªÙ†</label>
                    <input type="number" id="product-sell-price" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="product-quantity">Ø¨Ú•</label>
                    <input type="number" id="product-quantity" min="0" required>
                </div>
                <div class="form-group">
                    <label for="product-image">ÙˆÛÙ†Û•ÛŒ Ú©Ø§ÚµØ§ (URL)</label>
                    <input type="text" id="product-image">
                </div>
                <button type="submit" class="btn btn-success">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <!-- Ù…Û†Ø¯Ø§Ù„ Ø¨Û† Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±Ù -->
    <div class="modal" id="add-expense-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±Ù</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-expense-form">
                <div class="form-group">
                    <label for="expense-amount">Ø¨Ú•ÛŒ Ø³Û•Ø±Ù</label>
                    <input type="number" id="expense-amount" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="expense-reason">Ù‡Û†Ú©Ø§Ø±ÛŒ Ø³Û•Ø±Ù</label>
                    <textarea id="expense-reason" required></textarea>
                </div>
                <button type="submit" class="btn btn-success">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <!-- Ù…Û†Ø¯Ø§Ù„ Ø¨Û† Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø± -->
    <div class="modal" id="add-customer-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±ÛŒ Ù†ÙˆÛ</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-customer-form">
                <div class="form-group">
                    <label for="customer-name">Ù†Ø§ÙˆÛŒ Ú©Ú•ÛŒØ§Ø±</label>
                    <input type="text" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„</label>
                    <input type="text" id="customer-phone" required>
                </div>
                <div class="form-group">
                    <label for="customer-address">Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†</label>
                    <textarea id="customer-address"></textarea>
                </div>
                <button type="submit" class="btn btn-success">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <!-- Ù…Û†Ø¯Ø§Ù„ Ø¨Û† Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙØ±Û†Ø´ÛŒØ§Ø± -->
    <div class="modal" id="add-supplier-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±ÛŒ Ù†ÙˆÛ</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="add-supplier-form">
                <div class="form-group">
                    <label for="supplier-name">Ù†Ø§ÙˆÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±</label>
                    <input type="text" id="supplier-name" required>
                </div>
                <div class="form-group">
                    <label for="supplier-phone">Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„</label>
                    <input type="text" id="supplier-phone" required>
                </div>
                <div class="form-group">
                    <label for="supplier-address">Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†</label>
                    <textarea id="supplier-address"></textarea>
                </div>
                <button type="submit" class="btn btn-success">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†</button>
            </form>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Ø³ÛŒØ³ØªÛ•Ù…ÛŒ ÙØ±Û†Ø´Ú¯Ø§ &copy; 2023</p>
        </div>
    </footer>

    <script>
        // Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ• Ø¨Ù†Û•Ú•Û•ØªÛŒÛŒÛ•Ú©Ø§Ù†
        const SYSTEM_PASSWORD = 'farzad1234';
        let currentTheme = 'light';
        let isLoggedIn = false;
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let customers = JSON.parse(localStorage.getItem('customers')) || [];
        let suppliers = JSON.parse(localStorage.getItem('suppliers')) || [];
        let sales = JSON.parse(localStorage.getItem('sales')) || [];
        let purchases = JSON.parse(localStorage.getItem('purchases')) || [];
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        let cart = [];
        let currencyRate = parseFloat(localStorage.getItem('currencyRate')) || 1450;
        let currentCustomer = null;
        let currentSupplier = null;
        let scanner = null;

        // DOM Elements
        const themeToggle = document.getElementById('theme-toggle');
        const loginBtn = document.getElementById('login-btn');
        const passwordInput = document.getElementById('password-input');
        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('nav a');

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û†Ú•ÛŒÙ†ÛŒ Ú•Û•Ù†Ú¯
        themeToggle.addEventListener('click', toggleTheme);

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø³ÛŒØ³ØªÙ…Û•Ú©Û•
        loginBtn.addEventListener('click', login);

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ù„ÛŒØ³ØªÛ•ÛŒ Ú¯Û•Ø´Û•Ú©Ø±Ø¯Ù†
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                if (!isLoggedIn) {
                    alert('ØªÚ©Ø§ÛŒÛ• ÛŒÛ•Ú©Û•Ù… Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•!');
                    return;
                }
                const sectionId = link.getAttribute('data-section') + '-section';
                showSection(sectionId);
                
                // Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¯Ø§ØªØ§ÛŒ Ù¾ÛÙˆÛŒØ³Øª Ø¨Û† Ù‡Û•Ø± Ø¨Û•Ø´ÛÚ©
                if (sectionId === 'dashboard-section') {
                    loadDashboardData();
                } else if (sectionId === 'products-section') {
                    loadProducts();
                } else if (sectionId === 'sales-section') {
                    loadSalesSection();
                } else if (sectionId === 'purchases-section') {
                    loadPurchasesSection();
                } else if (sectionId === 'customers-section') {
                    loadCustomers();
                } else if (sectionId === 'warehouse-section') {
                    loadWarehouse();
                } else if (sectionId === 'settings-section') {
                    loadSettings();
                }
            });
        });

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú†ÙˆÙˆÙ†Û•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•
        function login() {
            if (passwordInput.value === SYSTEM_PASSWORD) {
                isLoggedIn = true;
                passwordInput.value = '';
                alert('Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ú†ÙˆÙˆÛŒØªÛ•Ú˜ÙˆÙˆØ±Û•ÙˆÛ•!');
                showSection('dashboard-section');
                loadDashboardData();
            } else {
                alert('Ù¾Ø§Ø³Û†Ø±Ø¯ Ù‡Û•ÚµÛ•Û•!');
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú¯Û†Ú•ÛŒÙ†ÛŒ Ú•Û•Ù†Ú¯
        function toggleTheme() {
            if (currentTheme === 'light') {
                document.documentElement.setAttribute('data-theme', 'dark');
                currentTheme = 'dark';
                themeToggle.textContent = 'â˜€ï¸';
            } else {
                document.documentElement.removeAttribute('data-theme');
                currentTheme = 'light';
                themeToggle.textContent = 'ğŸŒ™';
            }
            localStorage.setItem('theme', currentTheme);
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ Ø¨Û•Ø´
        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¯Ø§ØªØ§Ú©Ø§Ù†ÛŒ Ø¯Ø§Ø´Ø¨Û†Ø±Ø¯
        function loadDashboardData() {
            const totalSales = sales.reduce((total, sale) => total + sale.total, 0);
            const totalPurchases = purchases.reduce((total, purchase) => total + (purchase.price * purchase.quantity), 0);
            const totalExpenses = expenses.reduce((total, expense) => total + expense.amount, 0);
            const totalBalance = totalSales - totalPurchases - totalExpenses;

            document.getElementById('total-sales').textContent = totalSales.toLocaleString() + ' Ø¯ÛŒÙ†Ø§Ø±';
            document.getElementById('total-purchases').textContent = totalPurchases.toLocaleString() + ' Ø¯ÛŒÙ†Ø§Ø±';
            document.getElementById('total-expenses').textContent = totalExpenses.toLocaleString() + ' Ø¯ÛŒÙ†Ø§Ø±';
            document.getElementById('total-balance').textContent = totalBalance.toLocaleString() + ' Ø¯ÛŒÙ†Ø§Ø±';
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù†
        function loadProducts() {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = '<p>Ù‡ÛŒÚ† Ú©Ø§ÚµØ§ÛŒÛ•Ú© Ø¨ÙˆÙˆÙ†ÛŒ Ù†ÛŒÛŒÛ•.</p>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image || 'https://via.placeholder.com/250x150?text=No+Image'}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">${product.sellPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="addToCart(${product.id})">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† Ø¨Û† Ø³Û•Ø¨Û•ØªÛ•</button>
                        </div>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù† Ùˆ Ù¾ÛØ´Ù†ÛŒØ§Ø±
            setupSearch('product-search', 'product-suggestions', products, 'name', (product) => {
                document.getElementById('products-grid').innerHTML = '';
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image || 'https://via.placeholder.com/250x150?text=No+Image'}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">${product.sellPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="addToCart(${product.id})">Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† Ø¨Û† Ø³Û•Ø¨Û•ØªÛ•</button>
                        </div>
                    </div>
                `;
                document.getElementById('products-grid').appendChild(productCard);
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´ÛŒ ÙØ±Û†Ø´ØªÙ†
        function loadSalesSection() {
            loadSalesHistory();
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±
            setupSearch('customer-search', 'customer-suggestions', customers, 'name', (customer) => {
                currentCustomer = customer;
                document.getElementById('customer-search').value = customer.name;
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø¯ÙˆÚ¯Ù…Û•Ú©Ø§Ù†ÛŒ Ù¾Ø§Ø±Û•Ø¯Ø§Ù†
            document.getElementById('cash-payment').addEventListener('click', () => processPayment('cash'));
            document.getElementById('credit-payment').addEventListener('click', () => processPayment('credit'));
            
            updateCart();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ù…ÛÚ˜ÙˆÙˆÛŒ ÙØ±Û†Ø´ØªÙ†
        function loadSalesHistory() {
            const salesHistoryBody = document.getElementById('sales-history-body');
            salesHistoryBody.innerHTML = '';
            
            if (sales.length === 0) {
                salesHistoryBody.innerHTML = '<tr><td colspan="6">Ù‡ÛŒÚ† ÙØ±Û†Ø´ØªÙ†ÛÚ©ÛŒ ØªÛ†Ù…Ø§Ø±Ù†Û•Ú©Ø±Ø§ÙˆÛ•.</td></tr>';
                return;
            }
            
            sales.forEach(sale => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${sale.id}</td>
                    <td>${sale.customer ? sale.customer.name : 'Ù†Û•Ø²Ø§Ù†Ø±Ø§Ùˆ'}</td>
                    <td>${sale.total.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${sale.paymentType === 'cash' ? 'Ù†Û•Ù‚Ø¯ÛŒ' : 'Ù‚Û•Ø±Ø²'}</td>
                    <td>${new Date(sale.date).toLocaleString('ku')}</td>
                    <td>
                        <button class="btn btn-primary" onclick="showReceipt(${sale.id})">Ø¨ÛŒÙ†ÛŒÙ†ÛŒ ÙˆÛ•Ø³Úµ</button>
                        <button class="btn btn-danger" onclick="deleteSale(${sale.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                salesHistoryBody.appendChild(row);
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¨Û•Ø´ÛŒ Ú©Ú•ÛŒÙ†
        function loadPurchasesSection() {
            const purchaseProducts = document.getElementById('purchase-products');
            purchaseProducts.innerHTML = '';
            
            if (products.length === 0) {
                purchaseProducts.innerHTML = '<p>Ù‡ÛŒÚ† Ú©Ø§ÚµØ§ÛŒÛ•Ú© Ø¨ÙˆÙˆÙ†ÛŒ Ù†ÛŒÛŒÛ•.</p>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image || 'https://via.placeholder.com/250x150?text=No+Image'}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">Ù†Ø±Ø®ÛŒ Ú©Ú•ÛŒÙ†: ${product.buyPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="purchaseProduct(${product.id})">Ú©Ú•ÛŒÙ†</button>
                        </div>
                    </div>
                `;
                purchaseProducts.appendChild(productCard);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†ÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±
            setupSearch('supplier-search', 'supplier-suggestions', suppliers, 'name', (supplier) => {
                currentSupplier = supplier;
                document.getElementById('supplier-search').value = supplier.name;
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†ÛŒ Ú©Ø§ÚµØ§
            setupSearch('purchase-search', 'purchase-suggestions', products, 'name', (product) => {
                document.getElementById('purchase-products').innerHTML = '';
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image || 'https://via.placeholder.com/250x150?text=No+Image'}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <div class="product-price">Ù†Ø±Ø®ÛŒ Ú©Ú•ÛŒÙ†: ${product.buyPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="purchaseProduct(${product.id})">Ú©Ú•ÛŒÙ†</button>
                        </div>
                    </div>
                `;
                document.getElementById('purchase-products').appendChild(productCard);
            });
            
            loadPurchaseHistory();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ù…ÛÚ˜ÙˆÙˆÛŒ Ú©Ú•ÛŒÙ†
        function loadPurchaseHistory() {
            const purchaseHistoryBody = document.getElementById('purchase-history-body');
            purchaseHistoryBody.innerHTML = '';
            
            if (purchases.length === 0) {
                purchaseHistoryBody.innerHTML = '<tr><td colspan="7">Ù‡ÛŒÚ† Ú©Ú•ÛŒÙ†ÛÚ©ÛŒ ØªÛ†Ù…Ø§Ø±Ù†Û•Ú©Ø±Ø§ÙˆÛ•.</td></tr>';
                return;
            }
            
            purchases.forEach(purchase => {
                const product = products.find(p => p.id === purchase.productId);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${purchase.id}</td>
                    <td>${product ? product.name : 'Ù†Û•Ø²Ø§Ù†Ø±Ø§Ùˆ'}</td>
                    <td>${purchase.supplier ? purchase.supplier.name : 'Ù†Û•Ø²Ø§Ù†Ø±Ø§Ùˆ'}</td>
                    <td>${purchase.quantity}</td>
                    <td>${purchase.price.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${new Date(purchase.date).toLocaleString('ku')}</td>
                    <td>
                        <button class="btn btn-danger" onclick="deletePurchase(${purchase.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                purchaseHistoryBody.appendChild(row);
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±Û•Ú©Ø§Ù†
        function loadCustomers() {
            const customersTableBody = document.getElementById('customers-table-body');
            customersTableBody.innerHTML = '';
            
            if (customers.length === 0) {
                customersTableBody.innerHTML = '<tr><td colspan="5">Ù‡ÛŒÚ† Ú©Ú•ÛŒØ§Ø±ÛÚ©ÛŒ ØªÛ†Ù…Ø§Ø±Ù†Û•Ú©Ø±Ø§ÙˆÛ•.</td></tr>';
                return;
            }
            
            customers.forEach(customer => {
                const totalDebt = sales
                    .filter(sale => sale.customer && sale.customer.id === customer.id && sale.paymentType === 'credit')
                    .reduce((total, sale) => total + sale.total, 0);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.address || 'Ù†ÛŒÛŒÛ•'}</td>
                    <td>${totalDebt.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>
                        <button class="btn btn-primary" onclick="showCustomerDetails(${customer.id})">Ø¨ÛŒÙ†ÛŒÙ†ÛŒ ÙˆÛ•Ø³Úµ</button>
                        <button class="btn btn-danger" onclick="deleteCustomer(${customer.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                customersTableBody.appendChild(row);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†
            setupSearch('customer-list-search', 'customer-list-suggestions', customers, 'name', (customer) => {
                document.getElementById('customers-table-body').innerHTML = '';
                const totalDebt = sales
                    .filter(sale => sale.customer && sale.customer.id === customer.id && sale.paymentType === 'credit')
                    .reduce((total, sale) => total + sale.total, 0);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.address || 'Ù†ÛŒÛŒÛ•'}</td>
                    <td>${totalDebt.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>
                        <button class="btn btn-primary" onclick="showCustomerDetails(${customer.id})">Ø¨ÛŒÙ†ÛŒÙ†ÛŒ ÙˆÛ•Ø³Úµ</button>
                        <button class="btn btn-danger" onclick="deleteCustomer(${customer.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                document.getElementById('customers-table-body').appendChild(row);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±ÛŒ Ù†ÙˆÛ
            document.getElementById('add-customer-btn').addEventListener('click', () => {
                document.getElementById('add-customer-modal').style.display = 'flex';
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú©Û†Ú¯Ø§
        function loadWarehouse() {
            const warehouseTableBody = document.getElementById('warehouse-table-body');
            warehouseTableBody.innerHTML = '';
            
            if (products.length === 0) {
                warehouseTableBody.innerHTML = '<tr><td colspan="6">Ù‡ÛŒÚ† Ú©Ø§ÚµØ§ÛŒÛ•Ú© Ø¨ÙˆÙˆÙ†ÛŒ Ù†ÛŒÛŒÛ•.</td></tr>';
                return;
            }
            
            products.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.barcode}</td>
                    <td>${product.buyPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${product.sellPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${product.quantity}</td>
                    <td>
                        <button class="btn btn-primary" onclick="editProduct(${product.id})">Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ</button>
                        <button class="btn btn-danger" onclick="deleteProduct(${product.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                warehouseTableBody.appendChild(row);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†
            setupSearch('warehouse-search', 'warehouse-suggestions', products, 'name', (product) => {
                document.getElementById('warehouse-table-body').innerHTML = '';
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.barcode}</td>
                    <td>${product.buyPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${product.sellPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${product.quantity}</td>
                    <td>
                        <button class="btn btn-primary" onclick="editProduct(${product.id})">Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ</button>
                        <button class="btn btn-danger" onclick="deleteProduct(${product.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                document.getElementById('warehouse-table-body').appendChild(row);
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§ÛŒ Ù†ÙˆÛ
            document.getElementById('add-product-btn').addEventListener('click', () => {
                document.getElementById('add-product-modal').style.display = 'flex';
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú•ÛÚ©Ø®Ø³ØªÙ†Û•Ú©Ø§Ù†
        function loadSettings() {
            document.getElementById('currency-rate').value = currencyRate;
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ ØªØ§Ø¨Û•Ú©Ø§Ù†
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù„Ø§Ú©ÛŒ ØªØ§Ø¨Û•Ú©Ø§Ù†
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Ù†ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ Ù†Ø§ÙˆÛ•Ú•Û†Ú©ÛŒ ØªØ§Ø¨ÛŒ Ù‡Û•ÚµØ¨Ú˜ÛØ±Ø¯Ø±Ø§Ùˆ
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabName}-tab`).classList.add('active');
                    
                    // Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø¯Ø§ØªØ§ÛŒ Ù¾ÛÙˆÛŒØ³Øª
                    if (tabName === 'expenses') {
                        loadExpenses();
                    }
                });
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±Ù
            document.getElementById('add-expense-btn').addEventListener('click', () => {
                document.getElementById('add-expense-modal').style.display = 'flex';
            });
            
            // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û• Ú¯Û†Ú•ÛŒÙ†
            document.getElementById('save-currency-btn').addEventListener('click', () => {
                currencyRate = parseFloat(document.getElementById('currency-rate').value);
                localStorage.setItem('currencyRate', currencyRate.toString());
                alert('Ù†Ø±Ø®ÛŒ Ù¾Ø§Ø±Û• Ú¯Û†Ú•ÛŒÙ† Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø§!');
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±ÙÛ•Ú©Ø§Ù†
        function loadExpenses() {
            const expensesTableBody = document.getElementById('expenses-table-body');
            expensesTableBody.innerHTML = '';
            
            if (expenses.length === 0) {
                expensesTableBody.innerHTML = '<tr><td colspan="4">Ù‡ÛŒÚ† Ø³Û•Ø±ÙÛÚ©ÛŒ ØªÛ†Ù…Ø§Ø±Ù†Û•Ú©Ø±Ø§ÙˆÛ•.</td></tr>';
                return;
            }
            
            expenses.forEach(expense => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${expense.amount.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</td>
                    <td>${expense.reason}</td>
                    <td>${new Date(expense.date).toLocaleString('ku')}</td>
                    <td>
                        <button class="btn btn-danger" onclick="deleteExpense(${expense.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </td>
                `;
                expensesTableBody.appendChild(row);
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú•ÛÚ©Ø®Ø³ØªÙ†ÛŒ Ú¯Û•Ú•Ø§Ù† Ùˆ Ù¾ÛØ´Ù†ÛŒØ§Ø±
        function setupSearch(inputId, suggestionsId, data, property, callback) {
            const searchInput = document.getElementById(inputId);
            const suggestions = document.getElementById(suggestionsId);
            
            searchInput.addEventListener('input', () => {
                const value = searchInput.value.toLowerCase();
                suggestions.innerHTML = '';
                suggestions.classList.add('hidden');
                
                if (value.length < 2) return;
                
                const filtered = data.filter(item => 
                    item[property].toLowerCase().includes(value)
                );
                
                if (filtered.length > 0) {
                    suggestions.classList.remove('hidden');
                    filtered.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'suggestion-item';
                        div.textContent = item[property];
                        div.addEventListener('click', () => {
                            searchInput.value = item[property];
                            suggestions.classList.add('hidden');
                            callback(item);
                        });
                        suggestions.appendChild(div);
                    });
                }
            });
            
            document.addEventListener('click', (e) => {
                if (!searchInput.contains(e.target) && !suggestions.contains(e.target)) {
                    suggestions.classList.add('hidden');
                }
            });
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§ Ø¨Û† Ø³Û•Ø¨Û•ØªÛ•
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.product.id === productId);
            
            if (existingItem) {
                if (existingItem.quantity < product.quantity) {
                    existingItem.quantity++;
                } else {
                    alert('Ø¨Ú•ÛŒ Ø¦Û•Ù… Ú©Ø§ÚµØ§ÛŒÛ• Ù„Û• Ú©Û†Ú¯Ø§Ø¯Ø§ Ù†ÛŒÛŒÛ•!');
                }
            } else {
                if (product.quantity > 0) {
                    cart.push({
                        product: product,
                        quantity: 1
                    });
                } else {
                    alert('Ø¨Ú•ÛŒ Ø¦Û•Ù… Ú©Ø§ÚµØ§ÛŒÛ• Ù„Û• Ú©Û†Ú¯Ø§Ø¯Ø§ Ù†ÛŒÛŒÛ•!');
                }
            }
            
            updateCart();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù†ÙˆÛÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø³Û•Ø¨Û•ØªÛ•
        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const cartTotalAmount = document.getElementById('cart-total-amount');
            
            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
                cartTotalAmount.textContent = '0 Ø¯ÛŒÙ†Ø§Ø±';
                return;
            }
            
            emptyCartMessage.classList.add('hidden');
            cartItems.innerHTML = '';
            
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.product.sellPrice * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-info">
                        <h4>${item.product.name}</h4>
                        <p>Ù†Ø±Ø®: ${item.product.sellPrice.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</p>
                        <p>Ú©Û†ÛŒ: ${itemTotal.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</p>
                    </div>
                    <div class="cart-item-actions">
                        <div class="quantity-control">
                            <button onclick="decreaseQuantity(${item.product.id})">-</button>
                            <input type="number" value="${item.quantity}" min="1" max="${item.product.quantity}" onchange="changeQuantity(${item.product.id}, this.value)">
                            <button onclick="increaseQuantity(${item.product.id})">+</button>
                        </div>
                        <button class="btn btn-danger" onclick="removeFromCart(${item.product.id})">Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            cartTotalAmount.textContent = total.toLocaleString() + ' Ø¯ÛŒÙ†Ø§Ø±';
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú©Û•Ù…Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¨Ú•ÛŒ Ú©Ø§ÚµØ§ Ù„Û• Ø³Û•Ø¨Û•ØªÛ•
        function decreaseQuantity(productId) {
            const item = cart.find(item => item.product.id === productId);
            if (item && item.quantity > 1) {
                item.quantity--;
                updateCart();
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Ú•ÛŒ Ú©Ø§ÚµØ§ Ù„Û• Ø³Û•Ø¨Û•ØªÛ•
        function increaseQuantity(productId) {
            const item = cart.find(item => item.product.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (item && product && item.quantity < product.quantity) {
                item.quantity++;
                updateCart();
            } else {
                alert('Ø¨Ú•ÛŒ Ø¦Û•Ù… Ú©Ø§ÚµØ§ÛŒÛ• Ù„Û• Ú©Û†Ú¯Ø§Ø¯Ø§ Ù†ÛŒÛŒÛ•!');
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú¯Û†Ú•ÛŒÙ†ÛŒ Ø¨Ú•ÛŒ Ú©Ø§ÚµØ§ Ù„Û• Ø³Û•Ø¨Û•ØªÛ•
        function changeQuantity(productId, newQuantity) {
            const item = cart.find(item => item.product.id === productId);
            const product = products.find(p => p.id === productId);
            const quantity = parseInt(newQuantity);
            
            if (item && product && quantity > 0 && quantity <= product.quantity) {
                item.quantity = quantity;
                updateCart();
            } else {
                alert('Ø¨Ú•ÛŒ Ø¦Û•Ù… Ú©Ø§ÚµØ§ÛŒÛ• Ù„Û• Ú©Û†Ú¯Ø§Ø¯Ø§ Ù†ÛŒÛŒÛ•!');
                if (item) {
                    item.quantity = 1;
                    updateCart();
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Ø§ÚµØ§ Ù„Û• Ø³Û•Ø¨Û•ØªÛ•
        function removeFromCart(productId) {
            cart = cart.filter(item => item.product.id !== productId);
            updateCart();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù¾Ú•Û†Ø³Û•Ú©Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ø±Û•Ø¯Ø§Ù†
        function processPayment(paymentType) {
            if (cart.length === 0) {
                alert('Ø³Û•Ø¨Û•ØªÛ• Ø¨Û•ØªØ§ÚµÛ•!');
                return;
            }
            
            if (paymentType === 'credit' && !currentCustomer) {
                alert('ØªÚ©Ø§ÛŒÛ• ÛŒÛ•Ú©Û•Ù… Ú©Ú•ÛŒØ§Ø± Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!');
                return;
            }
            
            const sale = {
                id: Date.now(),
                items: [...cart],
                total: cart.reduce((total, item) => total + (item.product.sellPrice * item.quantity), 0),
                paymentType: paymentType,
                customer: currentCustomer,
                date: new Date().toISOString()
            };
            
            // Ù†ÙˆÛÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¨Ú•ÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù† Ù„Û• Ú©Û†Ú¯Ø§
            cart.forEach(item => {
                const product = products.find(p => p.id === item.product.id);
                if (product) {
                    product.quantity -= item.quantity;
                }
            });
            
            sales.push(sale);
            saveData();
            
            // Ù¾Ø§Ú©Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø³Û•Ø¨Û•ØªÛ•
            cart = [];
            updateCart();
            currentCustomer = null;
            document.getElementById('customer-search').value = '';
            
            alert('ÙØ±Û†Ø´ØªÙ† Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ ØªÛ•ÙˆØ§ÙˆØ¨ÙˆÙˆ!');
            showReceipt(sale.id);
            loadSalesHistory();
            loadDashboardData();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ ÙˆÛ•Ø³Úµ
        function showReceipt(saleId) {
            const sale = sales.find(s => s.id === saleId);
            if (!sale) return;
            
            const receiptContent = document.getElementById('receipt-content');
            receiptContent.innerHTML = `
                <h4>Ú˜Ù…Ø§Ø±Û•ÛŒ ÙˆÛ•Ø³Úµ: ${sale.id}</h4>
                <p>Ú©Ø§Øª: ${new Date(sale.date).toLocaleString('ku')}</p>
                ${sale.customer ? `<p>Ú©Ú•ÛŒØ§Ø±: ${sale.customer.name}</p>` : ''}
                <p>Ø¬Û†Ø±ÛŒ Ù¾Ø§Ø±Û•Ø¯Ø§Ù†: ${sale.paymentType === 'cash' ? 'Ù†Û•Ù‚Ø¯ÛŒ' : 'Ù‚Û•Ø±Ø²'}</p>
                <hr>
                <h4>Ú©Ø§ÚµØ§Ú©Ø§Ù†:</h4>
                <ul>
                    ${sale.items.map(item => `
                        <li>${item.product.name} - ${item.quantity} x ${item.product.sellPrice.toLocaleString()} = ${(item.quantity * item.product.sellPrice).toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</li>
                    `).join('')}
                </ul>
                <hr>
                <h4>Ú©Û†ÛŒ Ú¯Ø´ØªÛŒ: ${sale.total.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</h4>
            `;
            
            document.getElementById('receipt-modal').style.display = 'flex';
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ ÙØ±Û†Ø´ØªÙ†
        function deleteSale(saleId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… ÙØ±Û†Ø´ØªÙ†Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const saleIndex = sales.findIndex(s => s.id === saleId);
                if (saleIndex !== -1) {
                    // Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•ÛŒ Ú©Ø§ÚµØ§Ú©Ø§Ù† Ø¨Û† Ú©Û†Ú¯Ø§
                    sales[saleIndex].items.forEach(item => {
                        const product = products.find(p => p.id === item.product.id);
                        if (product) {
                            product.quantity += item.quantity;
                        }
                    });
                    
                    sales.splice(saleIndex, 1);
                    saveData();
                    loadSalesHistory();
                    loadDashboardData();
                    alert('ÙØ±Û†Ø´ØªÙ† Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú©Ú•ÛŒÙ†ÛŒ Ú©Ø§ÚµØ§
        function purchaseProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            if (!currentSupplier) {
                alert('ØªÚ©Ø§ÛŒÛ• ÛŒÛ•Ú©Û•Ù… ÙØ±Û†Ø´ÛŒØ§Ø± Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!');
                return;
            }
            
            const quantity = prompt(`Ú†Û•Ù†Ø¯ Ø¨Ú•ÛŒ ${product.name} Ø¯Û•Ú©Ú•ÛŒØªØŸ`, '1');
            const qty = parseInt(quantity);
            
            if (isNaN(qty) || qty <= 0) {
                alert('ØªÚ©Ø§ÛŒÛ• Ø¨Ú•ÛÚ©ÛŒ Ø¯Ø±ÙˆØ³Øª Ø¨Ù†ÙˆÙˆØ³Û•!');
                return;
            }
            
            const purchase = {
                id: Date.now(),
                productId: productId,
                supplier: currentSupplier,
                quantity: qty,
                price: product.buyPrice,
                date: new Date().toISOString()
            };
            
            // Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø¨Ú•ÛŒ Ù†ÙˆÛ Ø¨Û† Ú©Ø§ÚµØ§ Ù„Û• Ú©Û†Ú¯Ø§
            product.quantity += qty;
            
            purchases.push(purchase);
            saveData();
            
            alert('Ú©Ú•ÛŒÙ† Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ ØªÛ•ÙˆØ§ÙˆØ¨ÙˆÙˆ!');
            loadPurchaseHistory();
            loadDashboardData();
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Ú•ÛŒÙ†
        function deletePurchase(purchaseId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ú©Ú•ÛŒÙ†Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const purchaseIndex = purchases.findIndex(p => p.id === purchaseId);
                if (purchaseIndex !== -1) {
                    const purchase = purchases[purchaseIndex];
                    const product = products.find(p => p.id === purchase.productId);
                    
                    if (product) {
                        // Ù„Ø§Ø¨Ø±Ø¯Ù†ÛŒ Ø¨Ú•ÛŒ Ú©Ú•ÛŒÙ† Ù„Û• Ú©Û†Ú¯Ø§
                        product.quantity -= purchase.quantity;
                        if (product.quantity < 0) product.quantity = 0;
                    }
                    
                    purchases.splice(purchaseIndex, 1);
                    saveData();
                    loadPurchaseHistory();
                    loadDashboardData();
                    alert('Ú©Ú•ÛŒÙ† Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±
        function showCustomerDetails(customerId) {
            const customer = customers.find(c => c.id === customerId);
            if (!customer) return;
            
            const customerSales = sales.filter(s => s.customer && s.customer.id === customerId);
            const totalDebt = customerSales
                .filter(s => s.paymentType === 'credit')
                .reduce((total, sale) => total + sale.total, 0);
            
            const receiptContent = document.getElementById('receipt-content');
            receiptContent.innerHTML = `
                <h4>Ø²Ø§Ù†ÛŒØ§Ø±ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±</h4>
                <p>Ù†Ø§Ùˆ: ${customer.name}</p>
                <p>Ú˜Ù…Ø§Ø±Û•ÛŒ Ù…Û†Ø¨Ø§ÛŒÙ„: ${customer.phone}</p>
                <p>Ù†Ø§ÙˆÙ†ÛŒØ´Ø§Ù†: ${customer.address || 'Ù†ÛŒÛŒÛ•'}</p>
                <p>Ú©Û†ÛŒ Ù‚Û•Ø±Ø²: ${totalDebt.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</p>
                <hr>
                <h4>Ù…ÛÚ˜ÙˆÙˆÛŒ ÙØ±Û†Ø´ØªÙ†:</h4>
                <ul>
                    ${customerSales.map(sale => `
                        <li>${new Date(sale.date).toLocaleString('ku')} - ${sale.total.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø± (${sale.paymentType === 'cash' ? 'Ù†Û•Ù‚Ø¯ÛŒ' : 'Ù‚Û•Ø±Ø²'})</li>
                    `).join('')}
                </ul>
            `;
            
            document.getElementById('receipt-modal').style.display = 'flex';
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Ú•ÛŒØ§Ø±
        function deleteCustomer(customerId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ú©Ú•ÛŒØ§Ø±Û• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const customerIndex = customers.findIndex(c => c.id === customerId);
                if (customerIndex !== -1) {
                    customers.splice(customerIndex, 1);
                    saveData();
                    loadCustomers();
                    alert('Ú©Ú•ÛŒØ§Ø± Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú©Ø§ÚµØ§
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            document.getElementById('product-name').value = product.name;
            document.getElementById('product-barcode').value = product.barcode;
            document.getElementById('product-buy-price').value = product.buyPrice;
            document.getElementById('product-sell-price').value = product.sellPrice;
            document.getElementById('product-quantity').value = product.quantity;
            document.getElementById('product-image').value = product.image || '';
            
            document.getElementById('add-product-modal').style.display = 'flex';
            
            // Ú¯Û†Ú•ÛŒÙ†ÛŒ ÙÛ•Ø±Ù…ÛÚ© Ø¨Û† Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ
            const form = document.getElementById('add-product-form');
            form.onsubmit = (e) => {
                e.preventDefault();
                
                product.name = document.getElementById('product-name').value;
                product.barcode = document.getElementById('product-barcode').value;
                product.buyPrice = parseFloat(document.getElementById('product-buy-price').value);
                product.sellPrice = parseFloat(document.getElementById('product-sell-price').value);
                product.quantity = parseInt(document.getElementById('product-quantity').value);
                product.image = document.getElementById('product-image').value;
                
                saveData();
                loadWarehouse();
                document.getElementById('add-product-modal').style.display = 'none';
                alert('Ú©Ø§ÚµØ§ Ù†ÙˆÛÚ©Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                
                // Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛ•Ø±Ù…Û•Ú©Û• Ø¨Û† Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†
                form.onsubmit = addProduct;
            };
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Ø§ÚµØ§
        function deleteProduct(productId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ú©Ø§ÚµØ§ÛŒÛ• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const productIndex = products.findIndex(p => p.id === productId);
                if (productIndex !== -1) {
                    products.splice(productIndex, 1);
                    saveData();
                    loadWarehouse();
                    alert('Ú©Ø§ÚµØ§ Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø³Û•Ø±Ù
        function deleteExpense(expenseId) {
            if (confirm('Ø¯ÚµÙ†ÛŒØ§ÛŒØª Ø¯Û•ØªÛ•ÙˆÛØª Ø¦Û•Ù… Ø³Û•Ø±ÙÛ• Ø¨Ø³Ú•ÛŒØªÛ•ÙˆÛ•ØŸ')) {
                const expenseIndex = expenses.findIndex(e => e.id === expenseId);
                if (expenseIndex !== -1) {
                    expenses.splice(expenseIndex, 1);
                    saveData();
                    loadExpenses();
                    loadDashboardData();
                    alert('Ø³Û•Ø±Ù Ø³Ú•Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                }
            }
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ÚµØ§
        function addProduct(e) {
            e.preventDefault();
            
            const product = {
                id: Date.now(),
                name: document.getElementById('product-name').value,
                barcode: document.getElementById('product-barcode').value,
                buyPrice: parseFloat(document.getElementById('product-buy-price').value),
                sellPrice: parseFloat(document.getElementById('product-sell-price').value),
                quantity: parseInt(document.getElementById('product-quantity').value),
                image: document.getElementById('product-image').value
            };
            
            products.push(product);
            saveData();
            loadWarehouse();
            document.getElementById('add-product-modal').style.display = 'none';
            document.getElementById('add-product-form').reset();
            alert('Ú©Ø§ÚµØ§ Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!');
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø³Û•Ø±Ù
        function addExpense(e) {
            e.preventDefault();
            
            const expense = {
                id: Date.now(),
                amount: parseFloat(document.getElementById('expense-amount').value),
                reason: document.getElementById('expense-reason').value,
                date: new Date().toISOString()
            };
            
            expenses.push(expense);
            saveData();
            loadExpenses();
            loadDashboardData();
            document.getElementById('add-expense-modal').style.display = 'none';
            document.getElementById('add-expense-form').reset();
            alert('Ø³Û•Ø±Ù Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!');
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ú•ÛŒØ§Ø±
        function addCustomer(e) {
            e.preventDefault();
            
            const customer = {
                id: Date.now(),
                name: document.getElementById('customer-name').value,
                phone: document.getElementById('customer-phone').value,
                address: document.getElementById('customer-address').value
            };
            
            customers.push(customer);
            saveData();
            loadCustomers();
            document.getElementById('add-customer-modal').style.display = 'none';
            document.getElementById('add-customer-form').reset();
            alert('Ú©Ú•ÛŒØ§Ø± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!');
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙØ±Û†Ø´ÛŒØ§Ø±
        function addSupplier(e) {
            e.preventDefault();
            
            const supplier = {
                id: Date.now(),
                name: document.getElementById('supplier-name').value,
                phone: document.getElementById('supplier-phone').value,
                address: document.getElementById('supplier-address').value
            };
            
            suppliers.push(supplier);
            saveData();
            document.getElementById('add-supplier-modal').style.display = 'none';
            document.getElementById('add-supplier-form').reset();
            alert('ÙØ±Û†Ø´ÛŒØ§Ø± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!');
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ù¾Ø§Ø´Û•Ú©Û•ÙˆØªÚ©Ø±Ø¯Ù†ÛŒ Ø¯Ø§ØªØ§
        function saveData() {
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('customers', JSON.stringify(customers));
            localStorage.setItem('suppliers', JSON.stringify(suppliers));
            localStorage.setItem('sales', JSON.stringify(sales));
            localStorage.setItem('purchases', JSON.stringify(purchases));
            localStorage.setItem('expenses', JSON.stringify(expenses));
            localStorage.setItem('currencyRate', currencyRate.toString());
        }

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ø¨Ø§Ú©Û•Ù¾
        document.getElementById('backup-btn').addEventListener('click', () => {
            const data = {
                products,
                customers,
                suppliers,
                sales,
                purchases,
                expenses,
                currencyRate
            };
            
            const dataStr = JSON.stringify(data);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `system-backup-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        });

        // ÙÛ•Ù†Ú©Ø´Ù†ÛŒ Ú¯Û•Ú•Ø§Ù†Ø¯Ù†Û•ÙˆÛ•ÛŒ Ø¨Ø§Ú©Û•Ù¾
        document.getElementById('restore-btn').addEventListener('click', () => {
            const fileInput = document.getElementById('restore-file');
            if (!fileInput.files.length) {
                alert('ØªÚ©Ø§ÛŒÛ• ÛŒÛ•Ú©Û•Ù… ÙØ§ÛŒÙ„ÛÚ© Ù‡Û•ÚµØ¨Ú¯Ø±Û•!');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const backupData = JSON.parse(e.target.result);
                    
                    // Ø¯Ø§ØªØ§Ú©Ø§Ù†ÛŒ Ù¾ÛØ´ÙˆÙˆ Ø¯Û•Ø³Ú•ÛŒÙ†Û•ÙˆÛ• Ùˆ Ø¯Ø§ØªØ§ÛŒ Ù†ÙˆÛ Ø¬ÛÚ¯ÛŒØ± Ø¯Û•Ú©Ø±ÛØª
                    products = backupData.products || [];
                    customers = backupData.customers || [];
                    suppliers = backupData.suppliers || [];
                    sales = backupData.sales || [];
                    purchases = backupData.purchases || [];
                    expenses = backupData.expenses || [];
                    currencyRate = backupData.currencyRate || 1450;
                    
                    saveData();
                    alert('Ø¨Ø§Ú©Û•Ù¾ Ø¨Û• Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆÛŒÛŒ Ú¯Û•Ú•ÛÙ†Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!');
                    location.reload();
                } catch (error) {
                    alert('Ù‡Û•ÚµÛ• Ù„Û• Ø®ÙˆÛÙ†Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙØ§ÛŒÙ„Û•Ú©Û•: ' + error.message);
                }
            };
            
            reader.readAsText(file);
        });

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ ÙÛ•Ø±Ù…Û•Ú©Ø§Ù†
        document.getElementById('add-product-form').addEventListener('submit', addProduct);
        document.getElementById('add-expense-form').addEventListener('submit', addExpense);
        document.getElementById('add-customer-form').addEventListener('submit', addCustomer);
        document.getElementById('add-supplier-form').addEventListener('submit', addSupplier);

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø¯Ø§Ø®Ø³ØªÙ†ÛŒ Ù…Û†Ø¯Ø§Ù„Û•Ú©Ø§Ù†
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.style.display = 'none';
                });
            });
        });

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ú†Ø§Ù¾Ú©Ø±Ø¯Ù†ÛŒ ÙˆÛ•Ø³Úµ
        document.getElementById('print-receipt-btn').addEventListener('click', () => {
            window.print();
        });

        // Ú†Ø§Ù„Ø§Ú©Ú©Ø±Ø¯Ù†ÛŒ Ø¯Ø§Ø®Ø³ØªÙ†ÛŒ ÙˆÛ•Ø³Úµ
        document.getElementById('close-receipt-btn').addEventListener('click', () => {
            document.getElementById('receipt-modal').style.display = 'none';
        });

        // Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ Ú•Û•Ù†Ú¯Û•Ú©Û• Ù„Û• localStorage
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            currentTheme = savedTheme;
            if (currentTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.textContent = 'â˜€ï¸';
            }
        }

        // Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†ÛŒ Ø³ÛŒØ³ØªÙ…Û•Ú©Û•
        if (isLoggedIn) {
            showSection('dashboard-section');
            loadDashboardData();
        }
    </script>
</body>
</html>
