<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستەمی فرۆشتی ئەلکترۆنیات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* هەموو CSS لێرە */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --dark: #212529;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --border-radius: 10px;
            --box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
            direction: rtl;
            overflow-x: hidden;
        }
        
        /* شێوازی پەڕەی چوونەژوورەوە */
        #loginPage {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            padding: 20px;
            animation: gradientBG 10s ease infinite;
            background-size: 400% 400%;
        }
        
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .login-container {
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }
        
        .login-box {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 40px 30px;
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.8s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header .logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .login-header h2 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .login-header p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .login-form {
            margin-top: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .input-group.remember {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .input-group.remember input {
            width: auto;
            margin-left: 10px;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .login-btn:hover {
            background: linear-gradient(to right, var(--primary-dark), #6310a3);
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.15);
        }
        
        .login-btn i {
            margin-left: 10px;
        }
        
        .login-footer {
            margin-top: 20px;
            text-align: center;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .login-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .login-footer a:hover {
            text-decoration: underline;
        }
        
        .login-animation {
            display: flex;
            justify-content: center;
            margin-top: 30px;
            gap: 15px;
        }
        
        .circle {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: var(--primary);
            animation: bounce 1.5s infinite;
        }
        
        .circle:nth-child(2) {
            animation-delay: 0.2s;
            background-color: var(--secondary);
        }
        
        .circle:nth-child(3) {
            animation-delay: 0.4s;
            background-color: var(--success);
        }
        
        @keyframes bounce {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-15px);
            }
        }
        
        /* شێوازی پەڕەی سەرەکی */
        .container {
            display: flex;
            min-height: 100vh;
            display: none; /* شاردراوە بۆ دەستپێک */
        }
        
        /* بارەگەی لای چەپ - مێنیو */
        .sidebar {
            width: 250px;
            background: linear-gradient(180deg, var(--dark) 0%, #343a40 100%);
            color: white;
            padding: 20px 0;
            transition: var(--transition);
            position: fixed;
            height: 100vh;
            z-index: 100;
            box-shadow: 3px 0 15px rgba(0,0,0,0.1);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(255,255,255,0.1);
        }
        
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        
        .sidebar::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        
        .sidebar::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        
        .sidebar::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        .sidebar.collapsed {
            transform: translateX(-250px);
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .sidebar-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .close-sidebar {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
        }
        
        .nav-menu {
            list-style: none;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: var(--transition);
            border-right: 3px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            background-color: rgba(255,255,255,0.1);
            color: white;
            border-right-color: var(--primary);
        }
        
        .nav-link i {
            margin-left: 10px;
            font-size: 1.2rem;
            width: 25px;
        }
        
        /* بەشی سەرەوە */
        .header {
            height: 70px;
            background-color: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            padding: 0 30px;
            position: fixed;
            top: 0;
            right: 0;
            left: 250px;
            z-index: 99;
            transition: var(--transition);
        }
        
        .header.collapsed {
            left: 0;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
            margin-left: 20px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .header-center {
            flex: 1;
            text-align: center;
        }
        
        .header-center h1 {
            font-size: 1.5rem;
            color: var(--dark);
        }
        
        .header-right {
            display: flex;
            align-items: center;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            background-color: var(--gray-light);
            padding: 8px 15px;
            border-radius: 30px;
            margin-left: 15px;
        }
        
        .user-info i {
            margin-left: 8px;
            color: var(--primary);
            font-size: 1.3rem;
        }
        
        .logout-btn {
            background-color: var(--danger);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .logout-btn:hover {
            background-color: #e11575;
        }
        
        /* بەشی ناوەڕاست */
        .main-content {
            flex: 1;
            padding: 100px 30px 30px;
            margin-right: 250px;
            transition: var(--transition);
            background-color: #f5f7fa;
            min-height: 100vh;
            overflow-y: auto;
            height: calc(100vh - 70px);
            margin-top: 70px;
        }
        
        .main-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .main-content::-webkit-scrollbar-track {
            background: var(--gray-light);
            border-radius: 10px;
        }
        
        .main-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }
        
        .main-content::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        .main-content.collapsed {
            margin-right: 0;
        }
        
        /* بەشەکانی ناوەڕاست */
        .content-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .content-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* کارتەکانی داشبۆرد */
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--dark);
            position: relative;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 3px;
        }
        
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.12);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: white;
        }
        
        .card-1 .card-icon { background-color: var(--primary); }
        .card-2 .card-icon { background-color: var(--success); }
        .card-3 .card-icon { background-color: var(--warning); }
        .card-4 .card-icon { background-color: var(--danger); }
        .card-5 .card-icon { background-color: var(--secondary); }
        .card-6 .card-icon { background-color: var(--info); }
        .card-7 .card-icon { background-color: #9d4edd; }
        
        .card h3 {
            font-size: 1.1rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .card-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .card-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        
        .card-change.positive {
            color: #28a745;
        }
        
        .card-change.negative {
            color: var(--danger);
        }
        
        /* رەنگەکانی بڕی پارە بەپێی جۆری قەرز */
        .item-value.debt-positive {
            color: #f72585; /* سۆر - کاتێ کەس قەرزداری منە */
            font-weight: 600;
        }
        
        .item-value.debt-negative {
            color: #212529; /* رەش - کاتێ من قەرزداری شەریکم */
            font-weight: 600;
        }
        
        .item-value.debt-zero {
            color: #6c757d; /* خۆڵەمێشی - بێ قەرز */
            font-weight: 600;
        }
        
        .item-value.debt-payment {
            color: #28a745; /* سەوز - پارەواسڵکردن */
            font-weight: 600;
        }
        
        .item-value.debt-expense {
            color: #f8961e; /* پرتەقاڵی - سەرفکردن */
            font-weight: 600;
        }
        
        /* لیستەکان */
        .lists-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .list-box {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .list-header h3 {
            font-size: 1.3rem;
            color: var(--dark);
        }
        
        .list-actions button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            margin-left: 10px;
        }
        
        .list-actions button:hover {
            background-color: var(--primary-dark);
        }
        
        .list-items {
            list-style: none;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .list-item {
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .list-item:hover {
            background-color: var(--gray-light);
        }
        
        .item-name {
            font-weight: 500;
            color: var(--dark);
        }
        
        .item-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        /* بەشی فرۆشتن و کڕین */
        .sale-purchase-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .tab-btn {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            font-weight: 500;
            position: relative;
        }
        
        .tab-btn.active {
            color: var(--primary);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .search-container {
            margin-bottom: 25px;
        }
        
        .search-box {
            position: relative;
            max-width: 500px;
        }
        
        .search-box input {
            width: 100%;
            padding: 15px 50px 15px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .suggestions {
            position: absolute;
            top: 100%;
            right: 0;
            left: 0;
            background-color: white;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            z-index: 10;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid var(--gray-light);
        }
        
        .suggestion-item:hover {
            background-color: var(--gray-light);
        }
        
        .suggestion-item:last-child {
            border-bottom: none;
        }
        
        .cart-container {
            background-color: var(--gray-light);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .cart-items {
            list-style: none;
            max-height: 250px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: white;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        
        .cart-item-info {
            display: flex;
            align-items: center;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            background-color: var(--primary);
            margin-left: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .payment-options {
            display: flex;
            margin-top: 20px;
            gap: 15px;
        }
        
        .payment-option {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--gray-light);
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-option.selected {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .action-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn i {
            margin-left: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #3ab8e0;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #e11575;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #e68905;
        }
        
        /* بەشی مخزن */
        .inventory-tabs {
            display: flex;
            margin-bottom: 30px;
        }
        
        .inventory-tab {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            font-weight: 500;
            position: relative;
        }
        
        .inventory-tab.active {
            color: var(--primary);
        }
        
        .inventory-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .inventory-content {
            display: none;
        }
        
        .inventory-content.active {
            display: block;
        }
        
        .item-form {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-light);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        /* بەشی پارەواسڵکردن */
        .payment-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        /* مۆدالی پرێنت */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .invoice {
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        .invoice-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 20px;
        }
        
        .invoice-logo {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .invoice-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .invoice-table th, .invoice-table td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--gray-light);
        }
        
        .invoice-table th {
            background-color: var(--gray-light);
            font-weight: 600;
        }
        
        .invoice-total {
            text-align: left;
            margin-top: 30px;
            font-size: 1.2rem;
        }
        
        .print-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        /* مۆدالی کارگێڕی فاکتوور */
        .print-option-card {
            border: 2px solid var(--primary);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            transition: var(--transition);
        }
        
        .print-option-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--box-shadow);
        }
        
        .alert {
            background-color: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        
        /* وەڵامی مۆبایل */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-250px);
                box-shadow: none;
            }
            
            .sidebar.active {
                transform: translateX(0);
                box-shadow: 3px 0 15px rgba(0,0,0,0.1);
            }
            
            .header {
                left: 0;
            }
            
            .main-content {
                margin-right: 0;
            }
            
            .close-sidebar {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-cards {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .lists-container {
                grid-template-columns: 1fr;
            }
            
            .payment-options {
                flex-direction: column;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .invoice-details {
                grid-template-columns: 1fr;
            }
        }
        
        /* بۆستەی بچووک بۆ بەکارهێنان لە لیستەکان */
        .btn-sm {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        /* خانەی تایبەتی */
        input[readonly] {
            background-color: var(--gray-light);
            cursor: not-allowed;
        }
        
        /* پێشبینینی پرێنت */
        .print-preview {
            border: 1px solid #ddd;
            padding: 20px;
            margin-top: 20px;
            background-color: white;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <!-- پەڕەی چوونەژوورەوە -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="logo">الکترۆنیات</div>
                <h2>سیستەمی فرۆشتی ئەلکترۆنیات</h2>
                <p>تکایە ناوی بەکارهێنەر و وشەی نهێنی داخڵ بکە</p>
            </div>
            
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <label for="username"><i class="fas fa-user"></i> ناوی بەکارهێنەر</label>
                    <input type="text" id="username" placeholder="ناوی بەکارهێنەر" value="farzad">
                </div>
                
                <div class="input-group">
                    <label for="password"><i class="fas fa-lock"></i> وشەی نهێنی</label>
                    <input type="password" id="password" placeholder="وشەی نهێنی" value="farzad1234">
                </div>
                
                <div class="input-group remember">
                    <input type="checkbox" id="remember" checked>
                    <label for="remember">لەبیرم مەکە</label>
                </div>
                
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> چوونەژوورەوە
                </button>
                
                <div class="login-footer">
                    <p>وشەی نهێنیت لەبیرچووە؟ <a href="#">کلیک لێرە بکە</a></p>
                </div>
            </form>
            
            <div class="login-animation">
                <div class="circle"></div>
                <div class="circle"></div>
                <div class="circle"></div>
            </div>
        </div>
    </div>

    <!-- پەڕەی سەرەکی سیستم -->
    <div id="mainPage" class="container">
        <!-- بارەگەی لای چەپ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>مێنیو</h3>
                <button class="close-sidebar" id="closeSidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        داشبۆرد
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="sales">
                        <i class="fas fa-shopping-cart"></i>
                        فرۆشتن
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="purchase">
                        <i class="fas fa-shopping-bag"></i>
                        کڕین
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="inventory">
                        <i class="fas fa-warehouse"></i>
                        مخزن
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="payment">
                        <i class="fas fa-money-bill-wave"></i>
                        پارەواسڵکردن
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="partnerExpense">
                        <i class="fas fa-hand-holding-usd"></i>
                        سەرف و حیسابی شەریکەکان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="history">
                        <i class="fas fa-history"></i>
                        مێژوو
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="customers">
                        <i class="fas fa-users"></i>
                        کەسەکان
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="partners">
                        <i class="fas fa-handshake"></i>
                        شەریکەکان
                    </a>
                </li>
            </ul>
        </aside>

        <!-- بەشی سەرەوە -->
        <header class="header" id="header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="logo">الکترۆنیات</div>
            </div>
            
            <div class="header-center">
                <h1>سیستەمی فرۆشتی ئەلکترۆنیات</h1>
            </div>
            
            <div class="header-right">
                <div class="user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="currentUser">فەرزاد</span>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> چوونەدەرەوە
                </button>
            </div>
        </header>

        <!-- بەشی ناوەڕاست -->
        <main class="main-content" id="mainContent">
            <!-- داشبۆرد -->
            <section id="dashboardSection" class="content-section active">
                <h2 class="section-title">داشبۆرد</h2>
                
                <div class="dashboard-cards">
                    <div class="card card-1">
                        <div class="card-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <h3>کۆی پارەی واسڵ کراو</h3>
                        <div class="card-value" id="cashBalanceDisplay">٣٬٥٤٠٫٠٠٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i> ١٢٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-2">
                        <div class="card-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>کۆی کڕین</h3>
                        <div class="card-value">١٬٢٣٠٫٠٠٠ <span>دینار</span></div>
                        <div class="card-change negative">
                            <i class="fas fa-arrow-down"></i> ٥٪ کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-3">
                        <div class="card-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <h3>جیاوازی کڕین و واسڵ کراو</h3>
                        <div class="card-value">٢٬٣١٠٫٠٠٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i> ٨٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-4">
                        <div class="card-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3>کۆی کاڵای کەم بوو</h3>
                        <div class="card-value">٢٤ <span>جۆر</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-down"></i> ٣ جۆر کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-5">
                        <div class="card-icon">
                            <i class="fas fa-user-ow"></i>
                        </div>
                        <h3>کۆی پارەی قەرزداران</h3>
                        <div class="card-value">٤٥٠٫٠٠٠ <span>دینار</span></div>
                        <div class="card-change negative">
                            <i class="fas fa-arrow-up"></i> ١٥٪ زیاتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-6">
                        <div class="card-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3>قەرزدارم بە شەریکەکان</h3>
                        <div class="card-value">٧٨٠٫٠٠٠ <span>دینار</span></div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-down"></i> ١٠٪ کەمتر لە هەفتەی ڕابردوو
                        </div>
                    </div>
                    
                    <div class="card card-7">
                        <div class="card-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                        <h3>کۆی سەرفکردن (ئەم مانگە)</h3>
                        <div class="card-value" id="monthlyExpenseTotal">٠ <span>دینار</span></div>
                        <div class="card-change" id="expenseChange">
                            <i class="fas fa-minus"></i> ٠٪ جیاوازی لە مانگی ڕابردوو
                        </div>
                    </div>
                </div>
                
                <div class="lists-container">
                    <div class="list-box">
                        <div class="list-header">
                            <h3>کاڵای کەم بووەکان</h3>
                            <div class="list-actions">
                                <button id="refreshLowStock">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="lowStockList">
                            <!-- داتاکان لە JavaScript دا زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <div class="list-box">
                        <div class="list-header">
                            <h3>قەرزدارانی ئەم هەفتەیە</h3>
                            <div class="list-actions">
                                <button id="refreshDebtors">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="debtorsList">
                            <!-- داتاکان لە JavaScript دا زیاد دەکرێن -->
                        </ul>
                    </div>
                </div>
            </section>

            <!-- بەشی فرۆشتن -->
            <section id="salesSection" class="content-section">
                <h2 class="section-title">فرۆشتن</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="newSale">فرۆشتی نوێ</button>
                        <button class="tab-btn" data-tab="saleHistory">مێژووی فرۆشتن</button>
                    </div>
                    
                    <div class="tab-content active" id="newSale">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="productSearch" placeholder="گەڕان بەدوای ناوی کاڵا...">
                                <i class="fas fa-search"></i>
                                <div class="suggestions" id="productSuggestions"></div>
                            </div>
                        </div>
                        
                        <div class="cart-container">
                            <div class="cart-header">
                                <h3>سەبەتە</h3>
                                <button class="btn btn-danger" id="clearCart">
                                    <i class="fas fa-trash"></i> سڕینەوەی سەبەتە
                                </button>
                            </div>
                            
                            <ul class="cart-items" id="cartItems">
                                <!-- کاڵاکانی سەبەتە لێرە زیاد دەکرێن -->
                                <li class="empty-cart">هیچ کاڵایەک لە سەبەتەدا نییە</li>
                            </ul>
                            
                            <div class="payment-options">
                                <div class="payment-option" data-payment="cash">
                                    <i class="fas fa-money-bill-wave fa-2x"></i>
                                    <h4>نەقدی</h4>
                                    <p>پارەی رەت</p>
                                </div>
                                <div class="payment-option" data-payment="credit">
                                    <i class="fas fa-credit-card fa-2x"></i>
                                    <h4>قەرز</h4>
                                    <p>فرۆشتن بە قەرز</p>
                                </div>
                            </div>
                            
                            <div id="customerSelection" style="display: none; margin-top: 20px;">
                                <div class="search-box">
                                    <input type="text" id="customerSearch" placeholder="گەڕان بەدوای ناوی کەس...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="customerSuggestions"></div>
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-warning" id="printInvoice">
                                    <i class="fas fa-print"></i> پرێنت کردن
                                </button>
                                <button class="btn btn-success" id="completeSale">
                                    <i class="fas fa-check-circle"></i> تەواوکردنی فرۆشتن
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="saleHistory">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="saleHistorySearch" placeholder="گەڕان بە کۆدی فاکتوورە یان ناوی کەس...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>مێژووی فرۆشتن</h3>
                                <div class="list-actions">
                                    <button id="refreshSaleHistory">نوێکردنەوە</button>
                                </div>
                            </div>
                            <ul class="list-items" id="saleHistoryList">
                                <!-- مێژووی فرۆشتن لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی کڕین -->
            <section id="purchaseSection" class="content-section">
                <h2 class="section-title">کڕین</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="newPurchase">کڕینی نوێ</button>
                        <button class="tab-btn" data-tab="purchaseHistory">مێژووی کڕین</button>
                    </div>
                    
                    <div class="tab-content active" id="newPurchase">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="purchaseProductSearch" placeholder="گەڕان بەدوای ناوی کاڵا یان بارکۆد...">
                                <i class="fas fa-search"></i>
                                <div class="suggestions" id="purchaseProductSuggestions"></div>
                            </div>
                        </div>
                        
                        <div class="cart-container">
                            <div class="cart-header">
                                <h3>سەبەتەی کڕین</h3>
                                <button class="btn btn-danger" id="clearPurchaseCart">
                                    <i class="fas fa-trash"></i> سڕینەوەی سەبەتە
                                </button>
                            </div>
                            
                            <ul class="cart-items" id="purchaseCartItems">
                                <li class="empty-cart">هیچ کاڵایەک لە سەبەتەدا نییە</li>
                            </ul>
                            
                            <div class="payment-options">
                                <div class="payment-option" data-payment="cash">
                                    <i class="fas fa-money-bill-wave fa-2x"></i>
                                    <h4>نەقدی</h4>
                                    <p>پارەی رەت</p>
                                </div>
                                <div class="payment-option" data-payment="credit">
                                    <i class="fas fa-credit-card fa-2x"></i>
                                    <h4>قەرز</h4>
                                    <p>کڕین بە قەرز</p>
                                </div>
                            </div>
                            
                            <div id="partnerSelection" style="display: none; margin-top: 20px;">
                                <div class="search-box">
                                    <input type="text" id="partnerSearchPurchase" placeholder="گەڕان بەدوای ناوی شەریک...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="partnerSuggestionsPurchase"></div>
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-warning" id="printPurchaseInvoice">
                                    <i class="fas fa-print"></i> پرێنت کردن
                                </button>
                                <button class="btn btn-success" id="completePurchase">
                                    <i class="fas fa-check-circle"></i> تەواوکردنی کڕین
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="purchaseHistory">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="purchaseHistorySearch" placeholder="گەڕان بە کۆدی فاکتوورە یان ناوی شەریک...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>مێژووی کڕین</h3>
                                <div class="list-actions">
                                    <button id="refreshPurchaseHistory">نوێکردنەوە</button>
                                </div>
                            </div>
                            <ul class="list-items" id="purchaseHistoryList">
                                <!-- مێژووی کڕین لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی مخزن -->
            <section id="inventorySection" class="content-section">
                <h2 class="section-title">مخزن</h2>
                
                <div class="inventory-tabs">
                    <button class="inventory-tab active" data-inventory-tab="products">کاڵاکان</button>
                </div>
                
                <div class="inventory-content active" id="productsTab">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="inventorySearch" placeholder="گەڕان بەدوای ناوی کاڵا...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
                    <div class="list-box" style="margin-bottom: 30px;">
                        <div class="list-header">
                            <h3>لیستی کاڵاکان</h3>
                            <div class="list-actions">
                                <button id="addProductBtn">زیادکردنی کاڵا</button>
                            </div>
                        </div>
                        <ul class="list-items" id="productList">
                            <!-- لیستی کاڵاکان لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <div class="item-form" id="productForm" style="display: none;">
                        <h3 style="margin-bottom: 20px;">زیادکردن/گۆڕانکاری کاڵا</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productImage">وێنەی کاڵا</label>
                                <input type="file" id="productImage" accept="image/*" style="padding: 8px;">
                                <small style="color: var(--gray);">(ئارەزوومەندانە) وێنەی JPG, PNG</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="piecesPerCarton">بڕی پارچە لە کارتۆن</label>
                                <input type="number" id="piecesPerCarton" placeholder="بڕی پارچە لە کارتۆن" value="50">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName">ناوی کاڵا</label>
                                <input type="text" id="productName" placeholder="ناوی کاڵا">
                            </div>
                            
                            <div class="form-group">
                                <label for="productBarcode">بارکۆد (ئارەزوومەندانە)</label>
                                <input type="text" id="productBarcode" placeholder="بارکۆد">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="purchasePrice">نرخی کڕین (پارچە)</label>
                                <input type="number" id="purchasePrice" placeholder="نرخی کڕین">
                            </div>
                            
                            <div class="form-group">
                                <label for="salePrice">نرخی فرۆشتن (پارچە)</label>
                                <input type="number" id="salePrice" placeholder="نرخی فرۆشتن">
                            </div>
                            
                            <div class="form-group">
                                <label for="cartonPrice">نرخی کارتۆن (خۆکار)</label>
                                <input type="number" id="cartonPrice" placeholder="نرخی کارتۆن" readonly style="background-color: #f0f0f0;">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="stockQuantity">بڕی کاڵا</label>
                                <input type="number" id="stockQuantity" placeholder="بڕی کاڵا">
                            </div>
                            
                            <div class="form-group">
                                <label for="primaryUnit">یەکەی سەرەکی</label>
                                <select id="primaryUnit">
                                    <option value="piece">پارچە</option>
                                    <option value="carton">کارتۆن</option>
                                    <option value="unit">دانە</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="secondaryUnit">یەکەی دووەم (ئارەزوومەندانە)</label>
                                <select id="secondaryUnit">
                                    <option value="">هیچ</option>
                                    <option value="piece">پارچە</option>
                                    <option value="carton">کارتۆن</option>
                                    <option value="unit">دانە</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="secondaryUnitQuantity">بڕ لە یەکەی دووەم (ئەگەر هەیە)</label>
                                <input type="number" id="secondaryUnitQuantity" placeholder="بڕ لە یەکەی دووەم">
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-danger" id="cancelProductBtn">پاشگەزبوونەوە</button>
                            <button class="btn btn-success" id="saveProductBtn">هەڵگرتن</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی پارەواسڵکردن -->
            <section id="paymentSection" class="content-section">
                <h2 class="section-title">پارەواسڵکردن و سەرفکردن</h2>
                
                <div class="payment-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="debtPayment">پارەواسڵکردن</button>
                        <button class="tab-btn" data-tab="expense">سەرفکردن</button>
                        <button class="tab-btn" data-tab="paymentHistory">مێژووی پارەواسڵکردن</button>
                    </div>
                    
                    <div class="tab-content active" id="debtPayment">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="debtorSearch" placeholder="گەڕان بەدوای ناوی کەس...">
                                <i class="fas fa-search"></i>
                                <div class="suggestions" id="debtorSuggestions"></div>
                            </div>
                        </div>
                        
                        <div id="debtorInfo" style="display: none; margin-top: 20px;">
                            <div class="list-box">
                                <div class="list-header">
                                    <h3>زانیاری قەرزدار</h3>
                                </div>
                                <div style="padding: 20px;">
                                    <p><strong>ناوی کەس:</strong> <span id="debtorName"></span></p>
                                    <p><strong>کۆی قەرز:</strong> <span id="totalDebtAmount"></span> دینار</p>
                                    <p><strong>کۆی پارەی واسڵ کراو:</strong> <span id="totalPaidAmount"></span> دینار</p>
                                </div>
                            </div>
                            
                            <div class="item-form" style="margin-top: 20px;">
                                <h4>تۆمارکردنی پارەواسڵکردن</h4>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="paymentAmountInput">بڕی پارە</label>
                                        <input type="number" id="paymentAmountInput" placeholder="بڕی پارە بە دینار" min="1">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="paymentDateInput">بەروار</label>
                                        <input type="date" id="paymentDateInput" value="${new Date().toISOString().split('T')[0]}">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="paymentMethodSelect">شێوازی پارەدان</label>
                                        <select id="paymentMethodSelect">
                                            <option value="cash">نەقدی</option>
                                            <option value="transfer">گوازینەوە</option>
                                            <option value="check">چەک</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="paymentNotesInput">تێبینی (ئارەزوومەندانە)</label>
                                    <input type="text" id="paymentNotesInput" placeholder="تێبینی">
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn btn-success" id="submitPaymentBtn">
                                        <i class="fas fa-check-circle"></i> تۆمارکردنی پارەواسڵکردن
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="expense">
                        <div class="item-form">
                            <h4>تۆمارکردنی سەرفکردن</h4>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expenseType">جۆری سەرفکردن</label>
                                    <select id="expenseType">
                                        <option value="partner">شەریکەکان</option>
                                        <option value="customer">کەسەکان</option>
                                        <option value="other">هۆکاری تر</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseAmount">بڕی سەرفکردن</label>
                                    <input type="number" id="expenseAmount" placeholder="بڕی سەرفکردن بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseDate">بەروار</label>
                                    <input type="date" id="expenseDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                            </div>
                            
                            <!-- بەشەکەی شەریکەکان -->
                            <div id="expensePartnerSection" style="display: none;">
                                <div class="search-container">
                                    <div class="search-box">
                                        <input type="text" id="expensePartnerSearch" placeholder="گەڕان بەدوای ناوی شەریک...">
                                        <i class="fas fa-search"></i>
                                        <div class="suggestions" id="expensePartnerSuggestions"></div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="selectedPartnerInfo" style="display: none; margin-top: 15px; padding: 15px; background-color: var(--gray-light); border-radius: var(--border-radius);">
                                    <p><strong>شەریکی هەڵبژێردراو:</strong> <span id="selectedPartnerName"></span></p>
                                    <p><strong>قەرزی ئێستا:</strong> <span id="selectedPartnerDebt"></span> دینار</p>
                                </div>
                            </div>
                            
                            <!-- بەشەکەی کەسەکان -->
                            <div id="expenseCustomerSection" style="display: none;">
                                <div class="search-container">
                                    <div class="search-box">
                                        <input type="text" id="expenseCustomerSearch" placeholder="گەڕان بەدوای ناوی کەس...">
                                        <i class="fas fa-search"></i>
                                        <div class="suggestions" id="expenseCustomerSuggestions"></div>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="selectedCustomerInfo" style="display: none; margin-top: 15px; padding: 15px; background-color: var(--gray-light); border-radius: var(--border-radius);">
                                    <p><strong>کەسی هەڵبژێردراو:</strong> <span id="selectedCustomerName"></span></p>
                                    <p><strong>قەرزی ئێستا:</strong> <span id="selectedCustomerDebt"></span> دینار</p>
                                </div>
                            </div>
                            
                            <!-- بەشەکەی هۆکاری تر -->
                            <div id="expenseOtherSection" style="display: block;">
                                <div class="form-group">
                                    <label for="expenseCategory">پۆلی سەرفکردن</label>
                                    <select id="expenseCategory">
                                        <option value="rent">کرێ</option>
                                        <option value="salary">مووچە</option>
                                        <option value="utility">کەرەستە</option>
                                        <option value="transport">گواستنەوە</option>
                                        <option value="maintenance">چاکسازی</option>
                                        <option value="marketing">بازرگانی</option>
                                        <option value="office">ئۆفیس</option>
                                        <option value="other">هی تر</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseDescription">پێناسە (هۆکاری سەرفکردن)</label>
                                    <input type="text" id="expenseDescription" placeholder="پێناسەی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-success" id="submitExpenseBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن
                                </button>
                            </div>
                        </div>
                        
                        <!-- مێژووی سەرفکردن -->
                        <div class="list-box" style="margin-top: 40px;">
                            <div class="list-header">
                                <h3>مێژووی سەرفکردن</h3>
                                <div class="list-actions">
                                    <button id="refreshExpenseHistory">نوێکردنەوە</button>
                                </div>
                            </div>
                            <ul class="list-items" id="expenseHistoryList">
                                <!-- مێژووی سەرفکردن لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="paymentHistory">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="paymentHistorySearch" placeholder="گەڕان بە ناوی کەس یان کۆدی فاکتوورە...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>مێژووی پارەواسڵکردن</h3>
                                <div class="list-actions">
                                    <button id="refreshPaymentHistory">نوێکردنەوە</button>
                                </div>
                            </div>
                            <ul class="list-items" id="paymentHistoryList">
                                <!-- مێژووی پارەواسڵکردن لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- بەشی سەرف و حیسابی شەریکەکان -->
            <section id="partnerExpenseSection" class="content-section">
                <h2 class="section-title">سەرف و حیسابی شەریکەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="expenseToPartner">سەرف بۆ شەریک</button>
                        <button class="tab-btn" data-tab="expenseToCustomer">سەرف بۆ کەس</button>
                        <button class="tab-btn" data-tab="expenseOther">سەرف بۆ هۆکی تر</button>
                    </div>
                    
                    <!-- بەشی ١: سەرف بۆ شەریک -->
                    <div class="tab-content active" id="expenseToPartner">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ شەریک</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="expensePartnerSearchMain" placeholder="گەڕان بەدوای ناوی شەریک...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="expensePartnerSuggestionsMain"></div>
                                </div>
                            </div>
                            
                            <div id="selectedPartnerInfoMain" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری شەریک</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی شەریک:</strong> <span id="selectedPartnerNameMain"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedPartnerPhoneMain"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> <span id="selectedPartnerDebtMain"></span> دینار</p>
                                        <p><strong>کۆی پارەی واسڵکراو:</strong> <span id="selectedPartnerPaidMain"></span> دینار</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="expenseToPartnerAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="expenseToPartnerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToPartnerDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="expenseToPartnerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToPartnerReason">هۆکاری سەرفکردن (ئارەزوومەندانە)</label>
                                    <input type="text" id="expenseToPartnerReason" placeholder="هۆکی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitExpenseToPartnerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن بۆ شەریک
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٢: سەرف بۆ کەس -->
                    <div class="tab-content" id="expenseToCustomer">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ کەس</h3>
                            
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="expenseCustomerSearchMain" placeholder="گەڕان بەدوای ناوی کەس...">
                                    <i class="fas fa-search"></i>
                                    <div class="suggestions" id="expenseCustomerSuggestionsMain"></div>
                                </div>
                            </div>
                            
                            <div id="selectedCustomerInfoMain" style="display: none; margin-top: 20px;">
                                <div class="list-box">
                                    <div class="list-header">
                                        <h3>زانیاری کەس</h3>
                                    </div>
                                    <div style="padding: 20px;">
                                        <p><strong>ناوی کەس:</strong> <span id="selectedCustomerNameMain"></span></p>
                                        <p><strong>ژمارەی موبایل:</strong> <span id="selectedCustomerPhoneMain"></span></p>
                                        <p><strong>کۆی قەرزی ئێستا:</strong> <span id="selectedCustomerDebtMain"></span> دینار</p>
                                        <p><strong>کۆی پارەی واسڵکراو:</strong> <span id="selectedCustomerPaidMain"></span> دینار</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row" style="margin-top: 30px;">
                                <div class="form-group">
                                    <label for="expenseToCustomerAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="expenseToCustomerAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToCustomerDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="expenseToCustomerDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                                
                                <div class="form-group">
                                    <label for="expenseToCustomerReason">هۆکاری سەرفکردن (ئارەزوومەندانە)</label>
                                    <input type="text" id="expenseToCustomerReason" placeholder="هۆکی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitExpenseToCustomerBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن بۆ کەس
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- بەشی ٣: سەرف بۆ هۆکی تر -->
                    <div class="tab-content" id="expenseOther">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">سەرفکردنی پارە بۆ هۆکی تر</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseAmount">بڕی پارەی سەرفکردن</label>
                                    <input type="number" id="otherExpenseAmount" placeholder="بڕی پارە بە دینار" min="1">
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDate">بەرواری سەرفکردن</label>
                                    <input type="date" id="otherExpenseDate" value="${new Date().toISOString().split('T')[0]}">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="otherExpenseCategory">پۆلی سەرفکردن</label>
                                    <select id="otherExpenseCategory">
                                        <option value="rent">کرێ</option>
                                        <option value="salary">مووچە</option>
                                        <option value="utility">کەرەستە</option>
                                        <option value="transport">گواستنەوە</option>
                                        <option value="maintenance">چاکسازی</option>
                                        <option value="marketing">بازرگانی</option>
                                        <option value="office">ئۆفیس</option>
                                        <option value="other">هی تر</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="otherExpenseDescription">پێناسە (هۆکاری سەرفکردن)</label>
                                    <input type="text" id="otherExpenseDescription" placeholder="پێناسەی سەرفکردن">
                                </div>
                            </div>
                            
                            <div class="action-buttons" style="margin-top: 30px;">
                                <button class="btn btn-success" id="submitOtherExpenseBtn">
                                    <i class="fas fa-check-circle"></i> تۆمارکردنی سەرفکردن
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- لیستی مێژووی سەرفکردن -->
                <div class="list-box" style="margin-top: 40px;">
                    <div class="list-header">
                        <h3>مێژووی سەرفکردن</h3>
                        <div class="list-actions">
                            <button id="refreshExpenseHistoryMain">نوێکردنەوە</button>
                        </div>
                    </div>
                    <ul class="list-items" id="expenseHistoryMainList">
                        <!-- مێژووی سەرفکردن لێرە زیاد دەکرێن -->
                    </ul>
                </div>
            </section>

            <!-- بەشی مێژوو -->
            <section id="historySection" class="content-section">
                <h2 class="section-title">مێژوو</h2>
                <p style="text-align: center; padding: 40px; color: var(--gray);">
                    بەشی مێژوو لێرە دەبێت کە مێژووی هەموو فرۆشتن و کڕین و پارەواسڵکردنەکان تێدا بێت.
                </p>
            </section>
            
            <!-- بەشی کەسەکان -->
            <section id="customersSection" class="content-section">
                <h2 class="section-title">کەسەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="customersList">لیستی کەسەکان</button>
                        <button class="tab-btn" data-tab="addCustomer">زیادکردنی کەس</button>
                    </div>
                    
                    <div class="tab-content active" id="customersList">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="customerSearchMain" placeholder="گەڕان بەدوای ناوی کەس...">
                                <i class="fas fa-search"></i>
                                <div class="suggestions" id="customerSearchSuggestions"></div>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>لیستی کەسەکان</h3>
                                <div class="list-actions">
                                    <button id="refreshCustomers">نوێکردنەوە</button>
                                    <button id="addCustomerBtn">زیادکردنی کەس</button>
                                </div>
                            </div>
                            <ul class="list-items" id="customersMainList">
                                <!-- لیستی کەسەکان لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="addCustomer">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">زیادکردنی کەسی نوێ</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="newCustomerName">ناوی کەس</label>
                                    <input type="text" id="newCustomerName" placeholder="ناوی کەس">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newCustomerPhone">ژمارەی موبایل</label>
                                    <input type="text" id="newCustomerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newCustomerAddress">ناونیشان (ئارەزوومەندانە)</label>
                                    <input type="text" id="newCustomerAddress" placeholder="ناونیشان">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" id="cancelCustomerBtn">پاشگەزبوونەوە</button>
                                <button class="btn btn-success" id="saveCustomerBtn">هەڵگرتن</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- بەشی شەریکەکان -->
            <section id="partnersSection" class="content-section">
                <h2 class="section-title">شەریکەکان</h2>
                
                <div class="sale-purchase-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="partnersList">لیستی شەریکەکان</button>
                        <button class="tab-btn" data-tab="addPartner">زیادکردنی شەریک</button>
                    </div>
                    
                    <div class="tab-content active" id="partnersList">
                        <div class="search-container">
                            <div class="search-box">
                                <input type="text" id="partnerSearch" placeholder="گەڕان بەدوای ناوی شەریک...">
                                <i class="fas fa-search"></i>
                            </div>
                        </div>
                        
                        <div class="list-box" style="margin-top: 20px;">
                            <div class="list-header">
                                <h3>لیستی شەریکەکان</h3>
                                <div class="list-actions">
                                    <button id="refreshPartners">نوێکردنەوە</button>
                                    <button id="addPartnerBtn">زیادکردنی شەریک</button>
                                </div>
                            </div>
                            <ul class="list-items" id="partnersListItems">
                                <!-- لیستی شەریکەکان لێرە زیاد دەکرێن -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="addPartner">
                        <div class="item-form">
                            <h3 style="margin-bottom: 20px;">زیادکردنی شەریکی نوێ</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="newPartnerName">ناوی شەریک</label>
                                    <input type="text" id="newPartnerName" placeholder="ناوی شەریک">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPartnerPhone">ژمارەی موبایل</label>
                                    <input type="text" id="newPartnerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPartnerAddress">ناونیشان (ئارەزوومەندانە)</label>
                                    <input type="text" id="newPartnerAddress" placeholder="ناونیشان">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" id="cancelPartnerBtn">پاشگەزبوونەوە</button>
                                <button class="btn btn-success" id="savePartnerBtn">هەڵگرتن</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- مۆدالی پرێنت -->
    <div class="modal" id="printModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>پرێنتکردنی فاکتوور</h3>
                <button class="modal-close" id="closePrintModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice">
                    <div class="invoice-header">
                        <div class="invoice-logo">الکترۆنیات</div>
                        <h2>فاکتووری فرۆشتن</h2>
                        <p>کۆدی فاکتوورە: <span id="invoiceCode">INV-2023-001</span></p>
                        <p>بەروار: <span id="invoiceDate">٢٠٢٣/١٢/١٥</span></p>
                    </div>
                    
                    <div class="invoice-details">
                        <div>
                            <h4>زانیاری فرۆشەر:</h4>
                            <p>ناوی سیستەم: الکترۆنیات</p>
                            <p>ژمارەی موبایل: ٠٧٧٠١٢٣٤٥٦٧</p>
                            <p>ناونیشان: هەولێر، کوردستان</p>
                        </div>
                        
                        <div>
                            <h4>زانیاری کڕیار:</h4>
                            <p id="customerName">ناوی کڕیار: عەلی محەممەد</p>
                            <p id="customerPhone">ژمارەی موبایل: ٠٧٧٠٧٦٥٤٣٢١</p>
                            <p id="customerAddress">ناونیشان: نەزانراو</p>
                        </div>
                    </div>
                    
                    <table class="invoice-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ناوی کاڵا</th>
                                <th>یەکە</th>
                                <th>بڕ</th>
                                <th>نرخ</th>
                                <th>کۆی گشتی</th>
                            </tr>
                        </thead>
                        <tbody id="invoiceItems">
                            <!-- کاڵاکانی فاکتوور لێرە زیاد دەکرێن -->
                        </tbody>
                    </table>
                    
                    <div class="invoice-total">
                        <p><strong>کۆی گشتی:</strong> <span id="invoiceTotal">٠ دینار</span></p>
                        <p><strong>قەرزی پێشوو:</strong> <span id="previousDebt">٠ دینار</span></p>
                        <p><strong>قەرزی ئێستا:</strong> <span id="currentDebt">٠ دینار</span></p>
                        <p><strong>کۆی قەرزی دوای فرۆشتن:</strong> <span id="totalDebt">٠ دینار</span></p>
                    </div>
                    
                    <div class="print-options">
                        <button class="btn btn-warning" id="printSmall">
                            <i class="fas fa-print"></i> پرێنتی بچووک
                        </button>
                        <button class="btn btn-primary" id="printA4">
                            <i class="fas fa-print"></i> پرێنتی A4
                        </button>
                        <button class="btn btn-danger" id="closeInvoice">
                            <i class="fas fa-times"></i> داخستن
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی بینینی و بەڕێوەبردنی کەس -->
    <div class="modal" id="customerModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>زانیاری کەس: <span id="modalCustomerName">عەلی محەممەد</span></h3>
                <button class="modal-close" id="closeCustomerModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-customer-tab="info">زانیاری کەس</button>
                    <button class="tab-btn" data-customer-tab="debt">پارەواسڵکردن</button>
                    <button class="tab-btn" data-customer-tab="invoices">فاکتوورەکان</button>
                </div>
                
                <div class="tab-content active" id="customerInfoTab">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editCustomerName">ناوی کەس</label>
                            <input type="text" id="editCustomerName" placeholder="ناوی کەس">
                        </div>
                        
                        <div class="form-group">
                            <label for="editCustomerPhone">ژمارەی موبایل</label>
                            <input type="text" id="editCustomerPhone" placeholder="٠٧٧٠١٢٣٤٥٦٧">
                        </div>
                        
                        <div class="form-group">
                            <label for="editCustomerAddress">ناونیشان</label>
                            <input type="text" id="editCustomerAddress" placeholder="ناونیشان">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customerTotalDebt">کۆی قەرز</label>
                            <input type="text" id="customerTotalDebt" readonly style="background-color: var(--gray-light);">
                        </div>
                        
                        <div class="form-group">
                            <label for="customerLastPurchase">کۆتا فرۆشتن</label>
                            <input type="text" id="customerLastPurchase" readonly style="background-color: var(--gray-light);">
                        </div>
                        
                        <div class="form-group">
                            <label for="customerTotalPurchases">کۆی فرۆشتن</label>
                            <input type="text" id="customerTotalPurchases" readonly style="background-color: var(--gray-light);">
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-danger" id="deleteCustomerBtn">
                            <i class="fas fa-trash"></i> سڕینەوەی کەس
                        </button>
                        <button class="btn btn-warning" id="printCustomerInfo">
                            <i class="fas fa-print"></i> پرێنتکردنی زانیاری
                        </button>
                        <button class="btn btn-success" id="saveCustomerChanges">
                            <i class="fas fa-save"></i> هەڵگرتنی گۆڕانکاریەکان
                        </button>
                    </div>
                </div>
                
                <div class="tab-content" id="customerDebtTab">
                    <div class="payment-container">
                        <h4 style="margin-bottom: 20px;">پارەواسڵکردن بۆ کەسەکە</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paymentAmount">بڕی پارە</label>
                                <input type="number" id="paymentAmount" placeholder="بڕی پارە بە دینار">
                            </div>
                            
                            <div class="form-group">
                                <label for="paymentDate">بەروار</label>
                                <input type="date" id="paymentDate">
                            </div>
                            
                            <div class="form-group">
                                <label for="paymentMethod">شێوازی پارەدان</label>
                                <select id="paymentMethod">
                                    <option value="cash">نەقدی</option>
                                    <option value="transfer">گوازینەوە</option>
                                    <option value="check">چەک</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="paymentNotes">تێبینی (ئارەزوومەندانە)</label>
                            <input type="text" id="paymentNotes" placeholder="تێبینی">
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-success" id="submitPaymentBtnModal">
                                <i class="fas fa-check-circle"></i> تۆمارکردنی پارەواسڵکردن
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="customerInvoicesTab">
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" id="customerInvoiceSearch" placeholder="گەڕان بە کۆدی فاکتوورە...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    
                    <div class="list-box" style="margin-top: 20px;">
                        <div class="list-header">
                            <h3>فاکتوورەکانی کەسەکە</h3>
                            <div class="list-actions">
                                <button id="refreshCustomerInvoices">نوێکردنەوە</button>
                            </div>
                        </div>
                        <ul class="list-items" id="customerInvoicesList">
                            <!-- فاکتوورەکانی کەس لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی بینینی فاکتوور -->
    <div class="modal" id="invoiceDetailModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h3>فاکتوور: <span id="modalInvoiceCode">INV-2023-001</span></h3>
                <button class="modal-close" id="closeInvoiceModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="invoice" id="invoiceDetailContent">
                    <!-- نەخشەی فاکتوور لێرە کۆپی دەکرێت -->
                </div>
                
                <div class="print-options" style="margin-top: 30px;">
                    <button class="btn btn-warning" id="printInvoiceSmallDetail">
                        <i class="fas fa-print"></i> پرێنتی بچووک
                    </button>
                    <button class="btn btn-primary" id="printInvoiceA4Detail">
                        <i class="fas fa-print"></i> پرێنتی A4
                    </button>
                    <button class="btn btn-danger" id="deleteInvoiceBtn">
                        <i class="fas fa-trash"></i> سڕینەوەی فاکتوور
                    </button>
                    <button class="btn btn-info" id="editInvoiceBtn">
                        <i class="fas fa-edit"></i> گۆڕانکاری فاکتوور
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- مۆدالی کارگێڕی فاکتوور -->
    <div class="modal" id="manageInvoiceModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>کارگێڕی فاکتوور: <span id="manageInvoiceCode">INV-2023-001</span></h3>
                <button class="modal-close" id="closeManageInvoiceModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-manage-tab="edit">گۆڕانکاری</button>
                    <button class="tab-btn" data-manage-tab="delete">سڕینەوە</button>
                    <button class="tab-btn" data-manage-tab="print">پرێنت کردن</button>
                </div>
                
                <!-- بەشی گۆڕانکاری -->
                <div class="tab-content active" id="editInvoiceTab">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editInvoiceDate">بەروار</label>
                            <input type="date" id="editInvoiceDate">
                        </div>
                        
                        <div class="form-group">
                            <label for="editInvoiceCustomer">کەس</label>
                            <select id="editInvoiceCustomer">
                                <!-- کەسەکان لە JavaScript دا زیاد دەکرێن -->
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="editInvoicePayment">شێوازی پارەدان</label>
                            <select id="editInvoicePayment">
                                <option value="cash">نەقدی</option>
                                <option value="credit">قەرز</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="list-box" style="margin-top: 20px;">
                        <div class="list-header">
                            <h3>کاڵاکانی فاکتوورەکە</h3>
                            <button class="btn btn-sm btn-primary" id="addItemToInvoiceBtn">
                                <i class="fas fa-plus"></i> زیادکردنی کاڵا
                            </button>
                        </div>
                        <ul class="list-items" id="editInvoiceItemsList">
                            <!-- کاڵاکانی فاکتوور لێرە زیاد دەکرێن -->
                        </ul>
                    </div>
                    
                    <div class="form-row" style="margin-top: 20px;">
                        <div class="form-group">
                            <label>کۆی گشتی</label>
                            <input type="number" id="editInvoiceTotal" readonly style="background-color: var(--gray-light); font-size: 1.2rem; font-weight: bold;">
                        </div>
                        
                        <div class="form-group">
                            <label for="editInvoiceNotes">تێبینی</label>
                            <input type="text" id="editInvoiceNotes" placeholder="تێبینی">
                        </div>
                    </div>
                    
                    <div class="action-buttons" style="margin-top: 30px;">
                        <button class="btn btn-danger" id="cancelEditInvoiceBtn">
                            <i class="fas fa-times"></i> پاشگەزبوونەوە
                        </button>
                        <button class="btn btn-success" id="saveInvoiceChangesBtn">
                            <i class="fas fa-save"></i> هەڵگرتنی گۆڕانکاریەکان
                        </button>
                    </div>
                </div>
                
                <!-- بەشی سڕینەوە -->
                <div class="tab-content" id="deleteInvoiceTab">
                    <div class="alert">
                        <h4><i class="fas fa-exclamation-triangle"></i> ئاگاداری!</h4>
                        <p>سڕینەوەی فاکتوور کارێکی ناگەڕێنەرەوەیە. دڵنیابە کە دەتەوێت ئەم فاکتوورە بسڕیتەوە.</p>
                        <p><strong>کەس:</strong> <span id="deleteInvoiceCustomerName"></span></p>
                        <p><strong>کۆی گشتی:</strong> <span id="deleteInvoiceTotal"></span> دینار</p>
                        <p><strong>بەروار:</strong> <span id="deleteInvoiceDate"></span></p>
                    </div>
                    
                    <div class="form-group">
                        <label for="deleteReason">هۆکاری سڕینەوە</label>
                        <select id="deleteReason">
                            <option value="error">هەڵە لە تۆمارکردندا</option>
                            <option value="cancel">فرۆشتن هەڵوەشایەوە</option>
                            <option value="duplicate">دووبارە بوونەوە</option>
                            <option value="other">هۆکی تر</option>
                        </select>
                    </div>
                    
                    <div class="form-group" style="display: none;" id="deleteOtherReasonDiv">
                        <label for="deleteOtherReason">پێناسەی هۆک (ئارەزوومەندانە)</label>
                        <input type="text" id="deleteOtherReason" placeholder="پێناسەی هۆکی سڕینەوە">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="deleteConfirmCheckbox">
                            دڵنیام کە دەمەوێت ئەم فاکتوورە بسڕمەوە
                        </label>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-danger" id="confirmDeleteInvoiceBtn" disabled>
                            <i class="fas fa-trash"></i> بەتەواوی بسڕەوە
                        </button>
                    </div>
                </div>
                
                <!-- بەشی پرێنت کردن -->
                <div class="tab-content" id="printInvoiceTab">
                    <div class="print-options" style="display: flex; flex-direction: column; gap: 20px;">
                        <!-- پرێنتی A4 -->
                        <div class="print-option-card">
                            <h4><i class="fas fa-print"></i> پرێنتی A4</h4>
                            <p style="color: var(--gray); margin: 10px 0;">فاکتووری پڕ وردەکاری بۆ ئەرشیفکردن</p>
                            <ul style="color: var(--gray); padding-right: 20px;">
                                <li>وێنەی کۆمپانیا</li>
                                <li>هەموو وردەکارییەکان</li>
                                <li>خوێنەرایەتی QR کۆد</li>
                                <li>شوێنی واژۆ</li>
                            </ul>
                            <button class="btn btn-primary" id="printA4FullBtn" style="margin-top: 15px;">
                                <i class="fas fa-print"></i> پرێنتکردنی A4
                            </button>
                        </div>
                        
                        <!-- پرێنتی بچووک -->
                        <div class="print-option-card" style="border: 2px solid var(--warning);">
                            <h4><i class="fas fa-receipt"></i> پرێنتی بچووک</h4>
                            <p style="color: var(--gray); margin: 10px 0;">پسوڵەی کورت بۆ کڕیار</p>
                            <ul style="color: var(--gray); padding-right: 20px;">
                                <li>تەنها زانیارییە سەرەکییەکان</li>
                                <li>جێگای کەم</li>
                                <li>خێرایی لە پرێنتکردندا</li>
                                <li>بۆ چاپکەرەکانی پسوڵە</li>
                            </ul>
                            <button class="btn btn-warning" id="printSmallReceiptBtn" style="margin-top: 15px;">
                                <i class="fas fa-print"></i> پرێنتکردنی بچووک
                            </button>
                        </div>
                        
                        <!-- پرێنتی دوو لایەن -->
                        <div class="print-option-card" style="border: 2px solid var(--info);">
                            <h4><i class="fas fa-copy"></i> پرێنتی دوو لایەن</h4>
                            <p style="color: var(--gray); margin: 10px 0;">بۆ فرۆشەر و کڕیار</p>
                            <ul style="color: var(--gray); padding-right: 20px;">
                                <li>دوو کۆپی لە یەک وەرگەڕان</li>
                                <li>کۆپی فرۆشەر و کڕیار</li>
                                <li>خەڵکە بەکاردهێنراوە</li>
                            </ul>
                            <button class="btn btn-info" id="printDuplicateBtn" style="margin-top: 15px;">
                                <i class="fas fa-print"></i> پرێنتکردنی دوو لایەن
                            </button>
                        </div>
                    </div>
                    
                    <div class="print-preview" style="margin-top: 30px; display: none;" id="printPreviewDiv">
                        <h4>پێشبینینی پرێنت</h4>
                        <div id="printPreviewContent" style="border: 1px solid #ddd; padding: 20px; margin-top: 10px; background-color: white;">
                            <!-- پێشبینینی پرێنت لێرە دەبینرێت -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- هەموو JavaScript لێرە -->
    <script>
        // داتای نموونەیی بۆ سیستمەکە
        const sampleData = {
            products: [
                { 
                    id: 1, 
                    name: "مۆبایلی سامسۆنگ", 
                    barcode: "123456", 
                    purchasePrice: 500000, 
                    salePrice: 650000, 
                    stock: 15, 
                    unit: "piece", 
                    image: "mobile",
                    piecesPerCarton: 50,
                    cartonPrice: 32500000
                },
                { 
                    id: 2, 
                    name: "تەلەفزیۆنی LG", 
                    barcode: "234567", 
                    purchasePrice: 1200000, 
                    salePrice: 1500000, 
                    stock: 8, 
                    unit: "piece", 
                    image: "tv",
                    piecesPerCarton: 10,
                    cartonPrice: 15000000
                },
                { 
                    id: 3, 
                    name: "کۆمپیوتەری ڕوومێزی", 
                    barcode: "345678", 
                    purchasePrice: 800000, 
                    salePrice: 950000, 
                    stock: 12, 
                    unit: "piece", 
                    image: "computer",
                    piecesPerCarton: 20,
                    cartonPrice: 19000000
                },
                { 
                    id: 4, 
                    name: "قاڵبی کارتۆنی", 
                    barcode: "456789", 
                    purchasePrice: 50000, 
                    salePrice: 70000, 
                    stock: 3, 
                    unit: "carton", 
                    image: "cardboard",
                    piecesPerCarton: 1,
                    cartonPrice: 70000
                },
                { 
                    id: 5, 
                    name: "مایکرۆوەیڤ", 
                    barcode: "567890", 
                    purchasePrice: 400000, 
                    salePrice: 500000, 
                    stock: 7, 
                    unit: "piece", 
                    image: "microwave",
                    piecesPerCarton: 10,
                    cartonPrice: 5000000
                },
                { 
                    id: 6, 
                    name: "سەرعەم", 
                    barcode: "678901", 
                    purchasePrice: 200000, 
                    salePrice: 250000, 
                    stock: 0, 
                    unit: "piece", 
                    image: "headphone",
                    piecesPerCarton: 50,
                    cartonPrice: 12500000
                },
                { 
                    id: 7, 
                    name: "کۆمپیوتەری لاپتۆپ", 
                    barcode: "789012", 
                    purchasePrice: 1500000, 
                    salePrice: 1800000, 
                    stock: 5, 
                    unit: "piece", 
                    image: "laptop",
                    piecesPerCarton: 5,
                    cartonPrice: 9000000
                },
                { 
                    id: 8, 
                    name: "ئامێری دەنگ", 
                    barcode: "890123", 
                    purchasePrice: 300000, 
                    salePrice: 380000, 
                    stock: 2, 
                    unit: "piece", 
                    image: "speaker",
                    piecesPerCarton: 20,
                    cartonPrice: 7600000
                }
            ],
            customers: [
                { id: 1, name: "عەلی محەممەد", phone: "07701234567", address: "هەولێر", debt: 120000 },
                { id: 2, name: "سەلام کەریم", phone: "07702345678", address: "سلێمانی", debt: 0 },
                { id: 3, name: "نەوزاد عەبدوڵڵا", phone: "07703456789", address: "هەولێر", debt: 75000 },
                { id: 4, name: "هەڤال ئەحمەد", phone: "07704567890", address: "دهۆک", debt: 250000 },
                { id: 5, name: "رێزان محەممەد", phone: "07705678901", address: "هەولێر", debt: 0 }
            ],
            partners: [
                { id: 1, name: "کۆمپانیای ئەلکترۆنی", phone: "07711223344", address: "هەولێر", debt: -450000 },
                { id: 2, name: "فرۆشگای کوردسات", phone: "07722334455", address: "سلێمانی", debt: -330000 },
                { id: 3, name: "کۆمپانیای ئێسپرێس", phone: "07733445566", address: "هەولێر", debt: 0 }
            ],
            sales: [
                { 
                    id: 1, 
                    code: "INV-2023-001", 
                    customer: "عەلی محەممەد", 
                    date: "2023-12-10", 
                    total: 650000, 
                    payment: "credit", 
                    items: ["مۆبایلی سامسۆنگ"],
                    notes: ""
                },
                { 
                    id: 2, 
                    code: "INV-2023-002", 
                    customer: "سەلام کەریم", 
                    date: "2023-12-11", 
                    total: 1500000, 
                    payment: "cash", 
                    items: ["تەلەفزیۆنی LG"],
                    notes: ""
                },
                { 
                    id: 3, 
                    code: "INV-2023-003", 
                    customer: "نەوزاد عەبدوڵڵا", 
                    date: "2023-12-12", 
                    total: 950000, 
                    payment: "credit", 
                    items: ["کۆمپیوتەری ڕوومێزی"],
                    notes: ""
                }
            ],
            purchases: [],
            cashBalance: 3540000,
            expenseHistory: [],
            paymentHistory: []
        };

        // داتای نموونەیی بۆ مێژووی کڕین
        const samplePurchaseData = {
            purchases: [
                { 
                    id: 1, 
                    code: "PUR-2023-001", 
                    partner: "کۆمپانیای ئەلکترۆنی", 
                    date: "2023-12-05", 
                    total: 1500000, 
                    payment: "credit", 
                    items: [
                        {name: "مۆبایلی سامسۆنگ", quantity: 2, price: 500000},
                        {name: "مۆبایلی سامسۆنگ", quantity: 1, price: 500000}
                    ] 
                },
                { 
                    id: 2, 
                    code: "PUR-2023-002", 
                    partner: "فرۆشگای کوردسات", 
                    date: "2023-12-08", 
                    total: 800000, 
                    payment: "cash", 
                    items: [
                        {name: "کۆمپیوتەری ڕوومێزی", quantity: 1, price: 800000}
                    ] 
                }
            ]
        };

        // دۆمینەکان
        let currentUser = null;
        let cart = [];
        let purchaseCart = [];
        let selectedPayment = "cash";
        let selectedCustomer = null;

        // ==============================================
        // سیستەمی چوونەژوورەوە
        // ==============================================

        // کۆدی چوونەژوورەوە - چاکسازیکراو
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // چێکی کردنی ناوی بەکارهێنەر و وشەی نهێنی
            if (username && password) {
                // چاکسازی: فەرزاد یان admin دەتوانن بچنە ژوورەوە
                if ((username === 'farzad' && password === 'farzad1234') || (username === 'admin' && password === 'admin123')) {
                    currentUser = username;
                    
                    // نیشاندانی پەڕەی سەرەکی و شاردنەوەی پەڕەی چوونەژوورەوە
                    document.getElementById('loginPage').style.display = 'none';
                    document.getElementById('mainPage').style.display = 'flex';
                    
                    // زیادکردنی ناوی بەکارهێنەر
                    document.getElementById('currentUser').textContent = username === 'farzad' ? 'فەرزاد' : 'ئەدمین';
                    
                    // زیادکردنی داتای نموونەیی
                    populateSampleData();
                    
                    // چالاککردنی داشبۆرد وەک یەکەم بەش
                    showSection('dashboard');
                } else {
                    alert('ناوی بەکارهێنەر یان وشەی نهێنی هەڵەە! تکایە دووبارە هەوڵ بدەرەوە.\n\nتێبینی:\nناوی بەکارهێنەر: farzad، وشەی نهێنی: farzad1234\nیان\nناوی بەکارهێنەر: admin، وشەی نهێنی: admin123');
                }
            } else {
                alert('تکایە هەردوو خانە پڕ بکەرەوە!');
            }
        });

        // فەنکشنی نیشاندانی بەش
        function showSection(sectionId) {
            // لابردنی چالاکی لە هەموو بەشەکان
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // لابردنی چالاکی لە هەموو بەستەرەکانی مێنیو
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // زیادکردنی چالاکی بۆ بەشەکە
            const sectionElement = document.getElementById(sectionId + 'Section');
            if (sectionElement) {
                sectionElement.classList.add('active');
            }
            
            // زیادکردنی چالاکی بۆ بەستەری مێنیو
            const navLink = document.querySelector(`.nav-link[data-section="${sectionId}"]`);
            if (navLink) {
                navLink.classList.add('active');
            }
            
            // داخستنی مێنیو لەسەر مۆبایل
            if (window.innerWidth <= 992) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }

        // چوونەدەرەوە
        document.getElementById('logoutBtn').addEventListener('click', function() {
            currentUser = null;
            cart = [];
            purchaseCart = [];
            selectedCustomer = null;
            selectedPayment = "cash";
            
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            
            // پاککردنەوەی خانەکانی چوونەژوورەوە
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            // پاککردنەوەی سەبەتە
            updateCartDisplay();
            updatePurchaseCartDisplay();
            
            // پاککردنەوەی هەڵبژاردنەکانی پارەدان
            document.querySelectorAll('.payment-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector('.payment-option[data-payment="cash"]').classList.add('selected');
            document.getElementById('customerSelection').style.display = 'none';
            document.getElementById('partnerSelection').style.display = 'none';
            if (document.getElementById('customerSearch')) {
                document.getElementById('customerSearch').value = '';
            }
            if (document.getElementById('partnerSearchPurchase')) {
                document.getElementById('partnerSearchPurchase').value = '';
            }
        });

        // نەخشەی مێنیو
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                const sectionId = this.getAttribute('data-section');
                showSection(sectionId);
            });
        });

        // نەخشەی مێنیوی مۆبایل
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
        });

        document.getElementById('closeSidebar').addEventListener('click', function() {
            document.getElementById('sidebar').classList.remove('active');
        });

        // ==============================================
        // فەنکشنەکانی داشبۆرد
        // ==============================================

        // نوێکردنەوەی کۆی پارە لە داشبۆرد
        function updateDashboardCash() {
            const cashCard = document.getElementById('cashBalanceDisplay');
            if (cashCard) {
                cashCard.innerHTML = `${sampleData.cashBalance.toLocaleString()} <span>دینار</span>`;
            }
        }

        // فەنکشنی هەژمارکردنی کۆی سەرفکردنی مانگی ئێستا
        function calculateMonthlyExpense() {
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            const monthlyExpenses = sampleData.expenseHistory.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === currentMonth && 
                       expenseDate.getFullYear() === currentYear;
            });
            
            const total = monthlyExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            // هەژمارکردنی مانگی پێشوو
            const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
            const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
            
            const lastMonthExpenses = sampleData.expenseHistory.filter(expense => {
                const expenseDate = new Date(expense.date);
                return expenseDate.getMonth() === lastMonth && 
                       expenseDate.getFullYear() === lastMonthYear;
            });
            
            const lastMonthTotal = lastMonthExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            // نیشاندانی لە داشبۆرد
            const monthlyExpenseElement = document.getElementById('monthlyExpenseTotal');
            const expenseChangeElement = document.getElementById('expenseChange');
            
            if (monthlyExpenseElement) {
                monthlyExpenseElement.innerHTML = `${total.toLocaleString()} <span>دینار</span>`;
            }
            
            if (expenseChangeElement && lastMonthTotal > 0) {
                const change = total - lastMonthTotal;
                const percentage = Math.round((change / lastMonthTotal) * 100);
                
                if (change > 0) {
                    expenseChangeElement.innerHTML = `<i class="fas fa-arrow-up"></i> ${Math.abs(percentage)}% زیاتر لە مانگی ڕابردوو`;
                    expenseChangeElement.className = 'card-change negative';
                } else if (change < 0) {
                    expenseChangeElement.innerHTML = `<i class="fas fa-arrow-down"></i> ${Math.abs(percentage)}% کەمتر لە مانگی ڕابردوو`;
                    expenseChangeElement.className = 'card-change positive';
                } else {
                    expenseChangeElement.innerHTML = `<i class="fas fa-minus"></i> ٠% جیاوازی لە مانگی ڕابردوو`;
                    expenseChangeElement.className = 'card-change';
                }
            }
        }

        // زیادکردنی داتای نموونەیی
        function populateSampleData() {
            // زیادکردنی کاڵای کەم بووەکان
            const lowStockList = document.getElementById('lowStockList');
            if (lowStockList) {
                lowStockList.innerHTML = '';
                
                sampleData.products.filter(p => p.stock <= 5).forEach(product => {
                    const li = document.createElement('li');
                    li.className = 'list-item';
                    li.innerHTML = `
                        <div class="item-name">${product.name}</div>
                        <div class="item-value">${product.stock} ${product.unit === 'piece' ? 'پارچە' : product.unit === 'carton' ? 'کارتۆن' : 'دانە'}</div>
                    `;
                    lowStockList.appendChild(li);
                });
            }
            
            // زیادکردنی قەرزدارەکان
            const debtorsList = document.getElementById('debtorsList');
            if (debtorsList) {
                debtorsList.innerHTML = '';
                
                // قەرزدارەکان بریتین لە: کەسەکان کە قەرزداری منن (قەرز +) و شەریکەکان کە من قەرزداری ئەوانم (قەرز -)
                const allDebtors = [
                    ...sampleData.customers.filter(c => c.debt > 0).map(c => ({
                        name: c.name,
                        debt: c.debt,
                        type: 'کەس',
                        debtClass: 'debt-positive'
                    })),
                    ...sampleData.partners.filter(p => p.debt < 0).map(p => ({
                        name: p.name,
                        debt: Math.abs(p.debt),
                        type: 'شەریک',
                        debtClass: 'debt-negative'
                    }))
                ];
                
                allDebtors.forEach(debtor => {
                    const li = document.createElement('li');
                    li.className = 'list-item';
                    li.innerHTML = `
                        <div class="item-name">${debtor.name} (${debtor.type})</div>
                        <div class="item-value ${debtor.debtClass}">${debtor.debt.toLocaleString()} دینار</div>
                    `;
                    debtorsList.appendChild(li);
                });
            }
            
            // زیادکردنی لیستی کاڵاکان بۆ مخزن
            const productList = document.getElementById('productList');
            if (productList) {
                productList.innerHTML = '';
                
                sampleData.products.forEach(product => {
                    const li = document.createElement('li');
                    li.className = 'list-item';
                    li.innerHTML = `
                        <div class="item-name">${product.name}</div>
                        <div class="item-value">
                            <span style="margin-left: 15px;">${product.stock} ${product.unit === 'piece' ? 'پارچە' : product.unit === 'carton' ? 'کارتۆن' : 'دانە'}</span>
                            <span>${product.salePrice.toLocaleString()} دینار</span>
                        </div>
                    `;
                    productList.appendChild(li);
                });
            }
            
            // زیادکردنی مێژووی فرۆشتن بە کارگێڕی
            populateSaleHistoryWithManagement();
            
            // زیادکردنی لیستی کەسەکان بۆ بەشی سەرەکی
            const customersMainList = document.getElementById('customersMainList');
            if (customersMainList) {
                customersMainList.innerHTML = '';
                
                sampleData.customers.forEach(customer => {
                    // دیاریکردنی رەنگ بەپێی قەرز
                    let debtClass = customer.debt > 0 ? 'debt-positive' : 'debt-zero';
                    
                    const li = document.createElement('li');
                    li.className = 'list-item';
                    li.setAttribute('data-customer-id', customer.id);
                    li.innerHTML = `
                        <div>
                            <div class="item-name">${customer.name}</div>
                            <div style="font-size: 0.9rem; color: var(--gray);">${customer.phone}</div>
                        </div>
                        <div>
                            <div class="item-value ${debtClass}">${customer.debt.toLocaleString()} دینار قەرز</div>
                            <div style="margin-top: 10px;">
                                <button class="btn btn-info btn-sm" onclick="viewCustomerDetails(${customer.id})">
                                    <i class="fas fa-eye"></i> بینین
                                </button>
                            </div>
                        </div>
                    `;
                    customersMainList.appendChild(li);
                });
            }
            
            // زیادکردنی لیستی شەریکەکان
            const partnersListItems = document.getElementById('partnersListItems');
            if (partnersListItems) {
                partnersListItems.innerHTML = '';
                
                sampleData.partners.forEach(partner => {
                    // دیاریکردنی رەنگ بەپێی جۆری قەرز
                    let debtText, debtClass;
                    
                    if (partner.debt > 0) {
                        // شەریک قەرزداری منە (مثبت) - سۆر
                        debtText = `${partner.debt.toLocaleString()} دینار (شەریک قەرزداری منە)`;
                        debtClass = 'debt-positive';
                    } else if (partner.debt < 0) {
                        // من قەرزداری شەریکم (منفی) - رەش
                        debtText = `${Math.abs(partner.debt).toLocaleString()} دینار (من قەرزداری ئەوانم)`;
                        debtClass = 'debt-negative';
                    } else {
                        // بێ قەرز - خۆڵەمێشی
                        debtText = 'بێ قەرز';
                        debtClass = 'debt-zero';
                    }
                    
                    const li = document.createElement('li');
                    li.className = 'list-item';
                    li.innerHTML = `
                        <div class="item-name">${partner.name}</div>
                        <div class="item-value ${debtClass}">${debtText}</div>
                    `;
                    partnersListItems.appendChild(li);
                });
            }
            
            // زیادکردنی مێژووی کڕین بە کارگێڕی
            populatePurchaseHistoryWithManagement();
            
            // نوێکردنەوەی کۆی پارە
            updateDashboardCash();
            
            // هەژمارکردنی کۆی سەرفکردن
            calculateMonthlyExpense();
            
            // نوێکردنەوەی مێژووی پارەواسڵکردن
            updatePaymentHistoryDisplay();
            
            // نوێکردنەوەی مێژووی سەرفکردن
            updateExpenseHistoryDisplay();
            updateExpenseHistoryMainDisplay();
            
            // خۆکارکردنی نرخی کارتۆن
            setupCartonPriceCalculator();
        }

        // ==============================================
        // فەنکشنەکانی کارگێڕی فاکتوور
        // ==============================================

        // فەنکشنی نیشاندانی مێژووی فرۆشتن بە کارگێڕی
        function populateSaleHistoryWithManagement() {
            const saleHistoryList = document.getElementById('saleHistoryList');
            if (!saleHistoryList) return;
            
            saleHistoryList.innerHTML = '';
            
            sampleData.sales.forEach(sale => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.innerHTML = `
                    <div style="flex: 1;">
                        <div class="item-name">${sale.code} - ${sale.customer}</div>
                        <div style="font-size: 0.9rem; color: var(--gray);">
                            ${sale.date} - ${sale.payment === 'cash' ? 'نەقدی' : 'قەرز'} - ${sale.items.length} کاڵا
                        </div>
                    </div>
                    <div>
                        <div class="item-value">${sale.total.toLocaleString()} دینار</div>
                        <div style="margin-top: 10px; display: flex; gap: 5px;">
                            <button class="btn btn-info btn-sm" onclick="viewInvoiceDetails(${sale.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="manageInvoice(${sale.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteInvoicePrompt(${sale.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                saleHistoryList.appendChild(li);
            });
        }

        // فەنکشنی نیشاندانی مێژووی کڕین بە کارگێڕی
        function populatePurchaseHistoryWithManagement() {
            const purchaseHistoryList = document.getElementById('purchaseHistoryList');
            if (!purchaseHistoryList) return;
            
            purchaseHistoryList.innerHTML = '';
            
            samplePurchaseData.purchases.forEach(purchase => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.innerHTML = `
                    <div style="flex: 1;">
                        <div class="item-name">${purchase.code} - ${purchase.partner}</div>
                        <div style="font-size: 0.9rem; color: var(--gray);">
                            ${purchase.date} - ${purchase.payment === 'cash' ? 'نەقدی' : 'قەرز'} - ${purchase.items.length} کاڵا
                        </div>
                    </div>
                    <div>
                        <div class="item-value">${purchase.total.toLocaleString()} دینار</div>
                        <div style="margin-top: 10px; display: flex; gap: 5px;">
                            <button class="btn btn-info btn-sm" onclick="viewPurchaseDetails(${purchase.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-warning btn-sm" onclick="managePurchase(${purchase.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deletePurchasePrompt(${purchase.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                purchaseHistoryList.appendChild(li);
            });
        }

        // فەنکشنی کارگێڕی فاکتووری فرۆشتن
        window.manageInvoice = function(invoiceId) {
            const invoice = sampleData.sales.find(s => s.id === invoiceId);
            if (!invoice) return;
            
            // نوێکردنەوەی مۆدال
            document.getElementById('manageInvoiceCode').textContent = invoice.code;
            
            // زیادکردنی کەسەکان بۆ بۆکسەکە
            const customerSelect = document.getElementById('editInvoiceCustomer');
            customerSelect.innerHTML = '';
            
            sampleData.customers.forEach(customer => {
                const option = document.createElement('option');
                option.value = customer.name;
                option.textContent = customer.name;
                if (customer.name === invoice.customer) {
                    option.selected = true;
                }
                customerSelect.appendChild(option);
            });
            
            // زیادکردنی کەسی نوێ (ئەگەر کەسەکە بوونی نییە)
            if (!sampleData.customers.some(c => c.name === invoice.customer)) {
                const option = document.createElement('option');
                option.value = invoice.customer;
                option.textContent = invoice.customer + ' (کەسی دەرەکی)';
                option.selected = true;
                customerSelect.appendChild(option);
            }
            
            // نوێکردنەوەی خانەکانی تر
            document.getElementById('editInvoiceDate').value = invoice.date;
            document.getElementById('editInvoicePayment').value = invoice.payment;
            document.getElementById('editInvoiceTotal').value = invoice.total;
            document.getElementById('editInvoiceNotes').value = invoice.notes || '';
            
            // نوێکردنەوەی لیستی کاڵاکان
            const itemsList = document.getElementById('editInvoiceItemsList');
            itemsList.innerHTML = '';
            
            invoice.items.forEach((itemName, index) => {
                const li = document.createElement('li');
                li.className = 'list-item';
                li.innerHTML = `
                    <div class="item-name">${itemName}</div>
                    <div>
                        <button class="btn btn-danger btn-sm" onclick="removeItemFromInvoice(${invoiceId}, ${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                itemsList.appendChild(li);
            });
            
            // نیشاندانی زانیاری بۆ بەشی سڕینەوە
            document.getElementById('deleteInvoiceCustomerName').textContent = invoice.customer;
            document.getElementById('deleteInvoiceTotal').textContent = invoice.total.toLocaleString();
            document.getElementById('deleteInvoiceDate').textContent = invoice.date;
            
            // پاشکەوتکردنی ID لە خانەی شاراوە
            document.getElementById('manageInvoiceModal').setAttribute('data-invoice-id', invoiceId);
            
            // نیشاندانی مۆدال
            document.getElementById('manageInvoiceModal').classList.add('active');
            
            // دەستپێکردنی تاباتەکان
            showManageTab('edit');
        };

        // فەنکشنی کارگێڕی کڕین
        window.managePurchase = function(purchaseId) {
            const purchase = samplePurchaseData.purchases.find(p => p.id === purchaseId);
            if (!purchase) return;
            
            // ئێستا تەنها پیشاندانی وردەکاری
            viewPurchaseDetails(purchaseId);
        };

        // فەنکشنی نیشاندانی تاباتەکانی کارگێڕی
        function showManageTab(tabName) {
            // لابردنی چالاکی لە هەموو تاباتەکان
            document.querySelectorAll('[data-manage-tab]').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('#manageInvoiceModal .tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // زیادکردنی چالاکی بۆ تاباتەکە
            const tabBtn = document.querySelector(`[data-manage-tab="${tabName}"]`);
            if (tabBtn) {
                tabBtn.classList.add('active');
            }
            
            const tabContent = document.getElementById(tabName + 'InvoiceTab');
            if (tabContent) {
                tabContent.classList.add('active');
            }
        }

        // نەخشەی تاباتەکان لە مۆدالی کارگێڕی
        document.querySelectorAll('[data-manage-tab]').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-manage-tab');
                showManageTab(tabName);
            });
        });

        // فەنکشنی سڕینەوەی کاڵا لە فاکتوور
        window.removeItemFromInvoice = function(invoiceId, itemIndex) {
            const invoice = sampleData.sales.find(s => s.id === invoiceId);
            if (!invoice) return;
            
            if (confirm('دڵنیای لە سڕینەوەی ئەم کاڵا لە فاکتوورەکە؟')) {
                invoice.items.splice(itemIndex, 1);
                
                // نوێکردنەوەی کۆی گشتی (لەم نموونەیەدا کەمتر ناکات، بەڵام لە وەشانی راستەقینەدا دەبێت)
                alert('کاڵا سڕایەوە! تکایە کۆی گشتی دەستکاری بکە.');
                
                // نوێکردنەوەی لیست
                manageInvoice(invoiceId);
            }
        };

        // فەنکشنی هەڵگرتنی گۆڕانکاریەکانی فاکتوور
        const saveInvoiceChangesBtn = document.getElementById('saveInvoiceChangesBtn');
        if (saveInvoiceChangesBtn) {
            saveInvoiceChangesBtn.addEventListener('click', function() {
                const invoiceId = parseInt(document.getElementById('manageInvoiceModal').getAttribute('data-invoice-id'));
                const invoice = sampleData.sales.find(s => s.id === invoiceId);
                
                if (!invoice) return;
                
                const newDate = document.getElementById('editInvoiceDate').value;
                const newCustomer = document.getElementById('editInvoiceCustomer').value;
                const newPayment = document.getElementById('editInvoicePayment').value;
                const newNotes = document.getElementById('editInvoiceNotes').value;
                
                // گۆڕانکاری لە کەس (ئەگەر گۆڕانکاری هەبوو)
                if (invoice.customer !== newCustomer) {
                    // دۆزینەوەی کەسی کۆن
                    const oldCustomer = sampleData.customers.find(c => c.name === invoice.customer);
                    if (oldCustomer && invoice.payment === 'credit') {
                        // کەمکردنەوەی قەرز لە کەسی کۆن
                        oldCustomer.debt -= invoice.total;
                        if (oldCustomer.debt < 0) oldCustomer.debt = 0;
                    }
                    
                    // دۆزینەوەی کەسی نوێ
                    const newCustomerObj = sampleData.customers.find(c => c.name === newCustomer);
                    if (newCustomerObj && newPayment === 'credit') {
                        // زیادکردنی قەرز بۆ کەسی نوێ
                        newCustomerObj.debt += invoice.total;
                    }
                }
                
                // گۆڕانکاری لە شێوازی پارەدان
                if (invoice.payment !== newPayment) {
                    const customerObj = sampleData.customers.find(c => c.name === (newCustomer || invoice.customer));
                    if (customerObj) {
                        if (newPayment === 'cash' && invoice.payment === 'credit') {
                            // گۆڕین لە قەرز بۆ نەقدی
                            customerObj.debt -= invoice.total;
                            if (customerObj.debt < 0) customerObj.debt = 0;
                            
                            // زیادکردنی پارە بۆ کۆی نەقدی
                            sampleData.cashBalance += invoice.total;
                        } else if (newPayment === 'credit' && invoice.payment === 'cash') {
                            // گۆڕین لە نەقدی بۆ قەرز
                            customerObj.debt += invoice.total;
                            
                            // کەمکردنەوەی پارە لە کۆی نەقدی
                            sampleData.cashBalance -= invoice.total;
                        }
                    }
                }
                
                // نوێکردنەوەی فاکتوور
                invoice.date = newDate;
                invoice.customer = newCustomer;
                invoice.payment = newPayment;
                invoice.notes = newNotes;
                
                // نوێکردنەوەی داشبۆرد
                updateDashboardCash();
                populateSampleData();
                populateSaleHistoryWithManagement();
                
                alert('گۆڕانکاریەکان بە سەرکەوتوویی هەڵگیرا!');
                document.getElementById('manageInvoiceModal').classList.remove('active');
            });
        }

        // پشکنینی دڵنیایی بۆ سڕینەوەی فاکتوور
        window.deleteInvoicePrompt = function(invoiceId) {
            const invoice = sampleData.sales.find(s => s.id === invoiceId);
            if (!invoice) return;
            
            // نیشاندانی مۆدال و گۆڕین بۆ بەشی سڕینەوە
            manageInvoice(invoiceId);
            showManageTab('delete');
        };

        // پشکنینی دڵنیایی بۆ سڕینەوەی کڕین
        window.deletePurchasePrompt = function(purchaseId) {
            deletePurchase(purchaseId);
        };

        // چالاککردنی دوگمەی سڕینەوە کاتێ چێک مارک دەکرێت
        const deleteConfirmCheckbox = document.getElementById('deleteConfirmCheckbox');
        if (deleteConfirmCheckbox) {
            deleteConfirmCheckbox.addEventListener('change', function() {
                const confirmBtn = document.getElementById('confirmDeleteInvoiceBtn');
                confirmBtn.disabled = !this.checked;
            });
        }

        // نیشاندانی خانەی هۆکی تر بۆ سڕینەوە
        const deleteReasonSelect = document.getElementById('deleteReason');
        if (deleteReasonSelect) {
            deleteReasonSelect.addEventListener('change', function() {
                const otherReasonDiv = document.getElementById('deleteOtherReasonDiv');
                otherReasonDiv.style.display = this.value === 'other' ? 'block' : 'none';
            });
        }

        // فەنکشنی سڕینەوەی فاکتوور
        const confirmDeleteInvoiceBtn = document.getElementById('confirmDeleteInvoiceBtn');
        if (confirmDeleteInvoiceBtn) {
            confirmDeleteInvoiceBtn.addEventListener('click', function() {
                const invoiceId = parseInt(document.getElementById('manageInvoiceModal').getAttribute('data-invoice-id'));
                const invoice = sampleData.sales.find(s => s.id === invoiceId);
                
                if (!invoice) return;
                
                const deleteReason = document.getElementById('deleteReason').value;
                const deleteOtherReason = document.getElementById('deleteOtherReason').value;
                
                // گەڕاندنەوەی کاڵاکان بۆ مخزن (ئەگەر کاڵا بەردەست بێت)
                invoice.items.forEach(itemName => {
                    const product = sampleData.products.find(p => p.name === itemName);
                    if (product) {
                        product.stock += 1; // ئێمە تەنها ١ زیاد دەکەین (لە وەشانی پێشکەوتووتر دەبێت بڕی ڕاست زیاد بکرێت)
                    }
                });
                
                // گەڕاندنەوەی پارە یان قەرز
                if (invoice.payment === 'cash') {
                    // گەڕاندنەوەی پارە لە کۆی نەقدی
                    sampleData.cashBalance -= invoice.total;
                } else if (invoice.payment === 'credit') {
                    // کەمکردنەوەی قەرز لە کەس
                    const customer = sampleData.customers.find(c => c.name === invoice.customer);
                    if (customer) {
                        customer.debt -= invoice.total;
                        if (customer.debt < 0) customer.debt = 0;
                    }
                }
                
                // تۆمارکردنی سڕینەوە لە مێژوو
                const deleteRecord = {
                    id: sampleData.sales.length + 1000,
                    type: 'delete_invoice',
                    invoiceId: invoiceId,
                    invoiceCode: invoice.code,
                    reason: deleteReason === 'other' ? deleteOtherReason : deleteReason,
                    amount: invoice.total,
                    date: new Date().toISOString().split('T')[0],
                    originalInvoice: invoice
                };
                
                // سڕینەوەی فاکتوور لە لیست
                const invoiceIndex = sampleData.sales.findIndex(s => s.id === invoiceId);
                if (invoiceIndex !== -1) {
                    sampleData.sales.splice(invoiceIndex, 1);
                }
                
                // نوێکردنەوەی داشبۆرد و لیستەکان
                updateDashboardCash();
                populateSampleData();
                populateSaleHistoryWithManagement();
                
                // داخستنی مۆدال
                document.getElementById('manageInvoiceModal').classList.remove('active');
                
                alert(`فاکتوورەکە بە سەرکەوتوویی سڕایەوە! ${invoice.total.toLocaleString()} دینار گەڕێنرایەوە.`);
            });
        }

        // داخستنی مۆدالی کارگێڕی
        const closeManageInvoiceModal = document.getElementById('closeManageInvoiceModal');
        if (closeManageInvoiceModal) {
            closeManageInvoiceModal.addEventListener('click', function() {
                document.getElementById('manageInvoiceModal').classList.remove('active');
            });
        }

        // پاشگەزبوونەوە لە گۆڕانکاری
        const cancelEditInvoiceBtn = document.getElementById('cancelEditInvoiceBtn');
        if (cancelEditInvoiceBtn) {
            cancelEditInvoiceBtn.addEventListener('click', function() {
                document.getElementById('manageInvoiceModal').classList.remove('active');
            });
        }

        // ==============================================
        // فەنکشنەکانی پرێنتکردنی پێشکەوتوو
        // ==============================================

        // پرێنتی A4 پڕ وردەکاری
        const printA4FullBtn = document.getElementById('printA4FullBtn');
        if (printA4FullBtn) {
            printA4FullBtn.addEventListener('click', function() {
                const invoiceId = parseInt(document.getElementById('manageInvoiceModal').getAttribute('data-invoice-id'));
                const invoice = sampleData.sales.find(s => s.id === invoiceId);
                
                if (!invoice) return;
                
                showPrintPreview(invoice, 'a4');
            });
        }

        // پرێنتی بچووک
        const printSmallReceiptBtn = document.getElementById('printSmallReceiptBtn');
        if (printSmallReceiptBtn) {
            printSmallReceiptBtn.addEventListener('click', function() {
                const invoiceId = parseInt(document.getElementById('manageInvoiceModal').getAttribute('data-invoice-id'));
                const invoice = sampleData.sales.find(s => s.id === invoiceId);
                
                if (!invoice) return;
                
                showPrintPreview(invoice, 'small');
            });
        }

        // پرێنتی دوو لایەن
        const printDuplicateBtn = document.getElementById('printDuplicateBtn');
        if (printDuplicateBtn) {
            printDuplicateBtn.addEventListener('click', function() {
                const invoiceId = parseInt(document.getElementById('manageInvoiceModal').getAttribute('data-invoice-id'));
                const invoice = sampleData.sales.find(s => s.id === invoiceId);
                
                if (!invoice) return;
                
                showPrintPreview(invoice, 'duplicate');
            });
        }

        // فەنکشنی پێشبینینی پرێنت
        function showPrintPreview(invoice, type) {
            const previewDiv = document.getElementById('printPreviewDiv');
            const previewContent = document.getElementById('printPreviewContent');
            
            if (!previewDiv || !previewContent) return;
            
            const customer = sampleData.customers.find(c => c.name === invoice.customer) || {name: invoice.customer, phone: 'نەزانراو'};
            
            let previewHTML = '';
            
            if (type === 'a4') {
                previewHTML = `
                    <div style="font-family: Arial, sans-serif; padding: 20px; border: 2px dashed #ddd;">
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h1 style="color: var(--primary); margin-bottom: 5px;">الکترۆنیات</h1>
                            <h2 style="margin-bottom: 10px;">فاکتووری فرۆشتن - A4</h2>
                            <p style="color: var(--gray);">کۆدی فاکتوورە: ${invoice.code}</p>
                            <p style="color: var(--gray);">بەروار: ${invoice.date}</p>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
                            <div style="flex: 1;">
                                <h4>زانیاری فرۆشەر:</h4>
                                <p>ناوی کۆمپانیا: الکترۆنیات</p>
                                <p>ژمارەی موبایل: ٠٧٧٠١٢٣٤٥٦٧</p>
                                <p>ناونیشان: هەولێر، کوردستان</p>
                                <p>بەرواری چاپ: ${new Date().toLocaleDateString('ar-IQ')}</p>
                            </div>
                            
                            <div style="flex: 1;">
                                <h4>زانیاری کڕیار:</h4>
                                <p>ناوی کڕیار: ${customer.name}</p>
                                <p>ژمارەی موبایل: ${customer.phone}</p>
                                <p>ناونیشان: ${customer.address || 'نەزانراو'}</p>
                            </div>
                        </div>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
                            <thead>
                                <tr style="background-color: var(--gray-light);">
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">#</th>
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">ناوی کاڵا</th>
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">یەکە</th>
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">بڕ</th>
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">نرخ</th>
                                    <th style="padding: 10px; text-align: right; border: 1px solid #ddd;">کۆی گشتی</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${invoice.items.map((item, index) => {
                                    const product = sampleData.products.find(p => p.name === item) || {salePrice: 0};
                                    return `
                                        <tr>
                                            <td style="padding: 10px; border: 1px solid #ddd;">${index + 1}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd;">${item}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd;">پارچە</td>
                                            <td style="padding: 10px; border: 1px solid #ddd;">١</td>
                                            <td style="padding: 10px; border: 1px solid #ddd;">${product.salePrice.toLocaleString()} دینار</td>
                                            <td style="padding: 10px; border: 1px solid #ddd;">${product.salePrice.toLocaleString()} دینار</td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                        
                        <div style="border-top: 2px solid var(--primary); padding-top: 20px;">
                            <div style="display: flex; justify-content: space-between;">
                                <div>
                                    <h4>شێوازی پارەدان:</h4>
                                    <p>${invoice.payment === 'cash' ? 'نەقدی' : 'قەرز'}</p>
                                </div>
                                
                                <div style="text-align: left;">
                                    <h4>کۆی گشتی:</h4>
                                    <p style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">${invoice.total.toLocaleString()} دینار</p>
                                </div>
                            </div>
                            
                            ${invoice.payment === 'credit' ? `
                                <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
                                    <h4>زانیاری قەرز:</h4>
                                    <p>کەسەکە قەرزداری فرۆشەرە بە بڕی ${invoice.total.toLocaleString()} دینار</p>
                                </div>
                            ` : ''}
                            
                            <div style="margin-top: 30px; display: flex; justify-content: space-between;">
                                <div>
                                    <p style="border-top: 1px solid #000; width: 200px; padding-top: 5px; margin-top: 60px;">واژۆی فرۆشەر</p>
                                </div>
                                
                                <div>
                                    <p style="border-top: 1px solid #000; width: 200px; padding-top: 5px; margin-top: 60px;">واژۆی کڕیار</p>
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 40px;">
                                <p style="color: var(--gray); font-size: 0.9rem;">سوپاس بۆ داواکاری تۆ! تکایە پەیوەندیمان پێوە بکە بۆ هەر پرسیارێک</p>
                                <div style="margin-top: 20px;">
                                    <!-- QR کۆد بۆ تەواوکردنی پارەدان (نمونەیی) -->
                                    <div style="width: 100px; height: 100px; background-color: #f0f0f0; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                                        <span style="color: var(--gray);">QR Code</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (type === 'small') {
                previewHTML = `
                    <div style="font-family: Arial, sans-serif; padding: 10px; width: 300px; margin: 0 auto;">
                        <div style="text-align: center; margin-bottom: 15px;">
                            <h3 style="margin: 0; color: var(--primary);">الکترۆنیات</h3>
                            <p style="margin: 5px 0; font-size: 0.9rem;">کۆدی فاکتوورە: ${invoice.code}</p>
                            <p style="margin: 5px 0; font-size: 0.9rem;">${invoice.date}</p>
                        </div>
                        
                        <div style="border-top: 1px dashed #ddd; padding-top: 10px; margin-bottom: 10px;">
                            <p style="margin: 5px 0;"><strong>کەس:</strong> ${customer.name}</p>
                            <p style="margin: 5px 0;"><strong>شێواز:</strong> ${invoice.payment === 'cash' ? 'نەقدی' : 'قەرز'}</p>
                        </div>
                        
                        <div style="border-top: 1px dashed #ddd; border-bottom: 1px dashed #ddd; padding: 10px 0; margin-bottom: 10px;">
                            ${invoice.items.map(item => {
                                const product = sampleData.products.find(p => p.name === item) || {salePrice: 0};
                                return `
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>${item}</span>
                                        <span>${product.salePrice.toLocaleString()} دینار</span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.1rem;">
                            <span>کۆی گشتی:</span>
                            <span>${invoice.total.toLocaleString()} دینار</span>
                        </div>
                        
                        ${invoice.payment === 'credit' ? `
                            <div style="margin-top: 10px; padding: 8px; background-color: #fff3cd; border-radius: 3px; font-size: 0.9rem;">
                                <p style="margin: 0;">قەرز: ${invoice.total.toLocaleString()} دینار</p>
                            </div>
                        ` : ''}
                        
                        <div style="text-align: center; margin-top: 15px; padding-top: 10px; border-top: 1px dashed #ddd;">
                            <p style="margin: 0; font-size: 0.8rem; color: var(--gray);">سوپاس بۆ داواکاری تۆ!</p>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--gray);">تەلەفۆن: ٠٧٧٠١٢٣٤٥٦٧</p>
                        </div>
                    </div>
                `;
            } else if (type === 'duplicate') {
                previewHTML = `
                    <div style="font-family: Arial, sans-serif;">
                        <!-- کۆپی یەکەم (فرۆشەر) -->
                        <div style="padding: 15px; border: 1px solid var(--primary); margin-bottom: 20px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <h3 style="margin: 0; color: var(--primary);">فاکتووری فرۆشتن</h3>
                                <p style="margin: 5px 0;">(کۆپی فرۆشەر)</p>
                                <p style="margin: 5px 0; font-size: 0.9rem;">کۆدی: ${invoice.code}</p>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <div>
                                    <p style="margin: 5px 0;"><strong>کەس:</strong> ${customer.name}</p>
                                    <p style="margin: 5px 0;">${invoice.date}</p>
                                </div>
                                <div>
                                    <p style="margin: 5px 0;"><strong>کۆی گشتی:</strong></p>
                                    <p style="margin: 5px 0; font-size: 1.2rem; font-weight: bold;">${invoice.total.toLocaleString()} دینار</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- کۆپی دووەم (کڕیار) -->
                        <div style="padding: 15px; border: 1px solid var(--warning);">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <h3 style="margin: 0; color: var(--warning);">فاکتووری فرۆشتن</h3>
                                <p style="margin: 5px 0;">(کۆپی کڕیار)</p>
                                <p style="margin: 5px 0; font-size: 0.9rem;">کۆدی: ${invoice.code}</p>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <div>
                                    <p style="margin: 5px 0;"><strong>کەس:</strong> ${customer.name}</p>
                                    <p style="margin: 5px 0;">${invoice.date}</p>
                                </div>
                                <div>
                                    <p style="margin: 5px 0;"><strong>کۆی گشتی:</strong></p>
                                    <p style="margin: 5px 0; font-size: 1.2rem; font-weight: bold;">${invoice.total.toLocaleString()} دینار</p>
                                </div>
                            </div>
                            
                            <div style="margin-top: 20px; border-top: 1px dashed #ddd; padding-top: 10px;">
                                ${invoice.items.map(item => {
                                    const product = sampleData.products.find(p => p.name === item) || {salePrice: 0};
                                    return `
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                            <span>${item}</span>
                                            <span>${product.salePrice.toLocaleString()} دینار</span>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                            
                            <div style="margin-top: 15px; padding-top: 10px; border-top: 1px dashed #ddd; text-align: center;">
                                <p style="margin: 0; font-size: 0.8rem; color: var(--gray);">سوپاس بۆ داواکاری تۆ!</p>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            previewContent.innerHTML = previewHTML;
            previewDiv.style.display = 'block';
            
            // ڕاستکردنەوەی تابات بۆ پرێنت
            showManageTab('print');
            
            // دروستکردنی فەنکشنی پرێنتکردن
            setTimeout(() => {
                // پاککردنەوەی فەنکشنی پێشوو
                const oldPrintBtn = document.getElementById('doPrintBtn');
                if (oldPrintBtn) oldPrintBtn.remove();
                
                // دروستکردنی دوگمەی نوێ
                const doPrintBtn = document.createElement('button');
                doPrintBtn.id = 'doPrintBtn';
                doPrintBtn.className = 'btn btn-success';
                doPrintBtn.innerHTML = '<i class="fas fa-print"></i> چاپکردنی ئێستا';
                doPrintBtn.style.marginTop = '20px';
                
                doPrintBtn.addEventListener('click', function() {
                    // دروستکردنی پەڕەی پرێنت
                    const printWindow = window.open('', '_blank');
                    printWindow.document.write(`
                        <!DOCTYPE html>
                        <html dir="rtl" lang="ar">
                        <head>
                            <meta charset="UTF-8">
                            <title>پرێنتکردنی فاکتوور: ${invoice.code}</title>
                            <style>
                                body {
                                    font-family: Arial, sans-serif;
                                    margin: 0;
                                    padding: 20px;
                                    color: #000;
                                }
                                @media print {
                                    @page {
                                        size: ${type === 'a4' ? 'A4' : 'auto'};
                                        margin: 10mm;
                                    }
                                    .no-print {
                                        display: none !important;
                                    }
                                }
                                .print-button {
                                    display: none;
                                }
                            </style>
                        </head>
                        <body>
                            ${previewContent.innerHTML}
                            <div class="no-print" style="text-align: center; margin-top: 30px;">
                                <button onclick="window.print()" style="padding: 10px 20px; background-color: #4361ee; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                    پرێنتکردن
                                </button>
                                <button onclick="window.close()" style="padding: 10px 20px; background-color: #f72585; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">
                                    داخستن
                                </button>
                            </div>
                            <script>
                                window.onload = function() {
                                    // خۆکارانە پرێنت بکە (ئارەزوومەندانە)
                                    // window.print();
                                };
                            <\/script>
                        </body>
                        </html>
                    `);
                    printWindow.document.close();
                });
                
                previewDiv.appendChild(doPrintBtn);
            }, 100);
        }

        // ==============================================
        // فەنکشنەکانی کاڵا لەناو سەبەتە
        // ==============================================

        // مۆدالی گۆڕانکاری لە فرۆشتن
        window.showSaleAdjustmentModal = function(product) {
            // چەک کردنی ئەگەر مۆدالێکی پێشوو هەبێت
            const existingModal = document.getElementById('saleAdjustmentModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            const modalHTML = `
                <div class="modal active" id="saleAdjustmentModal">
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>زیادکردنی کاڵا: ${product.name}</h3>
                            <button class="modal-close" onclick="document.getElementById('saleAdjustmentModal').remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>ناوی کاڵا</label>
                                    <input type="text" value="${product.name}" readonly style="background-color: var(--gray-light);">
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخی فرۆشتن (بنچینەیی)</label>
                                    <input type="number" id="baseSalePrice" value="${product.salePrice}" readonly style="background-color: var(--gray-light);">
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخی کارتۆن (ئەگەر کارتۆن)</label>
                                    <input type="number" id="cartonPriceModal" value="${product.cartonPrice || (product.salePrice * 50)}" readonly style="background-color: var(--gray-light);">
                                    <small style="color: var(--gray);">پارچە لە کارتۆن: ${product.piecesPerCarton || 50}</small>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>یەکە</label>
                                    <select id="saleUnit">
                                        <option value="piece" ${product.unit === 'piece' ? 'selected' : ''}>پارچە</option>
                                        <option value="carton" ${product.unit === 'carton' ? 'selected' : ''}>کارتۆن</option>
                                        <option value="unit" ${product.unit === 'unit' ? 'selected' : ''}>دانە</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>بڕ</label>
                                    <input type="number" id="saleQuantity" value="1" min="1" max="${product.stock}" placeholder="بڕ">
                                    <small style="color: var(--gray);">بڕی بەردەست: ${product.stock}</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخ بۆ هەر یەکە</label>
                                    <input type="number" id="adjustedSalePrice" value="${product.salePrice}" placeholder="نرخی فرۆشتنی دەستکاریکراو">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>کۆی گشتی</label>
                                    <input type="number" id="totalPricePreview" value="${product.salePrice}" readonly style="background-color: var(--gray-light);">
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" onclick="document.getElementById('saleAdjustmentModal').remove()">
                                    پاشگەزبوونەوە
                                </button>
                                <button class="btn btn-success" onclick="addToCartWithAdjustment(${product.id})">
                                    زیادکردن بۆ سەبەتە
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // نوێکردنی کۆی گشتی کاتێ نرخ یان بڕ دەگۆڕدرێت
            const updateTotal = () => {
                const quantity = parseInt(document.getElementById('saleQuantity').value) || 1;
                const price = parseInt(document.getElementById('adjustedSalePrice').value) || product.salePrice;
                document.getElementById('totalPricePreview').value = quantity * price;
            };
            
            document.getElementById('saleQuantity').addEventListener('input', updateTotal);
            document.getElementById('adjustedSalePrice').addEventListener('input', updateTotal);
            
            // گۆڕینی نرخی کاتێ یەکە دەگۆڕدرێت
            document.getElementById('saleUnit').addEventListener('change', function() {
                if (this.value === 'carton') {
                    document.getElementById('adjustedSalePrice').value = product.cartonPrice || (product.salePrice * 50);
                } else {
                    document.getElementById('adjustedSalePrice').value = product.salePrice;
                }
                updateTotal();
            });
        };

        // زیادکردنی کاڵا بە نرخ و بڕی دەستکاریکراو
        window.addToCartWithAdjustment = function(productId) {
            const product = sampleData.products.find(p => p.id === productId);
            if (!product) return;
            
            const adjustedPrice = parseInt(document.getElementById('adjustedSalePrice').value) || product.salePrice;
            const quantity = parseInt(document.getElementById('saleQuantity').value) || 1;
            const unit = document.getElementById('saleUnit').value;
            
            // پشکنینی بڕی بەردەست
            if (quantity > product.stock) {
                alert(`تەنها ${product.stock} ${unit === 'piece' ? 'پارچە' : unit === 'carton' ? 'کارتۆن' : 'دانە'} بەردەستە!`);
                return;
            }
            
            const existingItem = cart.find(item => item.id === product.id && item.price === adjustedPrice && item.unit === unit);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: adjustedPrice,
                    quantity: quantity,
                    unit: unit,
                    originalPrice: product.salePrice,
                    cartonPrice: product.cartonPrice,
                    piecesPerCarton: product.piecesPerCarton || 50
                });
            }
            
            updateCartDisplay();
            document.getElementById('saleAdjustmentModal').remove();
        };

        // نەخشەی نوێ بۆ دەستکاریکردنی کاڵا لەناو سەبەتە
        window.editCartItem = function(itemIndex) {
            const item = cart[itemIndex];
            const product = sampleData.products.find(p => p.id === item.id);
            
            if (!product) return;
            
            // چەک کردنی ئەگەر مۆدالێکی پێشوو هەبێت
            const existingModal = document.getElementById('editCartItemModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // پێوانەی کارتۆن
            const piecesPerCarton = item.piecesPerCarton || product.piecesPerCarton || 50;
            const cartonPrice = item.cartonPrice || product.cartonPrice || (product.salePrice * piecesPerCarton);
            
            const modalHTML = `
                <div class="modal active" id="editCartItemModal">
                    <div class="modal-content" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>دەستکاریکردنی کاڵا: ${product.name}</h3>
                            <button class="modal-close" onclick="document.getElementById('editCartItemModal').remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>ناوی کاڵا</label>
                                    <input type="text" value="${product.name}" readonly style="background-color: var(--gray-light);">
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخی فرۆشتن (بنچینەیی)</label>
                                    <input type="number" id="baseSalePriceEdit" value="${product.salePrice}" readonly style="background-color: var(--gray-light);">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>یەکە</label>
                                    <select id="editSaleUnit">
                                        <option value="piece" ${item.unit === 'piece' ? 'selected' : ''}>پارچە</option>
                                        <option value="carton" ${item.unit === 'carton' ? 'selected' : ''}>کارتۆن</option>
                                        <option value="unit" ${item.unit === 'unit' ? 'selected' : ''}>دانە</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>بڕ</label>
                                    <input type="number" id="editSaleQuantity" value="${item.quantity}" min="1" placeholder="بڕ">
                                    <small style="color: var(--gray);">بڕی بەردەست: ${product.stock + item.quantity}</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخ بۆ هەر یەکە</label>
                                    <input type="number" id="editSalePricePerUnit" value="${item.price}" placeholder="نرخ بۆ هەر یەکە">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>کۆی گشتی</label>
                                    <input type="number" id="editTotalPrice" value="${item.price * item.quantity}" readonly style="background-color: var(--gray-light);">
                                </div>
                                
                                <div class="form-group">
                                    <label>نرخی کارتۆن (ئەگەر کارتۆن)</label>
                                    <input type="number" id="editCartonPrice" value="${cartonPrice}" placeholder="نرخی کارتۆن">
                                    <small style="color: var(--gray);">پارچە لە کارتۆن: ${piecesPerCarton}</small>
                                </div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="btn btn-danger" onclick="document.getElementById('editCartItemModal').remove()">
                                    پاشگەزبوونەوە
                                </button>
                                <button class="btn btn-success" onclick="saveCartItemEdit(${itemIndex})">
                                    هەڵگرتنی دەستکاریەکان
                                </button>
                                <button class="btn btn-warning" onclick="removeFromCart(${itemIndex}); document.getElementById('editCartItemModal').remove()">
                                    سڕینەوە لە سەبەتە
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // نوێکردنی کۆی گشتی کاتێ نرخ یان بڕ دەگۆڕدرێت
            const updateEditTotal = () => {
                const quantity = parseInt(document.getElementById('editSaleQuantity').value) || 1;
                const price = parseInt(document.getElementById('editSalePricePerUnit').value) || 0;
                document.getElementById('editTotalPrice').value = quantity * price;
            };
            
            document.getElementById('editSaleQuantity').addEventListener('input', updateEditTotal);
            document.getElementById('editSalePricePerUnit').addEventListener('input', updateEditTotal);
            
            // گۆڕینی نرخ کاتێ یەکە دەگۆڕدرێت
            document.getElementById('editSaleUnit').addEventListener('change', function() {
                if (this.value === 'carton') {
                    document.getElementById('editSalePricePerUnit').value = cartonPrice;
                } else {
                    document.getElementById('editSalePricePerUnit').value = product.salePrice;
                }
                updateEditTotal();
            });
        };

        // هەڵگرتنی دەستکاریەکان بۆ کاڵا لەناو سەبەتە
        window.saveCartItemEdit = function(itemIndex) {
            const item = cart[itemIndex];
            const product = sampleData.products.find(p => p.id === item.id);
            
            if (!product) return;
            
            const newQuantity = parseInt(document.getElementById('editSaleQuantity').value) || 1;
            const newUnit = document.getElementById('editSaleUnit').value;
            const newPrice = parseInt(document.getElementById('editSalePricePerUnit').value) || product.salePrice;
            
            // پشکنینی بڕی بەردەست (بە تێبینی کردنی بڕی کۆن)
            const availableStock = product.stock + item.quantity;
            if (newQuantity > availableStock) {
                alert(`تەنها ${availableStock} ${newUnit === 'piece' ? 'پارچە' : newUnit === 'carton' ? 'کارتۆن' : 'دانە'} بەردەستە!`);
                return;
            }
            
            // نوێکردنەوەی کاڵا لە سەبەتە
            cart[itemIndex] = {
                ...item,
                quantity: newQuantity,
                unit: newUnit,
                price: newPrice
            };
            
            updateCartDisplay();
            document.getElementById('editCartItemModal').remove();
            alert('دەستکاریەکان بە سەرکەوتوویی هەڵگیرا!');
        };

        // نوێکردنەوەی نیشاندانی سەبەتە
        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            if (!cartItems) return;
            
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<li class="empty-cart">هیچ کاڵایەک لە سەبەتەدا نییە</li>';
                return;
            }
            
            let total = 0;
            
            cart.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'cart-item';
                
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                li.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-image">
                            <i class="fas fa-${getProductIcon(item.name)}"></i>
                        </div>
                        <div>
                            <div class="item-name">${item.name}</div>
                            <div style="font-size: 0.9rem; color: var(--gray);">
                                ${item.quantity} ${item.unit === 'piece' ? 'پارچە' : item.unit === 'carton' ? 'کارتۆن' : 'دانە'} × ${item.price.toLocaleString()} دینار
                            </div>
                            <div style="font-size: 0.9rem; color: var(--info);">
                                کۆی: ${itemTotal.toLocaleString()} دینار
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="item-value">${itemTotal.toLocaleString()} دینار</div>
                        <div style="margin-top: 10px; display: flex; gap: 5px;">
                            <button class="btn btn-info btn-sm" onclick="editCartItem(${index})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="removeFromCart(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                cartItems.appendChild(li);
            });
        }

        // سڕینەوەی کاڵا لە سەبەتە
        window.removeFromCart = function(index) {
            cart.splice(index, 1);
            updateCartDisplay();
        };

        // دەستنیشانکردنی ئایکۆنی کاڵا
        function getProductIcon(productName) {
            if (productName.includes("مۆبایل")) return "mobile-alt";
            if (productName.includes("تەلەفزیۆن")) return "tv";
            if (productName.includes("کۆمپیوتەر")) return "desktop";
            if (productName.includes("لاپتۆپ")) return "laptop";
            if (productName.includes("سەرعەم")) return "headphones";
            if (productName.includes("ئامێری دەنگ")) return "volume-up";
            if (productName.includes("مایکرۆوەیڤ")) return "microphone";
            if (productName.includes("قاڵبی")) return "box";
            return "box";
        }

        // ==============================================
        // فەنکشنەکانی کڕین
        // ==============================================

        // نوێکردنەوەی سەبەتەی کڕین
        function updatePurchaseCartDisplay() {
            const purchaseCartItems = document.getElementById('purchaseCartItems');
            if (!purchaseCartItems) return;
            
            purchaseCartItems.innerHTML = '';
            
            if (purchaseCart.length === 0) {
                purchaseCartItems.innerHTML = '<li class="empty-cart">هیچ کاڵایەک لە سەبەتەدا نییە</li>';
                return;
            }
            
            let total = 0;
            
            purchaseCart.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'cart-item';
                
                const itemTotal = item.newPurchasePrice * item.quantity;
                total += itemTotal;
                
                li.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-image">
                            <i class="fas fa-${getProductIcon(item.name)}"></i>
                        </div>
                        <div>
                            <div class="item-name">${item.name}</div>
                            <div style="font-size: 0.9rem; color: var(--gray);">
                                ${item.quantity} ${item.unit === 'piece' ? 'پارچە' : item.unit === 'carton' ? 'کارتۆن' : 'دانە'}
                            </div>
                            <div style="font-size: 0.9rem; color: var(--info);">
                                نرخ: ${item.newPurchasePrice.toLocaleString()} دینار (کۆن: ${item.oldPurchasePrice.toLocaleString()})
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="item-value">${itemTotal.toLocaleString()} دینار</div>
                        <div style="margin-top: 10px;">
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="removeFromPurchaseCart(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                purchaseCartItems.appendChild(li);
            });
        };

        // ==============================================
        // خۆکارکردنی نرخی کارتۆن
        // ==============================================

        // ڕێکخستنی کۆدی خۆکارکردنی نرخی کارتۆن
        function setupCartonPriceCalculator() {
            const piecesPerCartonInput = document.getElementById('piecesPerCarton');
            const salePriceInput = document.getElementById('salePrice');
            const cartonPriceInput = document.getElementById('cartonPrice');
            
            if (piecesPerCartonInput && salePriceInput && cartonPriceInput) {
                function calculateCartonPrice() {
                    const piecesPerCarton = parseInt(piecesPerCartonInput.value) || 50;
                    const salePrice = parseInt(salePriceInput.value) || 0;
                    cartonPriceInput.value = piecesPerCarton * salePrice;
                }
                
                piecesPerCartonInput.addEventListener('input', calculateCartonPrice);
                salePriceInput.addEventListener('input', calculateCartonPrice);
                
                // یەکەمجار هەژمار بکە
                calculateCartonPrice();
            }
        }

        // ==============================================
        // فەنکشنەکانی تر
        // ==============================================

        // نەخشەی گەڕان بۆ کاڵا لە بەشی فرۆشتن
        const productSearch = document.getElementById('productSearch');
        if (productSearch) {
            productSearch.addEventListener('input', function() {
                const query = this.value.toLowerCase();
                const suggestions = document.getElementById('productSuggestions');
                
                if (!suggestions) return;
                
                if (query.length < 2) {
                    suggestions.style.display = 'none';
                    return;
                }
                
                const filteredProducts = sampleData.products.filter(p => 
                    p.name.toLowerCase().includes(query) || 
                    p.barcode.includes(query)
                );
                
                suggestions.innerHTML = '';
                
                if (filteredProducts.length === 0) {
                    suggestions.style.display = 'none';
                    return;
                }
                
                filteredProducts.forEach(product => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item';
                    div.textContent = `${product.name} - ${product.salePrice.toLocaleString()} دینار`;
                    
                    div.addEventListener('click', function() {
                        showSaleAdjustmentModal(product);
                        document.getElementById('productSearch').value = '';
                        suggestions.style.display = 'none';
                    });
                    
                    suggestions.appendChild(div);
                });
                
                suggestions.style.display = 'block';
            });
        }

        // ==============================================
        // دەستپێکردنی سیستم
        // ==============================================

        // دەستپێکردنی سیستم
        window.addEventListener('load', function() {
            const firstNavLink = document.querySelector('.nav-link[data-section="dashboard"]');
            if (firstNavLink) {
                firstNavLink.classList.add('active');
            }
            
            const firstTabBtn = document.querySelector('.tab-btn[data-tab="newSale"]');
            if (firstTabBtn) {
                firstTabBtn.classList.add('active');
            }
            
            const firstPurchaseTab = document.querySelector('#purchaseSection .tab-btn[data-tab="newPurchase"]');
            if (firstPurchaseTab) {
                firstPurchaseTab.classList.add('active');
            }
            
            const firstPaymentTab = document.querySelector('.tab-btn[data-tab="debtPayment"]');
            if (firstPaymentTab) {
                firstPaymentTab.classList.add('active');
            }
            
            const partnerExpenseTab = document.querySelector('.tab-btn[data-tab="expenseToPartner"]');
            if (partnerExpenseTab) {
                partnerExpenseTab.classList.add('active');
            }
            
            const firstInventoryTab = document.querySelector('.inventory-tab[data-inventory-tab="products"]');
            if (firstInventoryTab) {
                firstInventoryTab.classList.add('active');
            }
            
            const firstPaymentOption = document.querySelector('.payment-option[data-payment="cash"]');
            if (firstPaymentOption) {
                firstPaymentOption.classList.add('selected');
            }
            
            const firstCustomerTab = document.querySelector('.tab-btn[data-tab="customersList"]');
            if (firstCustomerTab) {
                firstCustomerTab.classList.add('active');
            }
            
            const firstPartnerTab = document.querySelector('.tab-btn[data-tab="partnersList"]');
            if (firstPartnerTab) {
                firstPartnerTab.classList.add('active');
            }
            
            // دەستپێکردنی جۆری سەرفکردن
            if (document.getElementById('expenseType')) {
                document.getElementById('expenseType').value = 'other';
                document.getElementById('expenseOtherSection').style.display = 'block';
            }
            
            // دەستپێکردنی بەرواری ئەمرۆ
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('paymentDateInput')) {
                document.getElementById('paymentDateInput').value = today;
            }
            if (document.getElementById('expenseDate')) {
                document.getElementById('expenseDate').value = today;
            }
            
            updateCartDisplay();
            updatePurchaseCartDisplay();
            updateDashboardCash();
            updatePaymentHistoryDisplay();
            updateExpenseHistoryDisplay();
            updateExpenseHistoryMainDisplay();
            calculateMonthlyExpense();
            
            // خۆکارکردنی نرخی کارتۆن
            setupCartonPriceCalculator();
        });

        // تێبینی: کۆدی پێشووی تری فەنکشنەکان (viewCustomerDetails, viewInvoiceDetails, deleteInvoice, viewPurchaseDetails, 
        // deletePurchase, updatePaymentHistoryDisplay, updateExpenseHistoryDisplay, updateExpenseHistoryMainDisplay, 
        // و فەنکشنەکانی تر) لە کۆدی پێشوودا هەبوون و لێرە دووبارە نەنووسراوەتەوە بۆ کورتی.
        // بەڵام هەموو فەنکشنە گرنگەکان لەم کۆدەدا هەن.
    </script>
</body>
</html>